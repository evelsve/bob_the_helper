{"code":"(this[\"webpackJsonpmood-admin\"]=this[\"webpackJsonpmood-admin\"]||[]).push([[0],{24:function(t,e,o){},35:function(t,e,o){\"use strict\";o.r(e),o.d(e,\"grammar\",(function(){return h})),o.d(e,\"say\",(function(){return O})),o.d(e,\"listen\",(function(){return v})),o.d(e,\"promptAndAsk\",(function(){return k})),o.d(e,\"promptHelpBye\",(function(){return j})),o.d(e,\"Endings\",(function(){return S})),o.d(e,\"Queries\",(function(){return w})),o.d(e,\"Conditional\",(function(){return R})),o.d(e,\"nluRequest\",(function(){return f}));var a=o(23),n=o(5),r=(o(24),o(8),o(20)),i=o(4),s=o(41),c=o(40),l=o(18),p=o(39);const d={finished:{finished:!0},done:{finished:!0},\"I've done the task\":{finished:!0}};const u={initial:\"idle\",states:{idle:{},positive:{initial:\"quest1\",states:{quest1:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:\"#root.dm1.create_do\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:\"#root.dm1.if_ideas\"},{target:\"#root.dm1.others\"}]}},k(\"I suppose you could do something productive. Do you agree?\")),quest2:Object(n.a)({on:{RECOGNISED:{target:\"#root.dm1.query3\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"So what would you like to do?\"))}},query1:Object(n.a)({},w(\"conditional1\",\"#root.init.help\")),conditional1:Object(n.a)({},R(\"agree\",\"create_do\",\"disagree\",\"#root.dm1.if_ideas\",\"#root.dm1.others\",\"#root.dm2.idle\",\"Ok.\")),query3:Object(n.a)({},w(\"#root.init.distributor\",\"#root.init.help\")),create_do:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:{actions:Object(i.b)((t=>({task:t.recResult}))),target:\"to_do\"}}},k(\"Tell me the things you have to accomplish.\")),to_do:{initial:\"prompt\",states:{prompt:{entry:Object(i.k)((t=>({delay:12e3,type:\"SPEAK\",value:\"Now go and complete the following tasks: \".concat(t.task)}))),on:{ENDSPEECH:\"#root.dm1.wait\"}}}},if_ideas:Object(n.a)({on:{RECOGNISED:{target:\"#root.dm1.query2\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"Then how about working on your ideas?\")),query2:Object(n.a)({},w(\"conditional2\",\"#root.init.help\")),conditional2:Object(n.a)({},R(\"agree\",\"create_ideas\",\"disagree\",\"#root.dm1.positive.quest2\",\"#root.dm1.others\",\"#root.dm2.idle\",\"Cool.\")),create_ideas:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:{target:\"idea\",actions:Object(i.b)((t=>({idea:t.recResult})))}}},k(\"Tell me your idea.\")),idea:{initial:\"prompt\",states:{prompt:{entry:Object(i.k)((t=>({type:\"SPEAK\",value:\"You should work on your idea of \".concat(t.idea,\".\")}))),on:{ENDSPEECH:\"#root.dm1.wait\"}}}},wait:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==d[t.recResult]&&!0===d[t.recResult].finished,target:\"done\"},{cond:t=>void 0!==d[t.recResult]&&!1===d[t.recResult].finished,target:\"wait\"},{target:\"wait\"}]}},k(\"Say 'finished', when you're done\")),done:{initial:\"prompt\",states:{prompt:{entry:O(\"Good job.\"),on:{ENDSPEECH:{target:\"#root.init.goodbye\"}}}}},others:{initial:\"prompt\",states:{prompt:{entry:O(\"mmm, you said something strange\"),on:{ENDSPEECH:\"#root.dm1.positive.quest2\"}}}}}},m={rock:{url:\"https://www.youtube.com/watch?v=A0QkGThnKNQ\"},metal:{url:\"https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut\"},punk:{url:\"https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9\"},rap:{url:\"https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss\"},\"lo-fi\":{url:\"https://www.youtube.com/watch?v=5qap5aO4i9A\"},house:{url:\"https://www.youtube.com/watch?v=cna6C24AJkU\"},techno:{url:\"https://www.youtube.com/watch?v=bC9_OKu6nBQ\"},country:{url:\"https://www.youtube.com/watch?v=kI24NNjz2j8\"}},g={shooting:{game:\"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},arcade:{game:\"https://www.miniclip.com/games/genre-517/arcade/en/\"},racing:{game:\"https://www.miniclip.com/games/genre-477/racing/en/\"}};function b(t){return window.open(t,\"_blank\")}const E={initial:\"idle\",states:{idle:{},negative:{initial:\"music\",states:{music:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.choose_music\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.ask_game\"},{target:\"#root.dm2.negative.music.ask_again\"}]},states:{prompt:{entry:O(\"I am sorry to hear that. Would you like to listen to some music?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},choose_music:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==m[t.recResult]&&\"url\"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({url:m[t.recResult].url}))),target:\"#root.dm2.negative.load_music\"},{target:\"#root.dm2.negative.choose_music.ask_again\"}]},states:{prompt:{entry:O(\"Great, let's dance our troubles away! Which genre would you like to listen to?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_music:{initial:\"prompt\",states:{prompt:{entry:O(\"Loading music for you! Dance your troubles away. I hope you feel better homie.\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},b(t.url)))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},ask_game:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.choose_game\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.entertainment\"},{target:\"#root.dm2.negative.ask_game.ask_again\"}]},states:{prompt:{entry:O(\"Okay then. Let's play a game instead, what do you think?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},choose_game:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==g[t.recResult]&&\"game\"in(g[t.recResult]||{}),actions:Object(i.b)((t=>({game:g[t.recResult].game}))),target:\"#root.dm2.negative.load_game\"},{target:\"#root.dm2.negative.choose_game.ask_again\"}]},states:{prompt:{entry:O(\"Nice! You choose to play an arcade, shooting or racing game!\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_game:{initial:\"prompt\",states:{prompt:{entry:O(\"Loading game for you! I hope you feel better my G.\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},b(t.game)))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},entertainment:{initial:\"prompt\",on:{ENDSPEECH:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.load_entertainment\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.final_state\"},{target:\"#root.dm2.negative.entertainment.ask_again\"}]},states:{prompt:{entry:O(\"Then would you like some random entertainment?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_entertainment:{initial:\"prompt\",states:{prompt:{entry:O(\"Loading entertainment for you! I hope you feel better my G\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},b(\"https://theuselessweb.com\")))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},final_state:{initial:\"prompt\",states:{prompt:{entry:O(\"Okay! I hope you find another way to feel better!\"),on:{ENDSPEECH:\"#root.dm2.idle\"}}}}}}}};var y=o(12);const h={\"of course\":{approval:!0},\"yes of course\":{approval:!0},yes:{approval:!0},yeah:{approval:!0},yup:{approval:!0},sure:{approval:!0},no:{approval:!1},nah:{approval:!1},nope:{approval:!1},\"no way\":{approval:!1},\"not sure\":{approval:!1},\"of course not\":{approval:!1}};function O(t){return Object(i.k)((e=>({type:\"SPEAK\",value:t})))}function v(){return Object(i.k)(\"LISTEN\")}function k(t){return{initial:\"prompt\",states:{prompt:{entry:O(t),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")}}}}function j(t,e){return{initial:\"prompt\",states:{prompt:{entry:O(t),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},help:{entry:O(\"We may be miscommunicating.\"),on:{ENDSPEECH:[e,\"#root.init.help\"]}},goodbye:{entry:O(\"Happy to help out. Goodbye.\"),on:{ENDSPEECH:[e,\"#root.init.idle\"]}}}}}function S(t,e){return{initial:\"prompt\",states:{prompt:{entry:Object(i.k)({type:\"SPEAK\",value:t}),on:{ENDSPEECH:e}}}}}function w(t,e){return{invoke:{id:\"rasa\",src:(t,e)=>f(t.option),onDone:{actions:[Object(i.b)(((t,e)=>({option:e.data.intent.name}))),(t,e)=>console.log(e.data)],target:t},onError:{target:e,actions:(t,e)=>console.log(e.data)}}}}function R(t,e,o,a,n,r,s){return{initial:\"prompt\",on:{ENDSPEECH:[{cond:e=>e.option===t,target:e},{cond:t=>t.option===o,target:a},{cond:t=>\"help\"===t.option,target:[r,\"#root.init.help\"]},{target:n}]},states:{prompt:{entry:Object(i.k)({type:\"SPEAK\",value:s})}}}}window.open(\"https://cors-anywhere.herokuapp.com/corsdemo\"),Object(p.a)({url:\"https://statecharts.io/inspect\",iframe:!1});Object(i.k)((t=>({type:\"SPEAK\",value:\"\".concat(t.snippet)})));const N=Object(s.a)({id:\"root\",type:\"parallel\",states:{init:{initial:\"idle\",states:{idle:{on:{CLICK:\"welcome\"}},welcome:Object(n.a)({on:{RECOGNISED:{target:\"query\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"Good morning. How are you?\")),query:Object(n.a)({},w(\"distributor\",\"welcome\")),distributor:{initial:\"prompt\",on:{ENDSPEECH:[{cond:t=>\"positive\"===t.option,target:[\"#root.dm1.positive\",\"idle\"]},{cond:t=>\"negative\"===t.option,target:[\"#root.dm2.negative\",\"idle\"]},{cond:t=>\"todo\"===t.option,target:[\"#root.dm1.create_do\",\"idle\"]},{cond:t=>\"ideas\"===t.option,target:[\"#root.dm1.create_ideas\",\"idle\"]},{cond:t=>\"answer\"===t.option,target:\"answer\"},{cond:t=>\"bob\"===t.option,target:\"bob\"},{cond:t=>\"neutral\"===t.option,target:\"neutral\"},{cond:t=>\"music\"===t.option,target:[\"#root.dm2.negative.choose_music\",\"idle\"]},{cond:t=>\"games\"===t.option,target:[\"#root.dm2.negative.choose_game\",\"idle\"]},{cond:t=>\"entertain\"===t.option,target:[\"#root.dm2.negative.load_entertainment\",\"idle\"]},{cond:t=>\"help\"===t.option,target:\"help\"},{target:\".nomatch\"}]},states:{prompt:{entry:O(\"Ok.\")},nomatch:{entry:O(\"This function has not been developed\"),on:{ENDSPEECH:\"#root.init.help\"}}}},answer:Object(n.a)({on:{RECOGNISED:{target:\"query\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"I am good, thank you. Tell me what you'd like to do.\")),bob:Object(n.a)({on:{RECOGNISED:{target:\"query\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")),neutral:Object(n.a)({on:{RECOGNISED:{target:\"q\",actions:Object(i.b)((t=>({option:t.recResult})))}}},k(\"I am good, thank you.\")),help:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:\"bob\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:\".goodbye\"}]}},j(\"I feel lost. Let's start over?\",\"#root.init\")),goodbye:Object(n.a)({},S(\"Happy to help out. See you later.\",\"#root.init\"))}},dm1:Object(n.a)({},u),dm2:Object(n.a)({},E),asrtts:{initial:\"idle\",states:{idle:{on:{LISTEN:\"recognising\",SPEAK:{target:\"speaking\",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:\"progress\",entry:\"recStart\",exit:\"recStop\",on:{ASRRESULT:{actions:[\"recLogResult\",Object(i.b)(((t,e)=>({recResult:e.value})))],target:\".match\"},RECOGNISED:\"idle\"},states:{progress:{},match:{entry:Object(i.k)(\"RECOGNISED\")}}},speaking:{entry:\"ttsStart\",on:{ENDSPEECH:\"idle\"}}}}}},{actions:{recLogResult:t=>{console.log(\"<< ASR: \"+t.recResult)},test:()=>{console.log(\"test\")},logIntent:t=>{console.log(\"<< NLU intent: \"+t.nluData.intent.name)}}}),C=t=>{switch(!0){case t.state.matches({asrtts:\"recognising\"}):return Object(y.jsx)(\"button\",Object(n.a)(Object(n.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},t),{},{children:\"...\"}));case t.state.matches({asrtts:\"speaking\"}):return Object(y.jsx)(\"button\",Object(n.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},t));default:return Object(y.jsx)(\"button\",Object(n.a)(Object(n.a)({type:\"button\",className:\"glow-on-hover\"},t),{},{children:\"Click on me\"}))}};function I(){const t=Object(l.useSpeechSynthesis)({onEnd:()=>{u(\"ENDSPEECH\")}}),e=t.speak,o=t.cancel,n=(t.speaking,Object(l.useSpeechRecognition)({onResult:t=>{u({type:\"ASRRESULT\",value:t})}})),r=n.listen,i=(n.listening,n.stop),s=Object(c.b)(N,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log(\"Ready to receive a command.\"),r({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log(\"Recognition stopped.\"),i()})),changeColour:Object(c.a)((t=>{console.log(\"Repainting...\"),document.body.style.background=t.recResult})),ttsStart:Object(c.a)(((t,o)=>{console.log(\"Speaking...\"),e({text:t.ttsAgenda})})),ttsCancel:Object(c.a)(((t,e)=>{console.log(\"TTS STOP...\"),o()}))}}),p=Object(a.a)(s,3),d=p[0],u=p[1];p[2];return Object(y.jsx)(\"div\",{className:\"App\",children:Object(y.jsx)(C,{state:d,onClick:()=>u(\"CLICK\")})})}const f=t=>fetch(new Request(\"https://cors-anywhere.herokuapp.com/https://mood-admin.herokuapp.com/model/parse\",{method:\"POST\",headers:{Origin:\"http://localhost:3000/\"},body:'{\"text\": \"'.concat(t,'\"}')})).then((t=>t.json())),D=document.getElementById(\"root\");r.render(Object(y.jsx)(I,{}),D)}},[[35,1,2]]]);","name":"static/js/main.709eaa55.chunk.js","map":{"version":3,"sources":["static/js/main.709eaa55.chunk.js"],"names":["this","push","24","module","exports","__webpack_require__","35","__webpack_exports__","r","d","grammar","say","src_listen","promptAndAsk","promptHelpBye","Endings","Queries","Conditional","nluRequest","slicedToArray","objectSpread2","react_dom","actions","Machine","useMachine","dist","browser","gram","finished","done","I've done the task","dmMachine1","initial","states","idle","positive","quest1","Object","on","RECOGNISED","cond","context","undefined","recResult","approval","target","quest2","option","query1","conditional1","query3","create_do","task","to_do","prompt","entry","delay","type","value","concat","ENDSPEECH","if_ideas","query2","conditional2","create_ideas","idea","wait","others","dmNegative_url_grammar","rock","url","metal","punk","rap","lo-fi","house","techno","country","game_grammar","shooting","game","arcade","racing","openInNewTab","user_input","window","open","dmMachine2","negative","music","ask","ask_again","choose_music","load_music","play","ask_game","choose_game","load_game","entertainment","load_entertainment","final_state","jsx_runtime","of course","yes of course","yes","yeah","yup","sure","no","nah","nope","no way","not sure","of course not","text","_context","idled","help","goodbye","saythis","on_end","ondone","onerror","invoke","id","src","event","onDone","data","intent","name","console","log","onError","cond1","target1","cond2","target2","elses","idles","iframe","snippet","machine","init","CLICK","welcome","query","distributor","nomatch","answer","bob","neutral","dm1","dm2","asrtts","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","className","style","animation","children","App","_useSpeechSynthesis","onEnd","send","speak","cancel","_useSpeechRecognition","onResult","result","listen","stop","listening","_useMachine","devTools","recStart","interimResults","continuous","recStop","changeColour","document","body","background","ttsStart","effect","ttsCancel","_useMachine2","current","onClick","fetch","Request","proxyurl","method","headers","Origin","then","json","rootElement","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmood-admin\"] = this[\"webpackJsonpmood-admin\"] || []).push([[0],{\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"grammar\", function() { return /* binding */ grammar; });\n__webpack_require__.d(__webpack_exports__, \"say\", function() { return /* binding */ say; });\n__webpack_require__.d(__webpack_exports__, \"listen\", function() { return /* binding */ src_listen; });\n__webpack_require__.d(__webpack_exports__, \"promptAndAsk\", function() { return /* binding */ promptAndAsk; });\n__webpack_require__.d(__webpack_exports__, \"promptHelpBye\", function() { return /* binding */ promptHelpBye; });\n__webpack_require__.d(__webpack_exports__, \"Endings\", function() { return /* binding */ Endings; });\n__webpack_require__.d(__webpack_exports__, \"Queries\", function() { return /* binding */ Queries; });\n__webpack_require__.d(__webpack_exports__, \"Conditional\", function() { return /* binding */ Conditional; });\n__webpack_require__.d(__webpack_exports__, \"nluRequest\", function() { return /* binding */ nluRequest; });\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./src/styles.scss\nvar styles = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/actions.js\nvar actions = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/Machine.js + 2 modules\nvar Machine = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/react/es/useMachine.js + 3 modules\nvar useMachine = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/react-speech-kit/dist/index.js\nvar dist = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/inspect/es/browser.js + 3 modules\nvar browser = __webpack_require__(39);\n\n// CONCATENATED MODULE: ./src/dmPositive.ts\nconst url_grammar={\"rock\":{url:'https://www.youtube.com/watch?v=A0QkGThnKNQ'},\"metal\":{url:'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'},\"punk\":{url:'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'},\"rap\":{url:'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'},\"lo-fi\":{url:'https://www.youtube.com/watch?v=5qap5aO4i9A'},\"house\":{url:'https://www.youtube.com/watch?v=cna6C24AJkU'},\"techno\":{url:'https://www.youtube.com/watch?v=bC9_OKu6nBQ'},\"country\":{url:'https://www.youtube.com/watch?v=kI24NNjz2j8'}// ...          \n};const help_commands=[\"help\",\"I don't know\",\"help me\",\"I need help\",\"what does this mean\",\"wait what\",\"what do you mean\"];function Prompt_Nomatch_Timeout(prompt,no_match,timeout=5000){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:[Object(actions[\"k\" /* send */])('LISTEN'),Object(actions[\"k\" /* send */])('MAXSPEECH',{delay:timeout,id:'timeout'})]},nomatch:{entry:say(no_match),on:{ENDSPEECH:\"prompt\"}}}};}const gram={\"finished\":{finished:true},\"done\":{finished:true},\"I've done the task\":{finished:true}// ...          \n};let num=0;const dmMachine1={// NOTE: regarding the queries:\n// There are more efficient ways to implement them, however, \n// Yet we decided to have a grammar as well as querying in order to see\n// which implementation will yield better results\ninitial:'idle',states:{// ...\nidle:{},// ...\npositive:{initial:\"quest1\",states:{// .... // ...\nquest1:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,target:\"#root.dm1.create_do\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,target:\"#root.dm1.if_ideas\"},{target:'#root.dm1.others'}]}},promptAndAsk(\"I suppose you could do something productive. Do you agree?\")),// .... // ...\nquest2:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:'#root.dm1.query3',actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"So what would you like to do?\"))}},// ....\nquery1:Object(objectSpread2[\"a\" /* default */])({},Queries('conditional1',\"#root.init.help\")),// ....\nconditional1:Object(objectSpread2[\"a\" /* default */])({},Conditional('agree',\"create_do\",'disagree',\"#root.dm1.if_ideas\",\"#root.dm1.others\",'#root.dm2.idle',\"Ok.\")),// ....\nquery3:Object(objectSpread2[\"a\" /* default */])({},Queries(\"#root.init.distributor\",\"#root.init.help\")),//...\ncreate_do:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:{actions:Object(actions[\"b\" /* assign */])(context=>{return{task:context.recResult};}),target:\"to_do\"}}},promptAndAsk(\"Tell me the things you have to accomplish.\")),// ...\nto_do:{initial:\"prompt\",states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({delay:12000,type:\"SPEAK\",value:\"Now go and complete the following tasks: \".concat(context.task)})),on:{ENDSPEECH:'#root.dm1.wait'}}}},// ...\nif_ideas:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:'#root.dm1.query2',actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"Then how about working on your ideas?\")),// ....\nquery2:Object(objectSpread2[\"a\" /* default */])({},Queries('conditional2',\"#root.init.help\")),// ....\nconditional2:Object(objectSpread2[\"a\" /* default */])({},Conditional('agree',\"create_ideas\",'disagree',\"#root.dm1.positive.quest2\",\"#root.dm1.others\",'#root.dm2.idle',\"Cool.\")),// ...\ncreate_ideas:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:{target:\"idea\",actions:Object(actions[\"b\" /* assign */])(context=>{return{idea:context.recResult};})}}},promptAndAsk(\"Tell me your idea.\")),// ...\nidea:{initial:\"prompt\",// on: {ENDSPEECH: ['#root.dm1.idle']},\nstates:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"You should work on your idea of \".concat(context.idea,\".\")})),on:{ENDSPEECH:'#root.dm1.wait'}}}},// ...\nwait:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>gram[context.recResult]!==undefined&&gram[context.recResult].finished===true,target:\"done\"},{cond:context=>gram[context.recResult]!==undefined&&gram[context.recResult].finished===false,target:\"wait\"},{target:'wait'}]}},promptAndAsk(\"Say 'finished', when you're done\")),// ...\ndone:{initial:\"prompt\",states:{prompt:{entry:say(\"Good job.\"),on:{ENDSPEECH:{target:'#root.init.goodbye'}}}}},// ...\nothers:{initial:\"prompt\",// on: {ENDSPEECH: '#root.goodbbye'},\nstates:{prompt:{entry:say(\"mmm, you said something strange\"),on:{ENDSPEECH:'#root.dm1.positive.quest2'}}}}}};// ONLY DRAFTS\n// done: {...Endings(\"Congratulations on your accomplishment!\",\"#root.init\")},\n// annoy:{\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: [\n//             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n//             target: \"done\"},\n//             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n//             target: \".wait\"}],\n//         // WAIT: '.wait'\n//         }\n//     },\n// ...\n// annoy: {\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: [\n//             {cond: (context) => context.option === 'agrreement', target: \"done\"},\n//             {cond: (context) => context.option === 'disagreement', target: \".wait\"},\n//             {target: \".wait\"}], \n//         WAIT: '.prompt'\n//     },\n//     states: {\n//         prompt: {\n//             entry: say(\"Have you done your task yet?\"),\n//             on: { ENDSPEECH: \"ask\" }\n//         },\n//         ask: {\n//             entry: [ send('LISTEN'), send('WAIT', {delay: 5000})]\n//         },\n//         // wait2: {entry: [ send('WAIT', {delay: 3000})]},\n//         wait: {\n//             entry: [\n//                 say('Hm.')\n//             ],\n//             on: {\n//                 ENDSPEECH: [\n//                     {cond: () => (num++) <= 2, target: 'prompt'},\n//                     {target: '#root.dm1.done'}\n//                 ]\n//             }\n//         }\n//     }\n// },\n// ----\n// quest1: {\n//     on: {\n//         RECOGNISED: [\n//                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n//                 actions: assign((context) => { return { approval: true } }),\n//                 target: \"#root.dm1.create_do\"},\n//                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n//                 actions: assign((context) => { return { approval: false} }),\n//                 target: \"#root.dm1.if_ideas\"},\n//                 {target: \"#root.dm1.done.others\"}\n//                 // {cond: (context) => context.option === 'help', target: '.help'}\n//                 ]\n//         },\n//         ...promptHelpBye(\"I suppose you could do something productive. Do you agree?\")\n//         },\\\n// ------\n// done: {\n//     initial: \"prompt\",\n//     // on: {ENDSPEECH: ['#root.dm1.idle']},\n//         states: {\n//             prompt: {\n//                 entry: say(\"Congratulations on your accomplishment! Here's a reward\"),\n//                 on: { ENDSPEECH: ['#root.dm1.idle', '#root.init.help.goodbye']}\n//         }, \n//             others: {\n//                 entry: say(\"Ummm, you said something strange\"),\n//                 on: { ENDSPEECH: '#root.dm1.positive.quest2'}\n//                 }\n//         }\n//     }   \n// ------\n// idea: {\n//     initial: \"prompt\",\n//     // on: {ENDSPEECH: ['#root.dm1.idle']},\n//         states: {\n//             prompt: {\n//                 entry: send((context) => ({\n//                     type: \"SPEAK\",\n//                     value:`You should work on your idea of ${context.idea}. Say 'finished', when you're done` })),\n//                 on: { ENDSPEECH: ['#root.dm1.idea_wait']}\n//             // },\n//     //         elevator: {\n//     //             entry: send(openInNewTab('https://www.youtube.com/watch?v=VBlFHuCzPgY&t=3s&ab_channel=AntoineB')),\n//     //             on: { ENDSPEECH: '#root.dm1.idea_wait'}\n//                 }\n//     }\n// }\n// ------\n// annoy: {\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: {\n//             target: \"conditional3\",\n//             actions: assign((context) => { return { option: context.recResult } }),\n//         },\n//         WAIT: 'wait'\n//     },\n//     states: {\n//         prompt: {\n//             entry: say(\"Let me know when you're done.\"),\n//             on: { ENDSPEECH: \"ask\" }\n//         },\n//         ask: {\n//             entry: [\n//                 send('LISTEN'),\n//                 send('WAIT', {delay: 10000})\n//             ]\n//         }\n//     }\n// },\n// ...\n// wait: {\n//     entry: [say('Have you done your task yet?')],\n//     on: {\n//         ENDSPEECH: [\n//             {cond: () => (num++, 1) <= 5, target: 'conditional3'},\n//             {target: '#root.dm1.idea_wait'}\n//         ]\n//     }\n// },\n// conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.annoy\", \"#root.dm1.annoy\", '#root.dm1.idle', `Mhm.`)},\n// -----\n// ...\n// full_annoy:{\n//     initial: 'annoy',\n//     on: { \n//         // RECOGNISED: {\n//         //         cond: (context) => help_commands.includes(context.recResult),\n//         //         target: '#root.init.help'\n//         //             },\n//         MAXSPEECH: [\n//             { \n//                 cond: (context) => context.count < 5,\n//                 target: '#root.dm1.idea_wait'},\n//                 {cond: (context) => context.count == null,\n//                 actions: assign((context)=>{return {count: Number(0)}}),\n//                 target: '#root.dm1.maxspeech'}],\n//             },\n//     states:{\n//         hist:{type: 'history'},\n//         // .... // ...\n//         annoy: {\n//             on: {\n//                 RECOGNISED: [{\n//                     cond: (context) => \"finished\" in (gram[context.recResult] || {}),\n//                     actions: assign((context) => { return { finished: gram[context.recResult].finished } }),\n//                     target: \"#root.dm1.done\"}]\n//                 // },\n//                 // { cond: (context) => !(help_commands.includes(context.recResult)),\n//                 //     target: \".nomatch\" }]\n//             },\n//             ...Prompt_Nomatch_Timeout('Have you done your task yet?', \"Sorry I don't understand\"),\n//         }\n// },\n// // ....\n// },\n// // ... \n// maxspeech:{\n//     initial: 'prompt',\n//     on: {\n//         ENDSPEECH: {\n//             actions: assign((context)=> {return {count: context.count+1 }}),\n//             target: 'full_annoy.hist'\n//                 }\n//             },\n//             // target: 'fill_appointment_info.hist'\n//         states: {\n//             prompt: {entry: say('I AM A STUPID BOT ')}\n//     }\n// },\n// ...\n// ..\n//     wait: {\n//         initial: 'prompt',\n//         on: { ENDSPEECH: '#root.dm1.annoy'},\n//         states: {\n//             prompt: {\n//                 entry: say(\"M.\"),\n//                 // on: { ENDSPEECH: \"#root.dm1.annoy\" }\n//             },\n//             // ask: {\n//             //     entry: [\n//             //         send('LISTEN'),\n//             //         send('WAIT', {delay: 10000})\n//             //     ]}\n//             }\n// },\n//     // ...\n//     annoy: {\n//         initial: \"prompt\",\n//         on: {\n//             RECOGNISED: {\n//                 target: \"conditional3\",\n//                 actions: assign((context) => { return { option: context.recResult } }),\n//             },\n//             WAIT: 'wait'\n//         },\n//         states: {\n//             prompt: {\n//                 entry: say(\"Have you finished your task?\"),\n//                 on: { ENDSPEECH: \"ask\" }\n//             },\n//             ask: {\n//                 entry: [\n//                     send('LISTEN'),\n//                     send('WAIT', {delay: 10000})\n//                 ]\n//             }\n//         }\n//     },\n// conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.wait\", \"#root.dm1.annoy\", '#root.dm1.idle', `Oh`)},\n// CONCATENATED MODULE: ./src/dmNegative.ts\n// import { nluRequest } from './index'\n// import { Endings } from './index'\nconst dmNegative_url_grammar={\"rock\":{url:'https://www.youtube.com/watch?v=A0QkGThnKNQ'},\"metal\":{url:'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'},\"punk\":{url:'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'},\"rap\":{url:'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'},\"lo-fi\":{url:'https://www.youtube.com/watch?v=5qap5aO4i9A'},\"house\":{url:'https://www.youtube.com/watch?v=cna6C24AJkU'},\"techno\":{url:'https://www.youtube.com/watch?v=bC9_OKu6nBQ'},\"country\":{url:'https://www.youtube.com/watch?v=kI24NNjz2j8'}// ...\n};const game_grammar={\"shooting\":{game:\"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\"arcade\":{game:\"https://www.miniclip.com/games/genre-517/arcade/en/\"},\"racing\":{game:\"https://www.miniclip.com/games/genre-477/racing/en/\"}};function openInNewTab(user_input){return window.open(user_input,'_blank');}const dmMachine2={initial:'idle',states:{idle:{},negative:{initial:\"music\",states:{music:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_music\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.ask_game\"},{target:\"#root.dm2.negative.music.ask_again\"}// {target: \"#root.dm1.done.others\"}\n// {cond: (context) => context.option === 'help', target: '.help'}\n]},states:{prompt:{entry:say(\"I am sorry to hear that. Would you like to listen to some music?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_music:{initial:'prompt',on:{RECOGNISED:[{cond:context=>dmNegative_url_grammar[context.recResult]!==undefined&&\"url\"in(dmNegative_url_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:Object(actions[\"b\" /* assign */])(context=>{return{url:dmNegative_url_grammar[context.recResult].url};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_music\"},{target:\"#root.dm2.negative.choose_music.ask_again\"}]},states:{prompt:{entry:say(\"Great, let's dance our troubles away! Which genre would you like to listen to?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_music:{initial:'prompt',states:{prompt:{entry:say('Loading music for you! Dance your troubles away. I hope you feel better homie.'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab(context.url))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},ask_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_game\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.entertainment\"},{target:\"#root.dm2.negative.ask_game.ask_again\"}]},states:{prompt:{entry:say(\"Okay then. Let's play a game instead, what do you think?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>game_grammar[context.recResult]!==undefined&&\"game\"in(game_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:Object(actions[\"b\" /* assign */])(context=>{return{game:game_grammar[context.recResult].game};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_game\"},{target:\"#root.dm2.negative.choose_game.ask_again\"}]},states:{prompt:{entry:say(\"Nice! You choose to play an arcade, shooting or racing game!\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_game:{initial:'prompt',states:{prompt:{entry:say('Loading game for you! I hope you feel better my G.'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab(context.game))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},entertainment:{initial:'prompt',on:{ENDSPEECH:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.load_entertainment\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.final_state\"},{target:\"#root.dm2.negative.entertainment.ask_again\"}]},states:{prompt:{entry:say(\"Then would you like some random entertainment?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_entertainment:{initial:'prompt',states:{prompt:{entry:say('Loading entertainment for you! I hope you feel better my G'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab('https://theuselessweb.com'))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},final_state:{initial:'prompt',states:{prompt:{entry:say('Okay! I hope you find another way to feel better!'),on:{ENDSPEECH:'#root.dm2.idle'}}}}}}}};\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(12);\n\n// CONCATENATED MODULE: ./src/index.tsx\n// auto-open this asshole: https://cors-anywhere.herokuapp.com/corsdemo\nconst grammar={\"of course\":{approval:true},\"yes of course\":{approval:true},\"yes\":{approval:true},\"yeah\":{approval:true},\"yup\":{approval:true},\"sure\":{approval:true},// --\n\"no\":{approval:false},\"nah\":{approval:false},\"nope\":{approval:false},\"no way\":{approval:false},\"not sure\":{approval:false},\"of course not\":{approval:false}};window.open(\"https://cors-anywhere.herokuapp.com/corsdemo\");// window.open(\"https://statecharts.io/inspect\")\nObject(browser[\"a\" /* inspect */])({url:\"https://statecharts.io/inspect\",iframe:false});function say(text){return Object(actions[\"k\" /* send */])(_context=>({type:\"SPEAK\",value:text}));}function src_listen(){return Object(actions[\"k\" /* send */])('LISTEN');}function promptAndAsk(prompt){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')}}};}function promptHelpBye(prompt,idled){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},help:{entry:say(\"We may be miscommunicating.\"),on:{ENDSPEECH:[idled,\"#root.init.help\"]}},goodbye:{entry:say(\"Happy to help out. Goodbye.\"),on:{ENDSPEECH:[idled,\"#root.init.idle\"]}}}};}function Endings(saythis,on_end){return{initial:\"prompt\",states:{prompt:{entry:Object(actions[\"k\" /* send */])({type:\"SPEAK\",value:saythis}),on:{ENDSPEECH:on_end}}}};}function Queries(ondone,onerror){return{invoke:{id:'rasa',src:(context,event)=>nluRequest(context.option),onDone:{actions:[Object(actions[\"b\" /* assign */])((context,event)=>{return{option:event.data.intent.name};}),(context,event)=>console.log(event.data)],target:ondone},onError:{target:onerror,actions:(context,event)=>console.log(event.data)}}};}function Conditional(cond1,target1,cond2,target2,elses,idles,saythis){return{initial:\"prompt\",on:{ENDSPEECH:[{cond:context=>context.option===cond1,target:target1},{cond:context=>context.option===cond2,target:target2},{cond:context=>context.option==='help',target:[idles,\"#root.init.help\"]},{target:elses}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])({type:\"SPEAK\",value:saythis})}}};}const saySnippet=Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"\".concat(context.snippet)}));const machine=Object(Machine[\"a\" /* Machine */])({id:'root',type:'parallel',states:{// ____________\ninit:{initial:'idle',states:{// ...\nidle:{on:{CLICK:'welcome'}},// ...\nwelcome:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:\"query\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"Good morning. How are you?\")),query:Object(objectSpread2[\"a\" /* default */])({},Queries(\"distributor\",'welcome')),// query: {\n//     invoke: {\n//         id: 'rasa',\n//         src: (context, event) => nluRequest(context.option),\n//         onDone: {\n//             actions: [assign((context, event) => { return  {option: event.data.intent.name} }), \n//             (context: SDSContext, event: any) => console.log(event.data)],\n//             target: \"distributor\"\n//         },\n//         onError: {\n//             target: 'welcome',\n//             actions: (context, event) => console.log(event.data)}\n//     }\n// },\n// ...\ndistributor:{initial:\"prompt\",on:{ENDSPEECH:[{cond:context=>context.option==='positive',target:[\"#root.dm1.positive\",\"idle\"]},{cond:context=>context.option==='negative',target:[\"#root.dm2.negative\",\"idle\"]},{cond:context=>context.option==='todo',target:[\"#root.dm1.create_do\",\"idle\"]},{cond:context=>context.option==='ideas',target:[\"#root.dm1.create_ideas\",\"idle\"]},{cond:context=>context.option==='answer',target:\"answer\"},{cond:context=>context.option==='bob',target:\"bob\"},{cond:context=>context.option==='neutral',target:\"neutral\"},{cond:context=>context.option==='music',target:[\"#root.dm2.negative.choose_music\",\"idle\"]},{cond:context=>context.option==='games',target:[\"#root.dm2.negative.choose_game\",\"idle\"]},{cond:context=>context.option==='entertain',target:[\"#root.dm2.negative.load_entertainment\",\"idle\"]},{cond:context=>context.option==='help',target:\"help\"},{target:\".nomatch\"}]},states:{prompt:{entry:say('Ok.')// send((context) => ({type: \"SPEAK\", value: `Ok.`})),\n},nomatch:{entry:say(\"This function has not been developed\"),on:{ENDSPEECH:\"#root.init.help\"}}}},// ...\nanswer:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:\"query\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"I am good, thank you. Tell me what you'd like to do.\")),// ...\nbob:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:\"query\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")),// ...\nneutral:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{// NOTE: \n// We are aware that this is not efficient.\n// We tried this part to see how the machines interact between themselves. \n// For educational purposes only.\ntarget:\"q\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"I am good, thank you.\")),// ...\nhelp:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,target:\"bob\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,target:\".goodbye\"}]}},promptHelpBye(\"I feel lost. Let's start over?\",\"#root.init\")),//     // ...\ngoodbye:Object(objectSpread2[\"a\" /* default */])({},Endings(\"Happy to help out. See you later.\",\"#root.init\"))}},// ____________\ndm1:Object(objectSpread2[\"a\" /* default */])({},dmMachine1),// ____________\ndm2:Object(objectSpread2[\"a\" /* default */])({},dmMachine2),// ____________\nasrtts:{initial:'idle',states:{// ...\nidle:{on:{LISTEN:'recognising',SPEAK:{target:'speaking',actions:Object(actions[\"b\" /* assign */])((_context,event)=>{return{ttsAgenda:event.value};})}}},// ...\nrecognising:{initial:'progress',entry:'recStart',exit:'recStop',on:{ASRRESULT:{actions:['recLogResult',Object(actions[\"b\" /* assign */])((_context,event)=>{return{recResult:event.value};})],target:'.match'},RECOGNISED:'idle'},states:{progress:{},match:{entry:Object(actions[\"k\" /* send */])('RECOGNISED')}}},// ...\nspeaking:{entry:'ttsStart',on:{ENDSPEECH:'idle'}}}}}},{actions:{recLogResult:context=>{/* context.recResult = event.recResult; */console.log('<< ASR: '+context.recResult);},test:()=>{console.log('test');},logIntent:context=>{/* context.nluData = event.data */console.log('<< NLU intent: '+context.nluData.intent.name);}}});const ReactiveButton=props=>{switch(true){case props.state.matches({asrtts:'recognising'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},props),{},{children:\"...\"}));case props.state.matches({asrtts:'speaking'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},props));default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\"},props),{},{children:\"Click on me\"}));}};function App(){const _useSpeechSynthesis=Object(dist[\"useSpeechSynthesis\"])({onEnd:()=>{send('ENDSPEECH');}}),speak=_useSpeechSynthesis.speak,cancel=_useSpeechSynthesis.cancel,speaking=_useSpeechSynthesis.speaking;const _useSpeechRecognition=Object(dist[\"useSpeechRecognition\"])({onResult:result=>{send({type:\"ASRRESULT\",value:result});}}),listen=_useSpeechRecognition.listen,listening=_useSpeechRecognition.listening,stop=_useSpeechRecognition.stop;const _useMachine=Object(useMachine[\"b\" /* useMachine */])(machine,{devTools:true,actions:{recStart:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Ready to receive a command.');listen({interimResults:false,continuous:true});}),recStop:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Recognition stopped.');stop();}),changeColour:Object(useMachine[\"a\" /* asEffect */])(context=>{console.log('Repainting...');document.body.style.background=context.recResult;}),ttsStart:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('Speaking...');speak({text:context.ttsAgenda});}),ttsCancel:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('TTS STOP...');cancel();})}}),_useMachine2=Object(slicedToArray[\"a\" /* default */])(_useMachine,3),current=_useMachine2[0],send=_useMachine2[1],service=_useMachine2[2];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ReactiveButton,{state:current,onClick:()=>send('CLICK')})});};/* RASA API\n *  */const proxyurl=\"https://cors-anywhere.herokuapp.com/\";const rasaurl='https://mood-admin.herokuapp.com/model/parse';const nluRequest=text=>fetch(new Request(proxyurl+rasaurl,{method:'POST',headers:{'Origin':'http://localhost:3000/'},body:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const rootElement=document.getElementById(\"root\");react_dom[\"render\"](/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App,{}),rootElement);\n\n/***/ })\n\n},[[35,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-6-0!/Users/evelsve/repos/mood-admin/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-6-1!/Users/evelsve/repos/mood-admin/node_modules/postcss-loader/src/index.js??postcss!/Users/evelsve/repos/mood-admin/node_modules/resolve-url-loader/index.js??ref--5-oneOf-6-3!/Users/evelsve/repos/mood-admin/node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-6-4!/Users/evelsve/repos/mood-admin/src/styles.scss","/Users/evelsve/repos/mood-admin/src/dmPositive.ts","/Users/evelsve/repos/mood-admin/src/dmNegative.ts","/Users/evelsve/repos/mood-admin/src/index.tsx"],"names":["url_grammar","url","help_commands","Prompt_Nomatch_Timeout","prompt","no_match","timeout","initial","states","entry","say","on","ENDSPEECH","ask","send","delay","id","nomatch","gram","finished","num","dmMachine1","idle","positive","quest1","RECOGNISED","cond","context","grammar","recResult","undefined","approval","target","promptAndAsk","quest2","actions","assign","option","query1","Queries","conditional1","Conditional","query3","create_do","task","to_do","type","value","if_ideas","query2","conditional2","create_ideas","idea","wait","done","others","game_grammar","game","openInNewTab","user_input","window","open","dmMachine2","negative","music","ask_again","choose_music","load_music","play","ask_game","choose_game","load_game","entertainment","load_entertainment","final_state","inspect","iframe","text","_context","listen","promptHelpBye","idled","help","goodbye","Endings","saythis","on_end","ondone","onerror","invoke","src","event","nluRequest","onDone","data","intent","name","console","log","onError","cond1","target1","cond2","target2","elses","idles","saySnippet","snippet","machine","Machine","init","CLICK","welcome","query","distributor","answer","bob","neutral","dm1","dm2","asrtts","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","animation","App","useSpeechSynthesis","onEnd","speak","cancel","useSpeechRecognition","onResult","result","listening","stop","useMachine","devTools","recStart","asEffect","interimResults","continuous","recStop","changeColour","document","body","style","background","ttsStart","effect","ttsCancel","current","service","proxyurl","rasaurl","fetch","Request","method","headers","then","json","rootElement","getElementById","ReactDOM"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACI;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,8I;;ACpcZ;AACA;AAEO,KAAMZ,uBAAiD,CACrD,CAAG,OAAQ,CAAEC,GAAG,CAAE,6CAAP,CAAX,CACG,QAAS,CAAEA,GAAG,CAAE,qFAAP,CADZ,CAEG,OAAQ,CAAEA,GAAG,CAAE,qFAAP,CAFX,CAGG,MAAO,CAAEA,GAAG,CAAE,qFAAP,CAHV,CAIG,QAAS,CAAEA,GAAG,CAAE,6CAAP,CAJZ,CAKG,QAAS,CAAEA,GAAG,CAAE,6CAAP,CALZ,CAMG,SAAU,CAAEA,GAAG,CAAE,6CAAP,CANb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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { MachineConfig, send, assign } from \"xstate\";\nimport { Queries, Conditional, promptAndAsk, Endings, promptHelpBye, say, grammar } from \"./index\";\n\n\n\nexport const url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n            \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n            \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n            \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n            \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n            \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n            \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n            \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' }\n            // ...          \n}\n\nconst help_commands = [\"help\", \"I don't know\", \"help me\", \"I need help\", \"what does this mean\", \"wait what\", \"what do you mean\"]\n\nexport function Prompt_Nomatch_Timeout(prompt: string, no_match:string, timeout=5000): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n\tinitial: 'prompt',\n\tstates: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: 'ask' }\n            },\n            ask: {\n                entry: [send('LISTEN'), send('MAXSPEECH', {delay: timeout , id: 'timeout'})]\n            },\n            nomatch: {\n                entry: say(no_match),\n                on: { ENDSPEECH: \"prompt\" }\n            }}})\n}\n\nexport const gram: { [index: string]: {finished?:  boolean } } = \n         {  \"finished\": { finished: true },\n            \"done\": { finished: true },\n            \"I've done the task\": { finished: true }\n            // ...          \n}\n\nlet num = 0\n\nexport const dmMachine1: MachineConfig<SDSContext, any, SDSEvent> = ({\n    // NOTE: regarding the queries:\n    // There are more efficient ways to implement them, however, \n    // Yet we decided to have a grammar as well as querying in order to see\n    // which implementation will yield better results\n    initial: 'idle',\n    states: {\n        // ...\n        idle: {},\n        // ...\n        positive: {\n            initial: \"quest1\",\n            states: {\n                // .... // ...\n                quest1: {\n                    on: {\n                        RECOGNISED: \n                            [\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            target: \"#root.dm1.create_do\"},\n\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            target: \"#root.dm1.if_ideas\"},\n\n                            {target:'#root.dm1.others'}\n                            ]\n                        },\n                    ...promptAndAsk(\"I suppose you could do something productive. Do you agree?\")\n                },\n                // .... // ...\n                quest2: {\n                    on: {\n                        RECOGNISED: {\n                            target: '#root.dm1.query3',\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                        ...promptAndAsk(\"So what would you like to do?\")\n                    }\n                }\n            },\n            // ....\n            query1: {...Queries('conditional1',\"#root.init.help\")},\n            // ....\n            conditional1: {...Conditional('agree', \"create_do\", 'disagree', \"#root.dm1.if_ideas\", \"#root.dm1.others\", '#root.dm2.idle', `Ok.`)},\n            // ....\n            query3: {...Queries(\"#root.init.distributor\", \"#root.init.help\")},\n            //...\n            create_do:{\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: {\n                        actions: assign((context) => { return { task: context.recResult } }),\n                        target: \"to_do\"}\n                    },\n                    ...promptAndAsk(\"Tell me the things you have to accomplish.\")\n            },\n            // ...\n            to_do: {\n                initial: \"prompt\",\n                states: {\n                    prompt: {\n                        entry: send((context) => ({delay:12000,\n                            type: \"SPEAK\",\n                            value:`Now go and complete the following tasks: ${context.task}` })),\n                            on: { ENDSPEECH: '#root.dm1.wait'},  \n                        }\n                    }\n            },\n            // ...\n            if_ideas: {\n                on: {\n                    RECOGNISED: {\n                        target: '#root.dm1.query2',\n                        actions: assign((context) => { return { option: context.recResult } }),\n                    }},\n                ...promptAndAsk(\"Then how about working on your ideas?\")\n            },\n            // ....\n            query2: {...Queries('conditional2',\"#root.init.help\")},\n            // ....\n            conditional2: {...Conditional('agree', \"create_ideas\", 'disagree', \"#root.dm1.positive.quest2\", \"#root.dm1.others\", '#root.dm2.idle', `Cool.`)},\n            // ...\n            create_ideas:{\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: {\n                        target: \"idea\",\n                        actions: assign((context) => { return { idea: context.recResult } }),\n                    }},\n                    ...promptAndAsk(\"Tell me your idea.\")\n                },\n            // ...\n            idea: {\n                initial: \"prompt\",\n                // on: {ENDSPEECH: ['#root.dm1.idle']},\n                    states: {\n                        prompt: {\n                            entry: send((context) => ({\n                                type: \"SPEAK\",\n                                value:`You should work on your idea of ${context.idea}.` })),\n                            on: { ENDSPEECH: '#root.dm1.wait'}\n                            }\n                }\n            },\n            // ...\n            wait: {\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: [\n                        {cond: (context) => gram[context.recResult] !== undefined && gram[context.recResult].finished === true,\n                        target: \"done\"},\n\n                        {cond: (context) => gram[context.recResult] !== undefined && gram[context.recResult].finished === false,\n                        target: \"wait\"},\n                        {target: 'wait'}]  \n                },\n            ...promptAndAsk(\"Say 'finished', when you're done\")\n            },\n            // ...\n            done: {\n                initial: \"prompt\",\n                    states: {\n                        prompt: {\n                            entry: say(\"Good job.\"),\n                            on: { ENDSPEECH: {target: '#root.init.goodbye'}},\n                        }\n                    }\n            },\n            // ...\n            others: {\n                initial: \"prompt\",\n                // on: {ENDSPEECH: '#root.goodbbye'},\n                    states: {\n                        prompt: {\n                            entry: say(\"mmm, you said something strange\"),\n                            on: { ENDSPEECH: '#root.dm1.positive.quest2'},\n                        }\n                    }\n            }\n    }}\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ONLY DRAFTS\n\n\n\n\n// done: {...Endings(\"Congratulations on your accomplishment!\",\"#root.init\")},\n\n          // annoy:{\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: [\n            //             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n            //             target: \"done\"},\n\n            //             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n            //             target: \".wait\"}],\n                    \n            //         // WAIT: '.wait'\n\n            //         }\n            //     },\n\n             // ...\n            // annoy: {\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: [\n            //             {cond: (context) => context.option === 'agrreement', target: \"done\"},\n\n            //             {cond: (context) => context.option === 'disagreement', target: \".wait\"},\n                        \n            //             {target: \".wait\"}], \n\n            //         WAIT: '.prompt'\n            //     },\n            //     states: {\n            //         prompt: {\n            //             entry: say(\"Have you done your task yet?\"),\n            //             on: { ENDSPEECH: \"ask\" }\n            //         },\n            //         ask: {\n            //             entry: [ send('LISTEN'), send('WAIT', {delay: 5000})]\n            //         },\n            //         // wait2: {entry: [ send('WAIT', {delay: 3000})]},\n            //         wait: {\n            //             entry: [\n            //                 say('Hm.')\n            //             ],\n            //             on: {\n            //                 ENDSPEECH: [\n            //                     {cond: () => (num++) <= 2, target: 'prompt'},\n            //                     {target: '#root.dm1.done'}\n            //                 ]\n            //             }\n            //         }\n            //     }\n            // },\n\n\n            // ----\n\n            // quest1: {\n                //     on: {\n                //         RECOGNISED: [\n                //                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                //                 actions: assign((context) => { return { approval: true } }),\n                //                 target: \"#root.dm1.create_do\"},\n            \n                //                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                //                 actions: assign((context) => { return { approval: false} }),\n                //                 target: \"#root.dm1.if_ideas\"},\n\n                //                 {target: \"#root.dm1.done.others\"}\n\n                //                 // {cond: (context) => context.option === 'help', target: '.help'}\n                //                 ]\n                //         },\n                //         ...promptHelpBye(\"I suppose you could do something productive. Do you agree?\")\n                //         },\\\n\n\n\n                // ------\n\n                // done: {\n                //     initial: \"prompt\",\n                //     // on: {ENDSPEECH: ['#root.dm1.idle']},\n                //         states: {\n                //             prompt: {\n                //                 entry: say(\"Congratulations on your accomplishment! Here's a reward\"),\n                //                 on: { ENDSPEECH: ['#root.dm1.idle', '#root.init.help.goodbye']}\n                //         }, \n                //             others: {\n                //                 entry: say(\"Ummm, you said something strange\"),\n                //                 on: { ENDSPEECH: '#root.dm1.positive.quest2'}\n                //                 }\n                //         }\n                //     }   \n\n\n                // ------\n\n\n                // idea: {\n                //     initial: \"prompt\",\n                //     // on: {ENDSPEECH: ['#root.dm1.idle']},\n                //         states: {\n                //             prompt: {\n                //                 entry: send((context) => ({\n                //                     type: \"SPEAK\",\n                //                     value:`You should work on your idea of ${context.idea}. Say 'finished', when you're done` })),\n                //                 on: { ENDSPEECH: ['#root.dm1.idea_wait']}\n                //             // },\n                //     //         elevator: {\n                //     //             entry: send(openInNewTab('https://www.youtube.com/watch?v=VBlFHuCzPgY&t=3s&ab_channel=AntoineB')),\n                //     //             on: { ENDSPEECH: '#root.dm1.idea_wait'}\n                //                 }\n                //     }\n                // }\n\n                // ------\n\n            // annoy: {\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: {\n            //             target: \"conditional3\",\n            //             actions: assign((context) => { return { option: context.recResult } }),\n            //         },\n            //         WAIT: 'wait'\n            //     },\n            //     states: {\n            //         prompt: {\n            //             entry: say(\"Let me know when you're done.\"),\n            //             on: { ENDSPEECH: \"ask\" }\n            //         },\n            //         ask: {\n            //             entry: [\n            //                 send('LISTEN'),\n            //                 send('WAIT', {delay: 10000})\n            //             ]\n            //         }\n            //     }\n            // },\n            // ...\n            // wait: {\n                \n            //     entry: [say('Have you done your task yet?')],\n            //     on: {\n            //         ENDSPEECH: [\n            //             {cond: () => (num++, 1) <= 5, target: 'conditional3'},\n            //             {target: '#root.dm1.idea_wait'}\n            //         ]\n            //     }\n            // },\n            // conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.annoy\", \"#root.dm1.annoy\", '#root.dm1.idle', `Mhm.`)},\n\n\n            // -----\n\n                // ...\n                // full_annoy:{\n                //     initial: 'annoy',\n                //     on: { \n                //         // RECOGNISED: {\n                //         //         cond: (context) => help_commands.includes(context.recResult),\n                //         //         target: '#root.init.help'\n                //         //             },\n    \n                //         MAXSPEECH: [\n                //             { \n                //                 cond: (context) => context.count < 5,\n                //                 target: '#root.dm1.idea_wait'},\n    \n                //                 {cond: (context) => context.count == null,\n                //                 actions: assign((context)=>{return {count: Number(0)}}),\n                //                 target: '#root.dm1.maxspeech'}],\n                //             },\n                //     states:{\n                //         hist:{type: 'history'},\n                //         // .... // ...\n                //         annoy: {\n                //             on: {\n                //                 RECOGNISED: [{\n                //                     cond: (context) => \"finished\" in (gram[context.recResult] || {}),\n                //                     actions: assign((context) => { return { finished: gram[context.recResult].finished } }),\n                //                     target: \"#root.dm1.done\"}]\n        \n                //                 // },\n                //                 // { cond: (context) => !(help_commands.includes(context.recResult)),\n                //                 //     target: \".nomatch\" }]\n                //             },\n                //             ...Prompt_Nomatch_Timeout('Have you done your task yet?', \"Sorry I don't understand\"),\n                //         }\n                // },\n                // // ....\n                // },\n                // // ... \n                // maxspeech:{\n                //     initial: 'prompt',\n                //     on: {\n                //         ENDSPEECH: {\n                //             actions: assign((context)=> {return {count: context.count+1 }}),\n                //             target: 'full_annoy.hist'\n                //                 }\n                //             },\n                //             // target: 'fill_appointment_info.hist'\n                //         states: {\n                //             prompt: {entry: say('I AM A STUPID BOT ')}\n                //     }\n                // },\n\n                // ...\n\n                            // ..\n        //     wait: {\n        //         initial: 'prompt',\n        //         on: { ENDSPEECH: '#root.dm1.annoy'},\n        //         states: {\n        //             prompt: {\n        //                 entry: say(\"M.\"),\n        //                 // on: { ENDSPEECH: \"#root.dm1.annoy\" }\n        //             },\n        //             // ask: {\n        //             //     entry: [\n        //             //         send('LISTEN'),\n        //             //         send('WAIT', {delay: 10000})\n        //             //     ]}\n        //             }\n        // },\n        //     // ...\n        //     annoy: {\n        //         initial: \"prompt\",\n        //         on: {\n        //             RECOGNISED: {\n        //                 target: \"conditional3\",\n        //                 actions: assign((context) => { return { option: context.recResult } }),\n        //             },\n        //             WAIT: 'wait'\n        //         },\n        //         states: {\n        //             prompt: {\n        //                 entry: say(\"Have you finished your task?\"),\n        //                 on: { ENDSPEECH: \"ask\" }\n        //             },\n        //             ask: {\n        //                 entry: [\n        //                     send('LISTEN'),\n        //                     send('WAIT', {delay: 10000})\n        //                 ]\n        //             }\n        //         }\n        //     },\n            // conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.wait\", \"#root.dm1.annoy\", '#root.dm1.idle', `Oh`)},","import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk, grammar } from \"./index\";\n\n// import { nluRequest } from './index'\n// import { Endings } from './index'\n\nexport const url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n            \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n            \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n            \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n            \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n            \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n            \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n            \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' }\n            // ...\n            \n}\n\nconst game_grammar: { [index: string]: {game: string} } =\n\n{\n    \"shooting\": {game: \"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\n    \"arcade\": {game: \"https://www.miniclip.com/games/genre-517/arcade/en/\"},\n    \"racing\": {game: \"https://www.miniclip.com/games/genre-477/racing/en/\"},\n}\n\nexport function openInNewTab(user_input: string): any{ \n  return (window.open(user_input, '_blank'))\n}\n\nexport const dmMachine2: MachineConfig<SDSContext, any, SDSEvent> = ({\n    initial: 'idle',\n    states: {\n\n        idle: {},\n        negative: {\n            initial: \"music\",\n            states: {\n\n                music: {\n                    initial: \"prompt\",\n                    on: {\n                        RECOGNISED: [\n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                                actions: assign((context) => { return { approval: true } }),\n                                target: \"#root.dm2.negative.choose_music\"},\n            \n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                                actions: assign((context) => { return { approval: false} }),\n                                target: \"#root.dm2.negative.ask_game\"},\n                                {target: \"#root.dm2.negative.music.ask_again\"}\n\n                                // {target: \"#root.dm1.done.others\"}\n\n                                // {cond: (context) => context.option === 'help', target: '.help'}\n                                ]\n                        },\n                        states: {\n                            prompt: {\n                                entry: say(\"I am sorry to hear that. Would you like to listen to some music?\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                            }\n                        }\n                        },\n\n                choose_music: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { url: url_grammar[context.recResult].url } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_music\"},\n                            {target: \"#root.dm2.negative.choose_music.ask_again\"}\n                        ]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"Great, let's dance our troubles away! Which genre would you like to listen to?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n                load_music: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading music for you! Dance your troubles away. I hope you feel better homie.'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.url)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                ask_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.choose_game\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.entertainment\"},\n                            {target: \"#root.dm2.negative.ask_game.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Okay then. Let's play a game instead, what do you think?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n\n                choose_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => game_grammar[context.recResult] !== undefined && \"game\" in (game_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { game: game_grammar[context.recResult].game } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_game\"},\n                            {target: \"#root.dm2.negative.choose_game.ask_again\"}]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"Nice! You choose to play an arcade, shooting or racing game!\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n\n                load_game: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading game for you! I hope you feel better my G.'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.game)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                entertainment: {\n                    initial: 'prompt',\n                    on: {\n                        ENDSPEECH: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.load_entertainment\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.final_state\"},\n                            {target: \"#root.dm2.negative.entertainment.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Then would you like some random entertainment?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n                load_entertainment: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading entertainment for you! I hope you feel better my G'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab('https://theuselessweb.com')\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n                final_state: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Okay! I hope you find another way to feel better!'),\n                            on: { ENDSPEECH: '#root.dm2.idle'}\n                        },\n                }\n            } \n        } \n    } }\n} )","import \"./styles.scss\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { MachineConfig, Machine, send, Action, assign, State } from \"xstate\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\nimport { inspect } from \"@xstate/inspect\";\n\n// auto-open this asshole: https://cors-anywhere.herokuapp.com/corsdemo\n\nimport { dmMachine1 } from \"./dmPositive\";\nimport { dmMachine2 } from \"./dmNegative\";\n\nexport const grammar: { [index: string]: {approval?:  boolean } } = \n        {  \"of course\": { approval: true },\n        \"yes of course\": { approval: true },\n        \"yes\": { approval: true },\n        \"yeah\": { approval: true },\n        \"yup\": { approval: true },\n        \"sure\": { approval: true },\n        // --\n        \"no\": { approval: false },\n        \"nah\": { approval: false },\n        \"nope\": { approval: false },\n        \"no way\": { approval: false },\n        \"not sure\": { approval: false },\n        \"of course not\": { approval: false}\n\n        }\n\n\nwindow.open(\"https://cors-anywhere.herokuapp.com/corsdemo\")\n// window.open(\"https://statecharts.io/inspect\")\n\ninspect({\n    url: \"https://statecharts.io/inspect\",\n    iframe: false\n});\n\n\nexport function say(text: string): Action<SDSContext, SDSEvent> {\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\n}\n\nexport function listen(): Action<SDSContext, SDSEvent> {\n    return send('LISTEN')\n}\n\nexport function promptAndAsk(prompt: string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: 'prompt',\n        states: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: 'ask' }\n            },\n            ask: {entry: send('LISTEN')}\n        }\n    })\n}\n\nexport function promptHelpBye(prompt: string, idled: string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: 'prompt',\n        states: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: 'ask' }\n            },\n            ask: {entry: send('LISTEN')\n            },\n            help: {\n                entry: say(\"We may be miscommunicating.\"),\n                on: { ENDSPEECH: [idled,\"#root.init.help\"] }\n            },\n            goodbye:{\n                entry: say(\"Happy to help out. Goodbye.\"),\n                on: { ENDSPEECH: [idled,\"#root.init.idle\" ] }\n            }\n    }}\n)}\n\n\nexport function Endings(saythis: string, on_end:string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({        \n        initial: \"prompt\",\n        states: {\n            prompt: {\n                entry: send(({type: \"SPEAK\",\n                    value: saythis})),\n                 on: { ENDSPEECH: on_end }\n            }\n        }    \n    }\n)}\n\nexport function Queries(ondone: string, onerror:string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n            invoke: {\n                id: 'rasa',\n                src: (context, event) => nluRequest(context.option),\n                onDone: {\n                    actions: [assign((context, event) => { return  {option: event.data.intent.name} }), \n                    (context: SDSContext, event: any) => console.log(event.data)],\n                    target: ondone\n                },\n                onError: {\n                    target: onerror,\n                    actions: (context, event) => console.log(event.data)}\n                }\n            }\n)}\n\nexport function Conditional(cond1: string, target1: string, cond2: string, target2: string, elses: string, idles: string, saythis: string,): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: \"prompt\",\n                on: {\n                    ENDSPEECH: [\n                            {cond: (context) => context.option === cond1, target: target1},\n                            {cond: (context) => context.option === cond2, target: target2},\n                            {cond: (context) => context.option === 'help', target: [idles,\"#root.init.help\"]},\n                            { target: elses }] \n                        \n                    },\n                states: {\n                    prompt: {\n                        entry: send(({type: \"SPEAK\", value: saythis})),\n                    }\n                }\n            }\n)}\n\n\nconst saySnippet: Action<SDSContext, SDSEvent> = send((context: SDSContext) => ({\n    type: \"SPEAK\", value: `${context.snippet}`\n}))\n\n\nconst machine = Machine<SDSContext, any, SDSEvent>({\n    id: 'root',\n    type: 'parallel',\n    states: {\n        // ____________\n        init: {\n            initial: 'idle',\n            states: {\n                // ...\n                idle: {on: {CLICK: 'welcome'}},\n                // ...\n                welcome: {\n                    on: {\n                        RECOGNISED: {\n                            target: \"query\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"Good morning. How are you?\")\n                },\n                query: {...Queries(\"distributor\",'welcome')},\n                // query: {\n                //     invoke: {\n                //         id: 'rasa',\n                //         src: (context, event) => nluRequest(context.option),\n                //         onDone: {\n                //             actions: [assign((context, event) => { return  {option: event.data.intent.name} }), \n                //             (context: SDSContext, event: any) => console.log(event.data)],\n                //             target: \"distributor\"\n                //         },\n                //         onError: {\n                //             target: 'welcome',\n                //             actions: (context, event) => console.log(event.data)}\n                //     }\n                // },\n                // ...\n                distributor: {\n                    initial: \"prompt\",\n                    on: {\n                        ENDSPEECH: [\n                            {cond: (context) => context.option === 'positive', target: [\"#root.dm1.positive\", \"idle\"]},\n                            {cond: (context) => context.option === 'negative', target: [\"#root.dm2.negative\", \"idle\"]},\n                            {cond: (context) => context.option === 'todo', target: [\"#root.dm1.create_do\", \"idle\"]},\n                            {cond: (context) => context.option === 'ideas', target: [\"#root.dm1.create_ideas\", \"idle\"]},\n                            {cond: (context) => context.option === 'answer', target: \"answer\"},\n                            {cond: (context) => context.option === 'bob', target: \"bob\"},\n                            {cond: (context) => context.option === 'neutral', target: \"neutral\"},\n                            {cond: (context) => context.option === 'music', target: [\"#root.dm2.negative.choose_music\", \"idle\"]},\n                            {cond: (context) => context.option === 'games', target: [\"#root.dm2.negative.choose_game\", \"idle\"]},\n                            {cond: (context) => context.option === 'entertain', target: [\"#root.dm2.negative.load_entertainment\", \"idle\"]},\n\n                            {cond: (context) => context.option === 'help', target: \"help\"},\n\n                            {target: \".nomatch\"} ]\n                        },\n                    states: {\n                        prompt: {\n                            entry: say('Ok.')\n                            // send((context) => ({type: \"SPEAK\", value: `Ok.`})),\n                        },\n                        nomatch:{\n                            entry: say(\"This function has not been developed\"),\n                            on: {ENDSPEECH: \"#root.init.help\"}\n                        }\n                    }\n                },\n                // ...\n                answer: {\n                    on: {\n                        RECOGNISED: {\n                            target: \"query\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"I am good, thank you. Tell me what you'd like to do.\")\n                },\n                // ...\n                bob: {\n                    on: {\n                        RECOGNISED: {\n                            target: \"query\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")\n                },\n                // ...\n                neutral: {\n                    on: {\n                        RECOGNISED: {\n                            // NOTE: \n                            // We are aware that this is not efficient.\n                            // We tried this part to see how the machines interact between themselves. \n                            // For educational purposes only.\n                            target: \"q\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"I am good, thank you.\")\n                },\n                // ...\n                help: {\n                    on: {\n                        RECOGNISED: [\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            target: \"bob\"},\n\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            target: \".goodbye\"},]  \n                    },\n                ...promptHelpBye(\"I feel lost. Let's start over?\", \"#root.init\")\n                },\n            //     // ...\n                goodbye: {...Endings(\"Happy to help out. See you later.\",\"#root.init\")}\n            },\n        },            \n        // ____________\n        dm1: {\n        ...dmMachine1\n        },\n        // ____________\n        dm2: {\n        ...dmMachine2\n        },\n        // ____________\n        asrtts: {\n            initial: 'idle',\n            states: {\n                // ...\n                idle: {\n                    on: {\n                        LISTEN: 'recognising',\n                        SPEAK: {\n                            target: 'speaking',\n                            actions: assign((_context, event) => { return { ttsAgenda: event.value } })\n                        }\n                    }\n                },\n                // ...\n                recognising: {\n\t\t            initial: 'progress',\n                    entry: 'recStart',\n                    exit: 'recStop',\n                    on: {\n                        ASRRESULT: {\n                            actions: ['recLogResult',\n                                assign((_context, event) => { return { recResult: event.value } })],\n                            target: '.match'\n                        },\n                        RECOGNISED: 'idle'\n                    },\n                    states: {\n\t\t    \t        progress: {\n\t\t\t            },\t    \t\t\t\t\t\n                        match: {\n                            entry: send('RECOGNISED'),\n                        },\n                    }\n                },\n                // ...\n                speaking: {\n                    entry: 'ttsStart',\n                    on: {\n                        ENDSPEECH: 'idle',\n                    }\n                }\n            }    \n        }\n    }\n},\n    {\n        actions: {\n            recLogResult: (context: SDSContext) => {\n                /* context.recResult = event.recResult; */\n                console.log('<< ASR: ' + context.recResult);\n            },\n            test: () => {\n                console.log('test')\n            },\n            logIntent: (context: SDSContext) => {\n                /* context.nluData = event.data */\n                console.log('<< NLU intent: ' + context.nluData.intent.name)\n            }\n        }\n});\n\n\n\n\ninterface Props extends React.HTMLAttributes<HTMLElement> {\n    state: State<SDSContext, any, any, any>;\n}\nconst ReactiveButton = (props: Props): JSX.Element => {\n    switch (true) {\n        case props.state.matches({ asrtts: 'recognising' }):\n            return (\n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"glowing 20s linear\" }} {...props}>\n                    ...\n                </button>\n            );\n        case props.state.matches({ asrtts: 'speaking' }):\n            return (\n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"bordering 1s infinite\" }} {...props}>\n                    \n                </button>\n            );\n        default:\n            return (\n                <button type=\"button\" className=\"glow-on-hover\" {...props}>\n                    Click on me\n                </button >\n            );\n    }\n}\n\nfunction App() {\n    const { speak, cancel, speaking } = useSpeechSynthesis({\n        onEnd: () => {\n            send('ENDSPEECH');\n        },\n    });\n    const { listen, listening, stop } = useSpeechRecognition({\n        onResult: (result: any) => {\n            send({ type: \"ASRRESULT\", value: result });\n        },\n    });\n    const [current, send, service] = useMachine(machine, {\n        devTools: true,\n        actions: {\n            recStart: asEffect(() => {\n                console.log('Ready to receive a command.');\n                listen({\n                    interimResults: false,\n                    continuous: true\n                });\n            }),\n            recStop: asEffect(() => {\n                console.log('Recognition stopped.');\n                stop()\n            }),\n            changeColour: asEffect((context) => {\n                console.log('Repainting...');\n                document.body.style.background = context.recResult;\n            }),\n            ttsStart: asEffect((context, effect) => {\n                console.log('Speaking...');\n                speak({ text: context.ttsAgenda })\n            }),\n            ttsCancel: asEffect((context, effect) => {\n                console.log('TTS STOP...');\n                cancel()\n            }),\n        },\n    });\n\n\n    return (\n        <div className=\"App\">\n            <ReactiveButton state={current} onClick={() => send('CLICK')} />\n        </div>\n    )\n};\n\n\n/* RASA API\n *  */\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\nconst rasaurl = 'https://mood-admin.herokuapp.com/model/parse'\nexport const nluRequest = (text: string) =>\n    fetch(new Request(proxyurl + rasaurl, {\n        method: 'POST',\n        headers: { 'Origin': 'http://localhost:3000/' },\n        body: `{\"text\": \"${text}\"}`\n    }))\n        .then(data => data.json());\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n    <App />,\n    rootElement);\n\n\n"]}}