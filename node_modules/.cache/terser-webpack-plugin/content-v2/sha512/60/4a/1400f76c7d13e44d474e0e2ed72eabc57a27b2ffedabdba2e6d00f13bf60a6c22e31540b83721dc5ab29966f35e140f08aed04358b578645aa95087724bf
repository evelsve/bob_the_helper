{"code":"(this[\"webpackJsonpmood-admin\"]=this[\"webpackJsonpmood-admin\"]||[]).push([[0],{24:function(t,e,o){},35:function(t,e,o){\"use strict\";o.r(e),o.d(e,\"grammar\",(function(){return h})),o.d(e,\"url_grammar\",(function(){return E})),o.d(e,\"finished\",(function(){return w})),o.d(e,\"bye\",(function(){return v})),o.d(e,\"say\",(function(){return O})),o.d(e,\"listen\",(function(){return k})),o.d(e,\"promptAndAsk\",(function(){return S})),o.d(e,\"promptHelpBye\",(function(){return j})),o.d(e,\"Endings\",(function(){return R})),o.d(e,\"Queries\",(function(){return N})),o.d(e,\"Conditional\",(function(){return C})),o.d(e,\"nluRequest\",(function(){return D}));var a=o(23),n=o(5),r=(o(24),o(8),o(20)),i=o(4),s=o(41),c=o(40),l=o(18),u=o(39);const p={initial:\"idle\",states:{idle:{},positive:{initial:\"quest1\",states:{quest1:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:\"#root.dm1.create_do\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:\"#root.dm1.if_ideas\"},{cond:t=>void 0!==v[t.recResult]&&!1===v[t.recResult].bye,target:\"#root.dm1.if_ideas\"},{target:\"#root.dm1.others\"}]}},S(\"I suppose you could do something productive. Do you agree?\")),quest2:Object(n.a)({on:{RECOGNISED:{target:\"#root.dm1.query3\",actions:Object(i.b)((t=>({option:t.recResult})))}}},S(\"So what would you like to do?\"))}},query1:Object(n.a)({},N(\"conditional1\",\"#root.init.help\")),conditional1:Object(n.a)({},C(\"agree\",\"create_do\",\"disagree\",\"#root.dm1.if_ideas\",\"#root.dm1.others\",\"#root.dm1.idle\",\"Ok.\")),query3:Object(n.a)({},N(\"#root.init.distributor\",\"#root.init.help\")),create_do:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:{actions:Object(i.b)((t=>({task:t.recResult}))),target:\"to_do\"}}},j(\"Tell me the things you have to accomplish.\",\"#root.dm1.idle\")),to_do:{initial:\"prompt\",states:{prompt:{entry:Object(i.k)((t=>({type:\"SPEAK\",value:\"Now go and complete the following tasks: \".concat(t.task)}))),on:{ENDSPEECH:\"#root.dm1.wait\"}}}},if_ideas:Object(n.a)({on:{RECOGNISED:[{target:\"#root.dm1.query2\",actions:Object(i.b)((t=>({option:t.recResult})))},{target:\"#root.dm1.others\"}]}},S(\"Then how about working on your ideas?\")),query2:Object(n.a)({},N(\"conditional2\",\"#root.init.help\")),conditional2:Object(n.a)({},C(\"agree\",\"create_ideas\",\"disagree\",\"#root.dm1.positive.quest2\",\"#root.dm1.others\",\"#root.dm2.idle\",\"Cool.\")),create_ideas:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:{target:\"idea\",actions:Object(i.b)((t=>({idea:t.recResult})))}}},S(\"Tell me your idea.\")),idea:{initial:\"prompt\",states:{prompt:{entry:Object(i.k)((t=>({type:\"SPEAK\",value:\"You should work on your idea of \".concat(t.idea,\".\")}))),on:{ENDSPEECH:\"#root.dm1.wait\"}}}},wait:Object(n.a)({initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==w[t.recResult]&&!0===w[t.recResult].finished,target:\"done\"},{cond:t=>void 0!==w[t.recResult]&&!1===w[t.recResult].finished,target:\"wait\"},{target:\"wait\"}]}},S(\"Say 'finished', when you're done\")),done:{initial:\"prompt\",states:{prompt:{entry:O(\"Good job. Time to relax.\"),on:{ENDSPEECH:{target:\"#root.dm1.positive.quest2\"}}}}},others:{initial:\"prompt\",states:{prompt:{entry:O(\"Umm, you said something strange\"),on:{ENDSPEECH:\"#root.dm1.positive.quest2\"}}}}}},d={rock:{url:\"https://www.youtube.com/watch?v=A0QkGThnKNQ\"},metal:{url:\"https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut\"},punk:{url:\"https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9\"},rap:{url:\"https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss\"},\"lo-fi\":{url:\"https://www.youtube.com/watch?v=5qap5aO4i9A\"},house:{url:\"https://www.youtube.com/watch?v=cna6C24AJkU\"},techno:{url:\"https://www.youtube.com/watch?v=bC9_OKu6nBQ\"},country:{url:\"https://www.youtube.com/watch?v=kI24NNjz2j8\"}},m={shooting:{game:\"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},arcade:{game:\"https://www.miniclip.com/games/genre-517/arcade/en/\"},racing:{game:\"https://www.miniclip.com/games/genre-477/racing/en/\"}};function g(t){return window.open(t,\"_blank\")}const b={initial:\"idle\",states:{idle:{},negative:{initial:\"music\",states:{music:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.choose_music\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.ask_game\"},{target:\"#root.dm2.negative.music.ask_again\"}]},states:{prompt:{entry:O(\"I am sorry to hear that. Would you like to listen to some music?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},choose_music:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==d[t.recResult]&&\"url\"in(d[t.recResult]||{}),actions:Object(i.b)((t=>({url:d[t.recResult].url}))),target:\"#root.dm2.negative.load_music\"},{target:\"#root.dm2.negative.choose_music.ask_again\"}]},states:{prompt:{entry:O(\"Which genre would you like to listen to?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_music:{initial:\"prompt\",states:{prompt:{entry:O(\"Music is in the new tab. Dance, dance, dance!\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g(t.url)))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},ask_game:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.choose_game\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.entertainment\"},{target:\"#root.dm2.negative.ask_game.ask_again\"}]},states:{prompt:{entry:O(\"Okay then. Let's play a game instead, what do you think?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},choose_game:{initial:\"prompt\",on:{RECOGNISED:[{cond:t=>void 0!==m[t.recResult]&&\"game\"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({game:m[t.recResult].game}))),target:\"#root.dm2.negative.load_game\"},{target:\"#root.dm2.negative.choose_game.ask_again\"}]},states:{prompt:{entry:O(\"You can choose to play an arcade, shooting or racing game!\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_game:{initial:\"prompt\",states:{prompt:{entry:O(\"The game is in a new tab\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g(t.game)))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},entertainment:{initial:\"prompt\",on:{ENDSPEECH:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:\"#root.dm2.negative.load_entertainment\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:\"#root.dm2.negative.final_state\"},{target:\"#root.dm2.negative.entertainment.ask_again\"}]},states:{prompt:{entry:O(\"Ok, would you like some random entertainment?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},ask_again:{entry:O(\"I am sorry, I could not understand you. Please repeat.\"),on:{ENDSPEECH:\"ask\"}}}},load_entertainment:{initial:\"prompt\",states:{prompt:{entry:O(\"The entertainement is in a new tab\"),on:{ENDSPEECH:\"play\"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g(\"https://theuselessweb.com\")))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},final_state:{initial:\"prompt\",states:{prompt:{entry:O(\"Understood. Let me know if you need anything\"),on:{ENDSPEECH:\"#root.dm2.idle\"}}}}}}}};var y=o(12);const h={\"of course\":{approval:!0},\"yes of course\":{approval:!0},yes:{approval:!0},yeah:{approval:!0},yup:{approval:!0},sure:{approval:!0},no:{approval:!1},nah:{approval:!1},nope:{approval:!1},\"no way\":{approval:!1},\"not sure\":{approval:!1},\"of course not\":{approval:!1}},E={rock:{url:\"https://www.youtube.com/watch?v=A0QkGThnKNQ\"},metal:{url:\"https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut\"},punk:{url:\"https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9\"},rap:{url:\"https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss\"},\"lo-fi\":{url:\"https://www.youtube.com/watch?v=5qap5aO4i9A\"},house:{url:\"https://www.youtube.com/watch?v=cna6C24AJkU\"},techno:{url:\"https://www.youtube.com/watch?v=bC9_OKu6nBQ\"},country:{url:\"https://www.youtube.com/watch?v=kI24NNjz2j8\"}},w={finished:{finished:!0},done:{finished:!0},\"I've done the task\":{finished:!0},\"I'm finished\":{finished:!0}},v={quit:{bye:!0},\"turn off\":{bye:!0},bye:{bye:!0},goodbye:{bye:!0}};function O(t){return Object(i.k)((e=>({type:\"SPEAK\",value:t})))}function k(){return Object(i.k)(\"LISTEN\")}function S(t){return{initial:\"prompt\",states:{prompt:{entry:O(t),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")}}}}function j(t,e){return{initial:\"prompt\",states:{prompt:{entry:O(t),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(i.k)(\"LISTEN\")},help:{entry:O(\"We may be miscommunicating.\"),on:{ENDSPEECH:[e,\"#root.init.help\"]}},goodbye:{entry:O(\"\"),on:{ENDSPEECH:[e,\"#root.init.goodbye\"]}}}}}function R(t,e){return{initial:\"prompt\",states:{prompt:{entry:Object(i.k)({type:\"SPEAK\",value:t}),on:{ENDSPEECH:e}}}}}function N(t,e){return{invoke:{id:\"rasa\",src:(t,e)=>D(t.option),onDone:{actions:[Object(i.b)(((t,e)=>({option:e.data.intent.name}))),(t,e)=>console.log(e.data)],target:t},onError:{target:e,actions:(t,e)=>console.log(e.data)}}}}function C(t,e,o,a,n,r,s){return{initial:\"prompt\",on:{ENDSPEECH:[{cond:e=>e.option===t,target:e},{cond:t=>t.option===o,target:a},{cond:t=>\"help\"===t.option,target:[r,\"#root.init.help\"]},{cond:t=>\"bye\"===t.option,target:[r,\"#root.init.goodbye\"]},{target:n}]},states:{prompt:{entry:Object(i.k)({type:\"SPEAK\",value:s})}}}}Object(u.a)({url:\"https://statecharts.io/inspect\",iframe:!1});Object(i.k)((t=>({type:\"SPEAK\",value:\"\".concat(t.snippet)})));const P=Object(s.a)({id:\"root\",type:\"parallel\",states:{init:{initial:\"idle\",states:{idle:{on:{CLICK:\"welcome\"}},welcome:Object(n.a)({on:{RECOGNISED:{target:\"query\",actions:Object(i.b)((t=>({option:t.recResult})))}}},S(\"Good morning. How are you?\")),query:Object(n.a)({},N(\"distributor\",\"welcome\")),distributor:{initial:\"prompt\",on:{ENDSPEECH:[{cond:t=>\"positive\"===t.option,target:[\"#root.dm1.positive\",\"idle\"]},{cond:t=>\"negative\"===t.option,target:[\"#root.dm2.negative\",\"idle\"]},{cond:t=>\"todo\"===t.option,target:[\"#root.dm1.create_do\",\"idle\"]},{cond:t=>\"ideas\"===t.option,target:[\"#root.dm1.create_ideas\",\"idle\"]},{cond:t=>\"answer\"===t.option,target:\"bob\"},{cond:t=>\"bob\"===t.option,target:\"bob\"},{cond:t=>\"neutral\"===t.option,target:\"neutral\"},{cond:t=>\"music\"===t.option,target:[\"#root.dm2.negative.choose_music\",\"idle\"]},{cond:t=>\"games\"===t.option,target:[\"#root.dm2.negative.choose_game\",\"idle\"]},{cond:t=>\"entertain\"===t.option,target:[\"#root.dm2.negative.load_entertainment\",\"idle\"]},{cond:t=>\"help\"===t.option,target:\"help\"},{target:\"goodbye\"}]},states:{prompt:{entry:O(\"Ok.\")}}},bob:Object(n.a)({on:{RECOGNISED:{target:\"query\",actions:Object(i.b)((t=>({option:t.recResult})))}}},S(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")),neutral:Object(n.a)({on:{RECOGNISED:{target:\"#root.dm2.negative.choose_music\",actions:Object(i.b)((t=>({option:t.recResult})))}}},S(\"You seem lost. What about listening to some music?\")),help:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:\"bob\"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:\"goodbye\"},{target:\"bob\"}]}},S(\"I feel lost. Would you like to start over?\")),goodbye:Object(n.a)({},R(\"Happy to help out. See you later.\",\"#root.init\"))}},dm1:Object(n.a)({},p),dm2:Object(n.a)({},b),asrtts:{initial:\"idle\",states:{idle:{on:{LISTEN:\"recognising\",SPEAK:{target:\"speaking\",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:\"progress\",entry:\"recStart\",exit:\"recStop\",on:{ASRRESULT:{actions:[\"recLogResult\",Object(i.b)(((t,e)=>({recResult:e.value})))],target:\".match\"},RECOGNISED:\"idle\"},states:{progress:{},match:{entry:Object(i.k)(\"RECOGNISED\")}}},speaking:{entry:\"ttsStart\",on:{ENDSPEECH:\"idle\"}}}}}},{actions:{recLogResult:t=>{console.log(\"<< ASR: \"+t.recResult)},test:()=>{console.log(\"test\")},logIntent:t=>{console.log(\"<< NLU intent: \"+t.nluData.intent.name)}}}),f=t=>{switch(!0){case t.state.matches({asrtts:\"recognising\"}):return Object(y.jsx)(\"button\",Object(n.a)(Object(n.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},t),{},{children:\"...\"}));case t.state.matches({asrtts:\"speaking\"}):return Object(y.jsx)(\"button\",Object(n.a)({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},t));default:return Object(y.jsx)(\"button\",Object(n.a)(Object(n.a)({type:\"button\",className:\"glow-on-hover\"},t),{},{children:\"Click on me\"}))}};function _(){const t=Object(l.useSpeechSynthesis)({onEnd:()=>{d(\"ENDSPEECH\")}}),e=t.speak,o=t.cancel,n=(t.speaking,Object(l.useSpeechRecognition)({onResult:t=>{d({type:\"ASRRESULT\",value:t})}})),r=n.listen,i=(n.listening,n.stop),s=Object(c.b)(P,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log(\"Ready to receive a command.\"),r({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log(\"Recognition stopped.\"),i()})),changeColour:Object(c.a)((t=>{console.log(\"Repainting...\"),document.body.style.background=t.recResult})),ttsStart:Object(c.a)(((t,o)=>{console.log(\"Speaking...\"),e({text:t.ttsAgenda})})),ttsCancel:Object(c.a)(((t,e)=>{console.log(\"TTS STOP...\"),o()}))}}),u=Object(a.a)(s,3),p=u[0],d=u[1];u[2];return Object(y.jsx)(\"div\",{className:\"App\",children:Object(y.jsx)(f,{state:p,onClick:()=>d(\"CLICK\")})})}const D=t=>fetch(new Request(\"https://cors-anywhere.herokuapp.com/https://mood-admin.herokuapp.com/model/parse\",{method:\"POST\",headers:{Origin:\"http://localhost:3000/\"},body:'{\"text\": \"'.concat(t,'\"}')})).then((t=>t.json())),I=document.getElementById(\"root\");r.render(Object(y.jsx)(_,{}),I)}},[[35,1,2]]]);","name":"static/js/main.39ac922a.chunk.js","map":{"version":3,"sources":["static/js/main.39ac922a.chunk.js"],"names":["this","push","24","module","exports","__webpack_require__","35","__webpack_exports__","r","d","grammar","src_url_grammar","finished","bye","say","src_listen","promptAndAsk","promptHelpBye","Endings","Queries","Conditional","nluRequest","slicedToArray","objectSpread2","react_dom","actions","Machine","useMachine","dist","browser","dmMachine1","initial","states","idle","positive","quest1","Object","on","RECOGNISED","cond","context","undefined","recResult","approval","target","quest2","option","query1","conditional1","query3","create_do","task","to_do","prompt","entry","type","value","concat","ENDSPEECH","if_ideas","query2","conditional2","create_ideas","idea","wait","done","others","url_grammar","rock","url","metal","punk","rap","lo-fi","house","techno","country","game_grammar","shooting","game","arcade","racing","openInNewTab","user_input","window","open","dmMachine2","negative","music","ask","ask_again","choose_music","load_music","play","ask_game","choose_game","load_game","entertainment","load_entertainment","final_state","jsx_runtime","of course","yes of course","yes","yeah","yup","sure","no","nah","nope","no way","not sure","of course not","I've done the task","I'm finished","quit","turn off","goodbye","text","_context","idled","help","saythis","on_end","ondone","onerror","invoke","id","src","event","onDone","data","intent","name","console","log","onError","cond1","target1","cond2","target2","elses","idles","iframe","snippet","machine","init","CLICK","welcome","query","distributor","bob","neutral","dm1","dm2","asrtts","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","className","style","animation","children","App","_useSpeechSynthesis","onEnd","send","speak","cancel","_useSpeechRecognition","onResult","result","listen","stop","listening","_useMachine","devTools","recStart","interimResults","continuous","recStop","changeColour","document","body","background","ttsStart","effect","ttsCancel","_useMachine2","current","onClick","fetch","Request","proxyurl","method","headers","Origin","then","json","rootElement","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmood-admin\"] = this[\"webpackJsonpmood-admin\"] || []).push([[0],{\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"grammar\", function() { return /* binding */ grammar; });\n__webpack_require__.d(__webpack_exports__, \"url_grammar\", function() { return /* binding */ src_url_grammar; });\n__webpack_require__.d(__webpack_exports__, \"finished\", function() { return /* binding */ finished; });\n__webpack_require__.d(__webpack_exports__, \"bye\", function() { return /* binding */ bye; });\n__webpack_require__.d(__webpack_exports__, \"say\", function() { return /* binding */ say; });\n__webpack_require__.d(__webpack_exports__, \"listen\", function() { return /* binding */ src_listen; });\n__webpack_require__.d(__webpack_exports__, \"promptAndAsk\", function() { return /* binding */ promptAndAsk; });\n__webpack_require__.d(__webpack_exports__, \"promptHelpBye\", function() { return /* binding */ promptHelpBye; });\n__webpack_require__.d(__webpack_exports__, \"Endings\", function() { return /* binding */ Endings; });\n__webpack_require__.d(__webpack_exports__, \"Queries\", function() { return /* binding */ Queries; });\n__webpack_require__.d(__webpack_exports__, \"Conditional\", function() { return /* binding */ Conditional; });\n__webpack_require__.d(__webpack_exports__, \"nluRequest\", function() { return /* binding */ nluRequest; });\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./src/styles.scss\nvar styles = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(20);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/actions.js\nvar actions = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/xstate/es/Machine.js + 2 modules\nvar Machine = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/react/es/useMachine.js + 3 modules\nvar useMachine = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/react-speech-kit/dist/index.js\nvar dist = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/@xstate/inspect/es/browser.js + 3 modules\nvar browser = __webpack_require__(39);\n\n// CONCATENATED MODULE: ./src/dmPositive.ts\n// export function promptHelpBye(prompt: string, idled: string): MachineConfig<SDSContext, any, SDSEvent> {\n//     return ({\n//         initial: 'prompt',\n//         states: {\n//             prompt: {\n//                 entry: say(prompt),\n//                 on: { ENDSPEECH: 'ask' }\n//             },\n//             ask: {entry: send('LISTEN')\n//             },\n//             help: {\n//                 entry: say(\"We may be miscommunicating.\"),\n//                 on: { ENDSPEECH: [idled,\"#root.init.help\"] }\n//             },\n//             goodbye:{\n//                 entry: say(\"\"),\n//                 on: { ENDSPEECH: [idled,\"#root.init.goodbye\" ] }\n//             }\n//     }}\n// )}\nlet num=0;const dmMachine1={// NOTE: regarding the queries:\n// There are more efficient ways to implement them, however, \n// Yet we decided to have a grammar as well as querying in order to see\n// which implementation will yield better results\ninitial:'idle',states:{// ...\nidle:{},// ...\npositive:{initial:\"quest1\",states:{// .... // ...\nquest1:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,target:\"#root.dm1.create_do\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,target:\"#root.dm1.if_ideas\"},{cond:context=>bye[context.recResult]!==undefined&&bye[context.recResult].bye===false,target:\"#root.dm1.if_ideas\"},// {cond: (context) => context.option === 'help', target: \".help\"},\n// {cond: (context) => context.option === 'bye', target: \".goodbye\"},\n{target:'#root.dm1.others'}]}},promptAndAsk(\"I suppose you could do something productive. Do you agree?\")),// .... // ...\nquest2:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:'#root.dm1.query3',actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"So what would you like to do?\"))}},// ....\nquery1:Object(objectSpread2[\"a\" /* default */])({},Queries('conditional1',\"#root.init.help\")),// ....\nconditional1:Object(objectSpread2[\"a\" /* default */])({},Conditional('agree',\"create_do\",'disagree',\"#root.dm1.if_ideas\",\"#root.dm1.others\",'#root.dm1.idle',\"Ok.\")),// ....\nquery3:Object(objectSpread2[\"a\" /* default */])({},Queries(\"#root.init.distributor\",\"#root.init.help\")),//...\ncreate_do:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:{actions:Object(actions[\"b\" /* assign */])(context=>{return{task:context.recResult};}),target:\"to_do\"}}},promptHelpBye(\"Tell me the things you have to accomplish.\",'#root.dm1.idle')),// ...\nto_do:{initial:\"prompt\",states:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"Now go and complete the following tasks: \".concat(context.task)})),on:{ENDSPEECH:'#root.dm1.wait'}}}},// ...\nif_ideas:Object(objectSpread2[\"a\" /* default */])({// Note to self: help/bye implemented (uses conditional)\non:{RECOGNISED:[{target:'#root.dm1.query2',actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})},{target:'#root.dm1.others'}]}},promptAndAsk(\"Then how about working on your ideas?\")),// ....\nquery2:Object(objectSpread2[\"a\" /* default */])({},Queries('conditional2',\"#root.init.help\")),// ....\nconditional2:Object(objectSpread2[\"a\" /* default */])({},Conditional('agree',\"create_ideas\",'disagree',\"#root.dm1.positive.quest2\",\"#root.dm1.others\",'#root.dm2.idle',\"Cool.\")),// ...\ncreate_ideas:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:{target:\"idea\",actions:Object(actions[\"b\" /* assign */])(context=>{return{idea:context.recResult};})}}},promptAndAsk(\"Tell me your idea.\")),// ...\nidea:{initial:\"prompt\",// on: {ENDSPEECH: ['#root.dm1.idle']},\nstates:{prompt:{entry:Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"You should work on your idea of \".concat(context.idea,\".\")})),on:{ENDSPEECH:'#root.dm1.wait'}}}},// ...\nwait:Object(objectSpread2[\"a\" /* default */])({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>finished[context.recResult]!==undefined&&finished[context.recResult].finished===true,target:\"done\"},{cond:context=>finished[context.recResult]!==undefined&&finished[context.recResult].finished===false,target:\"wait\"},{target:'wait'}]}},promptAndAsk(\"Say 'finished', when you're done\")),// ...\ndone:{initial:\"prompt\",states:{prompt:{entry:say(\"Good job. Time to relax.\"),on:{ENDSPEECH:{target:'#root.dm1.positive.quest2'}}}}},// ...\nothers:{initial:\"prompt\",// on: {ENDSPEECH: '#root.goodbbye'},\nstates:{prompt:{entry:say(\"Umm, you said something strange\"),on:{ENDSPEECH:'#root.dm1.positive.quest2'}}}}}};// ONLY DRAFTS\n// done: {...Endings(\"Congratulations on your accomplishment!\",\"#root.init\")},\n// annoy:{\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: [\n//             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n//             target: \"done\"},\n//             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n//             target: \".wait\"}],\n//         // WAIT: '.wait'\n//         }\n//     },\n// ...\n// annoy: {\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: [\n//             {cond: (context) => context.option === 'agrreement', target: \"done\"},\n//             {cond: (context) => context.option === 'disagreement', target: \".wait\"},\n//             {target: \".wait\"}], \n//         WAIT: '.prompt'\n//     },\n//     states: {\n//         prompt: {\n//             entry: say(\"Have you done your task yet?\"),\n//             on: { ENDSPEECH: \"ask\" }\n//         },\n//         ask: {\n//             entry: [ send('LISTEN'), send('WAIT', {delay: 5000})]\n//         },\n//         // wait2: {entry: [ send('WAIT', {delay: 3000})]},\n//         wait: {\n//             entry: [\n//                 say('Hm.')\n//             ],\n//             on: {\n//                 ENDSPEECH: [\n//                     {cond: () => (num++) <= 2, target: 'prompt'},\n//                     {target: '#root.dm1.done'}\n//                 ]\n//             }\n//         }\n//     }\n// },\n// ----\n// quest1: {\n//     on: {\n//         RECOGNISED: [\n//                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n//                 actions: assign((context) => { return { approval: true } }),\n//                 target: \"#root.dm1.create_do\"},\n//                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n//                 actions: assign((context) => { return { approval: false} }),\n//                 target: \"#root.dm1.if_ideas\"},\n//                 {target: \"#root.dm1.done.others\"}\n//                 // {cond: (context) => context.option === 'help', target: '.help'}\n//                 ]\n//         },\n//         ...promptHelpBye(\"I suppose you could do something productive. Do you agree?\")\n//         },\\\n// ------\n// done: {\n//     initial: \"prompt\",\n//     // on: {ENDSPEECH: ['#root.dm1.idle']},\n//         states: {\n//             prompt: {\n//                 entry: say(\"Congratulations on your accomplishment! Here's a reward\"),\n//                 on: { ENDSPEECH: ['#root.dm1.idle', '#root.init.help.goodbye']}\n//         }, \n//             others: {\n//                 entry: say(\"Ummm, you said something strange\"),\n//                 on: { ENDSPEECH: '#root.dm1.positive.quest2'}\n//                 }\n//         }\n//     }   \n// ------\n// idea: {\n//     initial: \"prompt\",\n//     // on: {ENDSPEECH: ['#root.dm1.idle']},\n//         states: {\n//             prompt: {\n//                 entry: send((context) => ({\n//                     type: \"SPEAK\",\n//                     value:`You should work on your idea of ${context.idea}. Say 'finished', when you're done` })),\n//                 on: { ENDSPEECH: ['#root.dm1.idea_wait']}\n//             // },\n//     //         elevator: {\n//     //             entry: send(openInNewTab('https://www.youtube.com/watch?v=VBlFHuCzPgY&t=3s&ab_channel=AntoineB')),\n//     //             on: { ENDSPEECH: '#root.dm1.idea_wait'}\n//                 }\n//     }\n// }\n// ------\n// annoy: {\n//     initial: \"prompt\",\n//     on: {\n//         RECOGNISED: {\n//             target: \"conditional3\",\n//             actions: assign((context) => { return { option: context.recResult } }),\n//         },\n//         WAIT: 'wait'\n//     },\n//     states: {\n//         prompt: {\n//             entry: say(\"Let me know when you're done.\"),\n//             on: { ENDSPEECH: \"ask\" }\n//         },\n//         ask: {\n//             entry: [\n//                 send('LISTEN'),\n//                 send('WAIT', {delay: 10000})\n//             ]\n//         }\n//     }\n// },\n// ...\n// wait: {\n//     entry: [say('Have you done your task yet?')],\n//     on: {\n//         ENDSPEECH: [\n//             {cond: () => (num++, 1) <= 5, target: 'conditional3'},\n//             {target: '#root.dm1.idea_wait'}\n//         ]\n//     }\n// },\n// conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.annoy\", \"#root.dm1.annoy\", '#root.dm1.idle', `Mhm.`)},\n// -----\n// ...\n// full_annoy:{\n//     initial: 'annoy',\n//     on: { \n//         // RECOGNISED: {\n//         //         cond: (context) => help_commands.includes(context.recResult),\n//         //         target: '#root.init.help'\n//         //             },\n//         MAXSPEECH: [\n//             { \n//                 cond: (context) => context.count < 5,\n//                 target: '#root.dm1.idea_wait'},\n//                 {cond: (context) => context.count == null,\n//                 actions: assign((context)=>{return {count: Number(0)}}),\n//                 target: '#root.dm1.maxspeech'}],\n//             },\n//     states:{\n//         hist:{type: 'history'},\n//         // .... // ...\n//         annoy: {\n//             on: {\n//                 RECOGNISED: [{\n//                     cond: (context) => \"finished\" in (gram[context.recResult] || {}),\n//                     actions: assign((context) => { return { finished: gram[context.recResult].finished } }),\n//                     target: \"#root.dm1.done\"}]\n//                 // },\n//                 // { cond: (context) => !(help_commands.includes(context.recResult)),\n//                 //     target: \".nomatch\" }]\n//             },\n//             ...Prompt_Nomatch_Timeout('Have you done your task yet?', \"Sorry I don't understand\"),\n//         }\n// },\n// // ....\n// },\n// // ... \n// maxspeech:{\n//     initial: 'prompt',\n//     on: {\n//         ENDSPEECH: {\n//             actions: assign((context)=> {return {count: context.count+1 }}),\n//             target: 'full_annoy.hist'\n//                 }\n//             },\n//             // target: 'fill_appointment_info.hist'\n//         states: {\n//             prompt: {entry: say('I AM A STUPID BOT ')}\n//     }\n// },\n// ...\n// ..\n//     wait: {\n//         initial: 'prompt',\n//         on: { ENDSPEECH: '#root.dm1.annoy'},\n//         states: {\n//             prompt: {\n//                 entry: say(\"M.\"),\n//                 // on: { ENDSPEECH: \"#root.dm1.annoy\" }\n//             },\n//             // ask: {\n//             //     entry: [\n//             //         send('LISTEN'),\n//             //         send('WAIT', {delay: 10000})\n//             //     ]}\n//             }\n// },\n//     // ...\n//     annoy: {\n//         initial: \"prompt\",\n//         on: {\n//             RECOGNISED: {\n//                 target: \"conditional3\",\n//                 actions: assign((context) => { return { option: context.recResult } }),\n//             },\n//             WAIT: 'wait'\n//         },\n//         states: {\n//             prompt: {\n//                 entry: say(\"Have you finished your task?\"),\n//                 on: { ENDSPEECH: \"ask\" }\n//             },\n//             ask: {\n//                 entry: [\n//                     send('LISTEN'),\n//                     send('WAIT', {delay: 10000})\n//                 ]\n//             }\n//         }\n//     },\n// conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.wait\", \"#root.dm1.annoy\", '#root.dm1.idle', `Oh`)},\n// CONCATENATED MODULE: ./src/dmNegative.ts\n// import { nluRequest } from './index'\n// import { Endings } from './index'\nconst url_grammar={\"rock\":{url:'https://www.youtube.com/watch?v=A0QkGThnKNQ'},\"metal\":{url:'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'},\"punk\":{url:'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'},\"rap\":{url:'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'},\"lo-fi\":{url:'https://www.youtube.com/watch?v=5qap5aO4i9A'},\"house\":{url:'https://www.youtube.com/watch?v=cna6C24AJkU'},\"techno\":{url:'https://www.youtube.com/watch?v=bC9_OKu6nBQ'},\"country\":{url:'https://www.youtube.com/watch?v=kI24NNjz2j8'}// ...\n};const game_grammar={\"shooting\":{game:\"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\"arcade\":{game:\"https://www.miniclip.com/games/genre-517/arcade/en/\"},\"racing\":{game:\"https://www.miniclip.com/games/genre-477/racing/en/\"}};function openInNewTab(user_input){return window.open(user_input,'_blank');}const dmMachine2={initial:'idle',states:{idle:{},negative:{initial:\"music\",states:{music:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_music\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.ask_game\"},{target:\"#root.dm2.negative.music.ask_again\"}// {target: \"#root.dm1.done.others\"}\n// {cond: (context) => context.option === 'help', target: '.help'}\n]},states:{prompt:{entry:say(\"I am sorry to hear that. Would you like to listen to some music?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_music:{initial:'prompt',on:{RECOGNISED:[{cond:context=>url_grammar[context.recResult]!==undefined&&\"url\"in(url_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:Object(actions[\"b\" /* assign */])(context=>{return{url:url_grammar[context.recResult].url};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_music\"},{target:\"#root.dm2.negative.choose_music.ask_again\"}]},states:{prompt:{entry:say(\"Which genre would you like to listen to?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_music:{initial:'prompt',states:{prompt:{entry:say('Music is in the new tab. Dance, dance, dance!'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab(context.url))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},ask_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_game\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.entertainment\"},{target:\"#root.dm2.negative.ask_game.ask_again\"}]},states:{prompt:{entry:say(\"Okay then. Let's play a game instead, what do you think?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>game_grammar[context.recResult]!==undefined&&\"game\"in(game_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:Object(actions[\"b\" /* assign */])(context=>{return{game:game_grammar[context.recResult].game};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_game\"},{target:\"#root.dm2.negative.choose_game.ask_again\"}]},states:{prompt:{entry:say(\"You can choose to play an arcade, shooting or racing game!\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_game:{initial:'prompt',states:{prompt:{entry:say('The game is in a new tab'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab(context.game))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},entertainment:{initial:'prompt',on:{ENDSPEECH:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:true};}),target:\"#root.dm2.negative.load_entertainment\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:Object(actions[\"b\" /* assign */])(context=>{return{approval:false};}),target:\"#root.dm2.negative.final_state\"},{target:\"#root.dm2.negative.entertainment.ask_again\"}]},states:{prompt:{entry:say(\"Ok, would you like some random entertainment?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_entertainment:{initial:'prompt',states:{prompt:{entry:say('The entertainement is in a new tab'),on:{ENDSPEECH:'play'}},play:{entry:Object(actions[\"k\" /* send */])(context=>Object(objectSpread2[\"a\" /* default */])({},openInNewTab('https://theuselessweb.com'))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},final_state:{initial:'prompt',states:{prompt:{entry:say('Understood. Let me know if you need anything'),on:{ENDSPEECH:'#root.dm2.idle'}}}}}}}};\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(12);\n\n// CONCATENATED MODULE: ./src/index.tsx\n// auto-open this asshole: https://cors-anywhere.herokuapp.com/corsdemo\n// NOTE: We created separate grammars for the machines to \n// find answers in the most efficient way possible\nconst grammar={\"of course\":{approval:true},\"yes of course\":{approval:true},\"yes\":{approval:true},\"yeah\":{approval:true},\"yup\":{approval:true},\"sure\":{approval:true},// --\n\"no\":{approval:false},\"nah\":{approval:false},\"nope\":{approval:false},\"no way\":{approval:false},\"not sure\":{approval:false},\"of course not\":{approval:false}};const src_url_grammar={\"rock\":{url:'https://www.youtube.com/watch?v=A0QkGThnKNQ'},\"metal\":{url:'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'},\"punk\":{url:'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'},\"rap\":{url:'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'},\"lo-fi\":{url:'https://www.youtube.com/watch?v=5qap5aO4i9A'},\"house\":{url:'https://www.youtube.com/watch?v=cna6C24AJkU'},\"techno\":{url:'https://www.youtube.com/watch?v=bC9_OKu6nBQ'},\"country\":{url:'https://www.youtube.com/watch?v=kI24NNjz2j8'}// ...          \n};const finished={\"finished\":{finished:true},\"done\":{finished:true},\"I've done the task\":{finished:true},\"I'm finished\":{finished:true}// ...          \n};const bye={\"quit\":{bye:true},\"turn off\":{bye:true},\"bye\":{bye:true},\"goodbye\":{bye:true}// ...          \n};// window.open(\"https://cors-anywhere.herokuapp.com/corsdemo\")\n// window.open(\"https://statecharts.io/inspect\")\nObject(browser[\"a\" /* inspect */])({url:\"https://statecharts.io/inspect\",iframe:false});// NOTE: created as much universal functions as possible\nfunction say(text){return Object(actions[\"k\" /* send */])(_context=>({type:\"SPEAK\",value:text}));}function src_listen(){return Object(actions[\"k\" /* send */])('LISTEN');}function promptAndAsk(prompt){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')}}};}function promptHelpBye(prompt,idled){return{initial:'prompt',states:{prompt:{entry:say(prompt),on:{ENDSPEECH:'ask'}},ask:{entry:Object(actions[\"k\" /* send */])('LISTEN')},help:{entry:say(\"We may be miscommunicating.\"),on:{ENDSPEECH:[idled,\"#root.init.help\"]}},goodbye:{entry:say(\"\"),on:{ENDSPEECH:[idled,\"#root.init.goodbye\"]}}}};}function Endings(saythis,on_end){return{initial:\"prompt\",states:{prompt:{entry:Object(actions[\"k\" /* send */])({type:\"SPEAK\",value:saythis}),on:{ENDSPEECH:on_end}}}};}function Queries(ondone,onerror){return{invoke:{id:'rasa',src:(context,event)=>nluRequest(context.option),onDone:{actions:[Object(actions[\"b\" /* assign */])((context,event)=>{return{option:event.data.intent.name};}),(context,event)=>console.log(event.data)],target:ondone},onError:{target:onerror,actions:(context,event)=>console.log(event.data)}}};}function Conditional(cond1,target1,cond2,target2,elses,idles,saythis){return{initial:\"prompt\",on:{ENDSPEECH:[{cond:context=>context.option===cond1,target:target1},{cond:context=>context.option===cond2,target:target2},{cond:context=>context.option==='help',target:[idles,\"#root.init.help\"]},{cond:context=>context.option==='bye',target:[idles,\"#root.init.goodbye\"]},{target:elses}]},states:{prompt:{entry:Object(actions[\"k\" /* send */])({type:\"SPEAK\",value:saythis})}}};}const saySnippet=Object(actions[\"k\" /* send */])(context=>({type:\"SPEAK\",value:\"\".concat(context.snippet)}));const machine=Object(Machine[\"a\" /* Machine */])({id:'root',type:'parallel',states:{// ____________\ninit:{initial:'idle',states:{// ...\nidle:{on:{CLICK:'welcome'}},// ...\nwelcome:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:{target:\"query\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"Good morning. How are you?\")),query:Object(objectSpread2[\"a\" /* default */])({},Queries(\"distributor\",'welcome')),// ...\ndistributor:{initial:\"prompt\",on:{ENDSPEECH:[{cond:context=>context.option==='positive',target:[\"#root.dm1.positive\",\"idle\"]},{cond:context=>context.option==='negative',target:[\"#root.dm2.negative\",\"idle\"]},{cond:context=>context.option==='todo',target:[\"#root.dm1.create_do\",\"idle\"]},// REMINDER: delete answer after retraining\n{cond:context=>context.option==='ideas',target:[\"#root.dm1.create_ideas\",\"idle\"]},{cond:context=>context.option==='answer',target:\"bob\"},{cond:context=>context.option==='bob',target:\"bob\"},{cond:context=>context.option==='neutral',target:\"neutral\"},{cond:context=>context.option==='music',target:[\"#root.dm2.negative.choose_music\",\"idle\"]},{cond:context=>context.option==='games',target:[\"#root.dm2.negative.choose_game\",\"idle\"]},{cond:context=>context.option==='entertain',target:[\"#root.dm2.negative.load_entertainment\",\"idle\"]},{cond:context=>context.option==='help',target:\"help\"},{target:\"goodbye\"}]},states:{prompt:{entry:say('Ok.')}}},// ...\nbob:Object(objectSpread2[\"a\" /* default */])({// NOTE:\n// This part could be developed more, into a seperate machine\n// where the user could try out the limits of adaptivity of this DS\non:{RECOGNISED:{target:\"query\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")),// ...\nneutral:Object(objectSpread2[\"a\" /* default */])({// NOTE: \n// We are aware that this is not efficient.\n// We tried this part to see how the machines interact between themselves. \n// For educational purposes only.\non:{RECOGNISED:{target:\"#root.dm2.negative.choose_music\",actions:Object(actions[\"b\" /* assign */])(context=>{return{option:context.recResult};})}}},promptAndAsk(\"You seem lost. What about listening to some music?\")),// ...\nhelp:Object(objectSpread2[\"a\" /* default */])({on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,target:\"bob\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,target:\"goodbye\"},{target:\"bob\"}]}},promptAndAsk(\"I feel lost. Would you like to start over?\")),//     // ...\ngoodbye:Object(objectSpread2[\"a\" /* default */])({},Endings(\"Happy to help out. See you later.\",\"#root.init\"))}},// ____________\ndm1:Object(objectSpread2[\"a\" /* default */])({},dmMachine1),// ____________\ndm2:Object(objectSpread2[\"a\" /* default */])({},dmMachine2),// ____________\nasrtts:{initial:'idle',states:{// ...\nidle:{on:{LISTEN:'recognising',SPEAK:{target:'speaking',actions:Object(actions[\"b\" /* assign */])((_context,event)=>{return{ttsAgenda:event.value};})}}},// ...\nrecognising:{initial:'progress',entry:'recStart',exit:'recStop',on:{ASRRESULT:{actions:['recLogResult',Object(actions[\"b\" /* assign */])((_context,event)=>{return{recResult:event.value};})],target:'.match'},RECOGNISED:'idle'},states:{progress:{},match:{entry:Object(actions[\"k\" /* send */])('RECOGNISED')}}},// ...\nspeaking:{entry:'ttsStart',on:{ENDSPEECH:'idle'}}}}}},{actions:{recLogResult:context=>{/* context.recResult = event.recResult; */console.log('<< ASR: '+context.recResult);},test:()=>{console.log('test');},logIntent:context=>{/* context.nluData = event.data */console.log('<< NLU intent: '+context.nluData.intent.name);}}});const ReactiveButton=props=>{switch(true){case props.state.matches({asrtts:'recognising'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"glowing 20s linear\"}},props),{},{children:\"...\"}));case props.state.matches({asrtts:'speaking'}):return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\",style:{animation:\"bordering 1s infinite\"}},props));default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({type:\"button\",className:\"glow-on-hover\"},props),{},{children:\"Click on me\"}));}};function App(){const _useSpeechSynthesis=Object(dist[\"useSpeechSynthesis\"])({onEnd:()=>{send('ENDSPEECH');}}),speak=_useSpeechSynthesis.speak,cancel=_useSpeechSynthesis.cancel,speaking=_useSpeechSynthesis.speaking;const _useSpeechRecognition=Object(dist[\"useSpeechRecognition\"])({onResult:result=>{send({type:\"ASRRESULT\",value:result});}}),listen=_useSpeechRecognition.listen,listening=_useSpeechRecognition.listening,stop=_useSpeechRecognition.stop;const _useMachine=Object(useMachine[\"b\" /* useMachine */])(machine,{devTools:true,actions:{recStart:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Ready to receive a command.');listen({interimResults:false,continuous:true});}),recStop:Object(useMachine[\"a\" /* asEffect */])(()=>{console.log('Recognition stopped.');stop();}),changeColour:Object(useMachine[\"a\" /* asEffect */])(context=>{console.log('Repainting...');document.body.style.background=context.recResult;}),ttsStart:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('Speaking...');speak({text:context.ttsAgenda});}),ttsCancel:Object(useMachine[\"a\" /* asEffect */])((context,effect)=>{console.log('TTS STOP...');cancel();})}}),_useMachine2=Object(slicedToArray[\"a\" /* default */])(_useMachine,3),current=_useMachine2[0],send=_useMachine2[1],service=_useMachine2[2];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ReactiveButton,{state:current,onClick:()=>send('CLICK')})});};/* RASA API\n *  */const proxyurl=\"https://cors-anywhere.herokuapp.com/\";const rasaurl='https://mood-admin.herokuapp.com/model/parse';const nluRequest=text=>fetch(new Request(proxyurl+rasaurl,{method:'POST',headers:{'Origin':'http://localhost:3000/'},body:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const rootElement=document.getElementById(\"root\");react_dom[\"render\"](/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App,{}),rootElement);\n\n/***/ })\n\n},[[35,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-6-0!/Users/evelsve/repos/mood-admin/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-6-1!/Users/evelsve/repos/mood-admin/node_modules/postcss-loader/src/index.js??postcss!/Users/evelsve/repos/mood-admin/node_modules/resolve-url-loader/index.js??ref--5-oneOf-6-3!/Users/evelsve/repos/mood-admin/node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-6-4!/Users/evelsve/repos/mood-admin/src/styles.scss","/Users/evelsve/repos/mood-admin/src/dmPositive.ts","/Users/evelsve/repos/mood-admin/src/dmNegative.ts","/Users/evelsve/repos/mood-admin/src/index.tsx"],"names":["num","dmMachine1","initial","states","idle","positive","quest1","on","RECOGNISED","cond","context","grammar","recResult","undefined","approval","target","bye","promptAndAsk","quest2","actions","assign","option","query1","Queries","conditional1","Conditional","query3","create_do","task","promptHelpBye","to_do","prompt","entry","send","type","value","ENDSPEECH","if_ideas","query2","conditional2","create_ideas","idea","wait","finished","done","say","others","url_grammar","url","game_grammar","game","openInNewTab","user_input","window","open","dmMachine2","negative","music","ask","ask_again","choose_music","load_music","play","ask_game","choose_game","load_game","entertainment","load_entertainment","final_state","inspect","iframe","text","_context","listen","idled","help","goodbye","Endings","saythis","on_end","ondone","onerror","invoke","id","src","event","nluRequest","onDone","data","intent","name","console","log","onError","cond1","target1","cond2","target2","elses","idles","saySnippet","snippet","machine","Machine","init","CLICK","welcome","query","distributor","bob","neutral","dm1","dm2","asrtts","LISTEN","SPEAK","ttsAgenda","recognising","exit","ASRRESULT","progress","match","speaking","recLogResult","test","logIntent","nluData","ReactiveButton","props","state","matches","animation","App","useSpeechSynthesis","onEnd","speak","cancel","useSpeechRecognition","onResult","result","listening","stop","useMachine","devTools","recStart","asEffect","interimResults","continuous","recStop","changeColour","document","body","style","background","ttsStart","effect","ttsCancel","current","service","proxyurl","rasaurl","fetch","Request","method","headers","then","json","rootElement","getElementById","ReactDOM"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,GAAIA,IAAG,CAAG,CAAV,CAEO,KAAMC,WAAoD,CAAI,CACjE;AACA;AACA;AACA;AACAC,OAAO,CAAE,MALwD,CAMjEC,MAAM,CAAE,CACJ;AACAC,IAAI,CAAE,EAFF,CAGJ;AACAC,QAAQ,CAAE,CACNH,OAAO,CAAE,QADH,CAENC,MAAM,CAAE,CACJ;AACAG,MAAM,CAAC,0CACHC,EAAE,CAAE,CACAC,UAAU,CACN,CACA,CAACC,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,IAAxG,CACAC,MAAM,CAAE,qBADR,CADA,CAIA,CAACN,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,KAAxG,CACAC,MAAM,CAAE,oBADR,CAJA,CAOA,CAACN,IAAI,CAAGC,OAAD,EAAaM,GAAG,CAACN,OAAO,CAACE,SAAT,CAAH,GAA2BC,SAA3B,EAAwCG,GAAG,CAACN,OAAO,CAACE,SAAT,CAAH,CAAuBI,GAAvB,GAA+B,KAA3F,CACAD,MAAM,CAAE,oBADR,CAPA,CAUA;AACA;AACA,CAACA,MAAM,CAAC,kBAAR,CAZA,CAFJ,CADF,EAkBCE,YAAY,CAAC,4DAAD,CAlBb,CAFF,CAsBJ;AACAC,MAAM,CAAC,0CACHX,EAAE,CAAE,CACAC,UAAU,CAAE,CACRO,MAAM,CAAE,kBADA,CAERI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEW,MAAM,CAAEX,OAAO,CAACE,SAAlB,CAAP,CAAsC,CAAtD,CAFP,CADZ,CADF,EAMKK,YAAY,CAAC,+BAAD,CANjB,CAvBF,CAFF,CAJN,CAuCA;AACAK,MAAM,CAAC,4CAAKC,OAAO,CAAC,cAAD,CAAgB,iBAAhB,CAAb,CAxCN,CAyCA;AACAC,YAAY,CAAC,4CAAKC,WAAW,CAAC,OAAD,CAAU,WAAV,CAAuB,UAAvB,CAAmC,oBAAnC,CAAyD,kBAAzD,CAA6E,gBAA7E,OAAjB,CA1CZ,CA2CA;AACAC,MAAM,CAAC,4CAAKH,OAAO,CAAC,wBAAD,CAA2B,iBAA3B,CAAb,CA5CN,CA6CA;AACAI,SAAS,CAAC,0CACNzB,OAAO,CAAE,QADJ,CAELK,EAAE,CAAE,CACAC,UAAU,CACN,CAACW,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEkB,IAAI,CAAElB,OAAO,CAACE,SAAhB,CAAP,CAAoC,CAApD,CAAhB,CACAG,MAAM,CAAE,OADR,CAFJ,CAFC,EAOEc,aAAa,CAAC,4CAAD,CAA+C,gBAA/C,CAPf,CA9CT,CAuDA;AACAC,KAAK,CAAE,CACH5B,OAAO,CAAE,QADN,CAEHC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEC,+BAAI,CAAEvB,OAAD,GAAc,CACtBwB,IAAI,CAAE,OADgB,CAEtBC,KAAK,oDAA6CzB,OAAO,CAACkB,IAArD,CAFiB,CAAd,CAAD,CADP,CAIArB,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAJJ,CADJ,CAFL,CAxDP,CAmEA;AACAC,QAAQ,CAAC,0CACL;AACA9B,EAAE,CAAE,CACAC,UAAU,CAAE,CACR,CAACO,MAAM,CAAE,kBAAT,CACAI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEW,MAAM,CAAEX,OAAO,CAACE,SAAlB,CAAP,CAAsC,CAAtD,CADf,CADQ,CAIR,CAACG,MAAM,CAAC,kBAAR,CAJQ,CADZ,CAFA,EASDE,YAAY,CAAC,uCAAD,CATX,CApER,CA+EA;AACAqB,MAAM,CAAC,4CAAKf,OAAO,CAAC,cAAD,CAAgB,iBAAhB,CAAb,CAhFN,CAiFA;AACAgB,YAAY,CAAC,4CAAKd,WAAW,CAAC,OAAD,CAAU,cAAV,CAA0B,UAA1B,CAAsC,2BAAtC,CAAmE,kBAAnE,CAAuF,gBAAvF,SAAjB,CAlFZ,CAmFA;AACAe,YAAY,CAAC,0CACTtC,OAAO,CAAE,QADD,CAERK,EAAE,CAAE,CACAC,UAAU,CAAE,CACRO,MAAM,CAAE,MADA,CAERI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAE+B,IAAI,CAAE/B,OAAO,CAACE,SAAhB,CAAP,CAAoC,CAApD,CAFP,CADZ,CAFI,EAODK,YAAY,CAAC,oBAAD,CAPX,CApFZ,CA6FA;AACAwB,IAAI,CAAE,CACFvC,OAAO,CAAE,QADP,CAEF;AACIC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEC,+BAAI,CAAEvB,OAAD,GAAc,CACtBwB,IAAI,CAAE,OADgB,CAEtBC,KAAK,2CAAoCzB,OAAO,CAAC+B,IAA5C,KAFiB,CAAd,CAAD,CADP,CAIJlC,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAJA,CADJ,CAHV,CA9FN,CA0GA;AACAM,IAAI,CAAC,0CACDxC,OAAO,CAAE,QADT,CAEAK,EAAE,CAAE,CACAC,UAAU,CAAE,CACR,CAACC,IAAI,CAAGC,OAAD,EAAaiC,QAAQ,CAACjC,OAAO,CAACE,SAAT,CAAR,GAAgCC,SAAhC,EAA6C8B,QAAQ,CAACjC,OAAO,CAACE,SAAT,CAAR,CAA4B+B,QAA5B,GAAyC,IAA1G,CACA5B,MAAM,CAAE,MADR,CADQ,CAIR,CAACN,IAAI,CAAGC,OAAD,EAAaiC,QAAQ,CAACjC,OAAO,CAACE,SAAT,CAAR,GAAgCC,SAAhC,EAA6C8B,QAAQ,CAACjC,OAAO,CAACE,SAAT,CAAR,CAA4B+B,QAA5B,GAAyC,KAA1G,CACA5B,MAAM,CAAE,MADR,CAJQ,CAMR,CAACA,MAAM,CAAE,MAAT,CANQ,CADZ,CAFJ,EAWDE,YAAY,CAAC,kCAAD,CAXX,CA3GJ,CAwHA;AACA2B,IAAI,CAAE,CACF1C,OAAO,CAAE,QADP,CAEEC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,0BAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,CAACrB,MAAM,CAAE,2BAAT,CAAb,CAFA,CADJ,CAFV,CAzHN,CAkIA;AACA+B,MAAM,CAAE,CACJ5C,OAAO,CAAE,QADL,CAEJ;AACIC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,iCAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,2BAAb,CAFA,CADJ,CAHR,CAnIR,CANyD,CAA9D,CAqKP;AAKA;AAEU;AACE;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEC;AACD;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACI;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,8I;;AClcZ;AACA;AAEO,KAAMW,YAAiD,CACrD,CAAG,OAAQ,CAAEC,GAAG,CAAE,6CAAP,CAAX,CACG,QAAS,CAAEA,GAAG,CAAE,qFAAP,CADZ,CAEG,OAAQ,CAAEA,GAAG,CAAE,qFAAP,CAFX,CAGG,MAAO,CAAEA,GAAG,CAAE,qFAAP,CAHV,CAIG,QAAS,CAAEA,GAAG,CAAE,6CAAP,CAJZ,CAKG,QAAS,CAAEA,GAAG,CAAE,6CAAP,CALZ,CAMG,SAAU,CAAEA,GAAG,CAAE,6CAAP,CANb,CAOG,UAAW,CAAEA,GAAG,CAAE,6CAAP,CACX;AARH,CADF,CAaP,KAAMC,aAAiD,CAEvD,CACI,WAAY,CAACC,IAAI,CAAE,wDAAP,CADhB,CAEI,SAAU,CAACA,IAAI,CAAE,qDAAP,CAFd,CAGI,SAAU,CAACA,IAAI,CAAE,qDAAP,CAHd,CAFA,CAQO,QAASC,aAAT,CAAsBC,UAAtB,CAA8C,CACnD,MAAQC,OAAM,CAACC,IAAP,CAAYF,UAAZ,CAAwB,QAAxB,CAAR,CACD,CAEM,KAAMG,WAAoD,CAAI,CACjErD,OAAO,CAAE,MADwD,CAEjEC,MAAM,CAAE,CAEJC,IAAI,CAAE,EAFF,CAGJoD,QAAQ,CAAE,CACNtD,OAAO,CAAE,OADH,CAENC,MAAM,CAAE,CAEJsD,KAAK,CAAE,CACHvD,OAAO,CAAE,QADN,CAEHK,EAAE,CAAE,CACAC,UAAU,CAAE,CACJ,CAACC,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,IAAxG,CACAK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,IAAZ,CAAP,CAA2B,CAA3C,CADf,CAEAC,MAAM,CAAE,iCAFR,CADI,CAKJ,CAACN,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,KAAxG,CACAK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,KAAZ,CAAP,CAA2B,CAA3C,CADf,CAEAC,MAAM,CAAE,6BAFR,CALI,CAQJ,CAACA,MAAM,CAAE,oCAAT,CAEA;AAEA;AAZI,CADZ,CAFD,CAkBCZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,kEAAD,CADN,CAEJtC,EAAE,CAAE,CAAC6B,SAAS,CAAG,KAAb,CAFA,CADJ,CAKJsB,GAAG,CAAE,CACD1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CADV,CALD,CAQJ0B,SAAS,CAAE,CACP3B,KAAK,CAAEa,GAAG,CAAC,wDAAD,CADH,CAEPtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFG,CARP,CAlBT,CAFH,CAmCJwB,YAAY,CAAE,CACV1D,OAAO,CAAE,QADC,CAEVK,EAAE,CAAE,CACAC,UAAU,CAAE,CAAC,CACTC,IAAI,CAAGC,OAAD,EAAaqC,WAAW,CAACrC,OAAO,CAACE,SAAT,CAAX,GAAmCC,SAAnC,EAAgD,QAAUkC,WAAW,CAACrC,OAAO,CAACE,SAAT,CAAX,EAAkC,EAA5C,CAD1D,CAC2G;AACpHO,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEsC,GAAG,CAAED,WAAW,CAACrC,OAAO,CAACE,SAAT,CAAX,CAA+BoC,GAAtC,CAAP,CAAoD,CAApE,CAFN,CAE6E;AACtFjC,MAAM,CAAE,+BAHC,CAAD,CAIR,CAACA,MAAM,CAAE,2CAAT,CAJQ,CADZ,CAFM,CAUVZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,0CAAD,CADN,CAEJtC,EAAE,CAAE,CAAC6B,SAAS,CAAG,KAAb,CAFA,CADJ,CAKJsB,GAAG,CAAE,CACD1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CADV,CALD,CAQJ0B,SAAS,CAAE,CACP3B,KAAK,CAAEa,GAAG,CAAC,wDAAD,CADH,CAEPtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFG,CARP,CAVE,CAnCV,CA2DJyB,UAAU,CAAE,CACR3D,OAAO,CAAE,QADD,CAERC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,+CAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,MAAb,CAFA,CADJ,CAKJ0B,IAAI,CAAE,CACF9B,KAAK,CAAEC,+BAAI,CAAEvB,OAAD,8CACLyC,YAAY,CAACzC,OAAO,CAACsC,GAAT,CADP,CAAD,CADT,CAIFzC,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAJF,CALF,CAFA,CA3DR,CA2EJ2B,QAAQ,CAAE,CACN7D,OAAO,CAAE,QADH,CAENK,EAAE,CAAE,CACAC,UAAU,CAAE,CAAC,CAACC,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,IAAxG,CACTK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,IAAZ,CAAP,CAA2B,CAA3C,CADN,CAETC,MAAM,CAAE,gCAFC,CAAD,CAIR,CAACN,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,KAAxG,CACAK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,KAAZ,CAAP,CAA2B,CAA3C,CADf,CAEAC,MAAM,CAAE,kCAFR,CAJQ,CAOR,CAACA,MAAM,CAAE,uCAAT,CAPQ,CADZ,CAFE,CAYVZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,0DAAD,CADN,CAEAtC,EAAE,CAAE,CAAC6B,SAAS,CAAG,KAAb,CAFJ,CADJ,CAKAsB,GAAG,CAAE,CACD1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CADV,CALL,CAQA0B,SAAS,CAAE,CACP3B,KAAK,CAAEa,GAAG,CAAC,wDAAD,CADH,CAEPtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFG,CARX,CAZE,CA3EN,CAsGJ4B,WAAW,CAAE,CACT9D,OAAO,CAAE,QADA,CAETK,EAAE,CAAE,CACAC,UAAU,CAAE,CAAC,CACTC,IAAI,CAAGC,OAAD,EAAauC,YAAY,CAACvC,OAAO,CAACE,SAAT,CAAZ,GAAoCC,SAApC,EAAiD,SAAWoC,YAAY,CAACvC,OAAO,CAACE,SAAT,CAAZ,EAAmC,EAA9C,CAD3D,CAC8G;AACvHO,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEwC,IAAI,CAAED,YAAY,CAACvC,OAAO,CAACE,SAAT,CAAZ,CAAgCsC,IAAxC,CAAP,CAAuD,CAAvE,CAFN,CAEgF;AACzFnC,MAAM,CAAE,8BAHC,CAAD,CAIR,CAACA,MAAM,CAAE,0CAAT,CAJQ,CADZ,CAFK,CASTZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,4DAAD,CADN,CAEAtC,EAAE,CAAE,CAAC6B,SAAS,CAAG,KAAb,CAFJ,CADJ,CAKAsB,GAAG,CAAE,CACD1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CADV,CALL,CAQA0B,SAAS,CAAE,CACP3B,KAAK,CAAEa,GAAG,CAAC,wDAAD,CADH,CAEPtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFG,CARX,CATC,CAtGT,CA8HJ6B,SAAS,CAAE,CACP/D,OAAO,CAAE,QADF,CAEPC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,0BAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,MAAb,CAFA,CADJ,CAKJ0B,IAAI,CAAE,CACF9B,KAAK,CAAEC,+BAAI,CAAEvB,OAAD,8CACLyC,YAAY,CAACzC,OAAO,CAACwC,IAAT,CADP,CAAD,CADT,CAIF3C,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAJF,CALF,CAFD,CA9HP,CA8IJ8B,aAAa,CAAE,CACXhE,OAAO,CAAE,QADE,CAEXK,EAAE,CAAE,CACA6B,SAAS,CAAE,CAAC,CAAC3B,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,IAAxG,CACRK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,IAAZ,CAAP,CAA2B,CAA3C,CADP,CAERC,MAAM,CAAE,uCAFA,CAAD,CAIP,CAACN,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,KAAxG,CACAK,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEI,QAAQ,CAAE,KAAZ,CAAP,CAA2B,CAA3C,CADf,CAEAC,MAAM,CAAE,gCAFR,CAJO,CAOP,CAACA,MAAM,CAAE,4CAAT,CAPO,CADX,CAFO,CAYfZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,+CAAD,CADN,CAEAtC,EAAE,CAAE,CAAC6B,SAAS,CAAG,KAAb,CAFJ,CADJ,CAKAsB,GAAG,CAAE,CACD1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CADV,CALL,CAQA0B,SAAS,CAAE,CACP3B,KAAK,CAAEa,GAAG,CAAC,wDAAD,CADH,CAEPtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFG,CARX,CAZO,CA9IX,CAwKJ+B,kBAAkB,CAAE,CAChBjE,OAAO,CAAE,QADO,CAEhBC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,oCAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,MAAb,CAFA,CADJ,CAKJ0B,IAAI,CAAE,CACF9B,KAAK,CAAEC,+BAAI,CAAEvB,OAAD,8CACLyC,YAAY,CAAC,2BAAD,CADP,CAAD,CADT,CAIF5C,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAJF,CALF,CAFQ,CAxKhB,CAuLJgC,WAAW,CAAE,CACTlE,OAAO,CAAE,QADA,CAETC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,8CAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,gBAAb,CAFA,CADJ,CAFC,CAvLT,CAFF,CAHN,CAFyD,CAA9D,C;;;;;ACvBP;AAQA;AACA;AACO,KAAMzB,QAAoD,CACzD,CAAG,YAAa,CAAEG,QAAQ,CAAE,IAAZ,CAAhB,CACA,gBAAiB,CAAEA,QAAQ,CAAE,IAAZ,CADjB,CAEA,MAAO,CAAEA,QAAQ,CAAE,IAAZ,CAFP,CAGA,OAAQ,CAAEA,QAAQ,CAAE,IAAZ,CAHR,CAIA,MAAO,CAAEA,QAAQ,CAAE,IAAZ,CAJP,CAKA,OAAQ,CAAEA,QAAQ,CAAE,IAAZ,CALR,CAMA;AACA,KAAM,CAAEA,QAAQ,CAAE,KAAZ,CAPN,CAQA,MAAO,CAAEA,QAAQ,CAAE,KAAZ,CARP,CASA,OAAQ,CAAEA,QAAQ,CAAE,KAAZ,CATR,CAUA,SAAU,CAAEA,QAAQ,CAAE,KAAZ,CAVV,CAWA,WAAY,CAAEA,QAAQ,CAAE,KAAZ,CAXZ,CAYA,gBAAiB,CAAEA,QAAQ,CAAE,KAAZ,CAZjB,CADD,CAiBA,KAAMiC,gBAAiD,CACtD,CAAG,OAAQ,CAAEC,GAAG,CAAE,6CAAP,CAAX,CACA,QAAS,CAAEA,GAAG,CAAE,qFAAP,CADT,CAEA,OAAQ,CAAEA,GAAG,CAAE,qFAAP,CAFR,CAGA,MAAO,CAAEA,GAAG,CAAE,qFAAP,CAHP,CAIA,QAAS,CAAEA,GAAG,CAAE,6CAAP,CAJT,CAKA,QAAS,CAAEA,GAAG,CAAE,6CAAP,CALT,CAMA,SAAU,CAAEA,GAAG,CAAE,6CAAP,CANV,CAOA,UAAW,CAAEA,GAAG,CAAE,6CAAP,CACX;AARA,CADD,CAaA,KAAML,SAAqD,CAC1D,CAAG,WAAY,CAAEA,QAAQ,CAAE,IAAZ,CAAf,CACG,OAAQ,CAAEA,QAAQ,CAAE,IAAZ,CADX,CAEG,qBAAsB,CAAEA,QAAQ,CAAE,IAAZ,CAFzB,CAGG,eAAgB,CAAEA,QAAQ,CAAE,IAAZ,CAChB;AAJH,CADD,CAQA,KAAM3B,IAA2C,CAChD,CAAG,OAAQ,CAAEA,GAAG,CAAE,IAAP,CAAX,CACG,WAAY,CAAEA,GAAG,CAAE,IAAP,CADf,CAEG,MAAO,CAAEA,GAAG,CAAE,IAAP,CAFV,CAGG,UAAW,CAAEA,GAAG,CAAE,IAAP,CACX;AAJH,CADD,CAQP;AACA;AAEAqD,kCAAO,CAAC,CACJrB,GAAG,CAAE,gCADD,CAEJsB,MAAM,CAAE,KAFJ,CAAD,CAAP,CAMA;AAEO,QAASzB,IAAT,CAAa0B,IAAb,CAAyD,CAC5D,MAAOtC,gCAAI,CAAEuC,QAAD,GAA2B,CAAEtC,IAAI,CAAE,OAAR,CAAiBC,KAAK,CAAEoC,IAAxB,CAA3B,CAAD,CAAX,CACH,CAEM,QAASE,WAAT,EAAgD,CACnD,MAAOxC,gCAAI,CAAC,QAAD,CAAX,CACH,CAEM,QAAShB,aAAT,CAAsBc,MAAtB,CAAgF,CACnF,MAAQ,CACJ7B,OAAO,CAAE,QADL,CAEJC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAACd,MAAD,CADN,CAEJxB,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFA,CADJ,CAKJsB,GAAG,CAAE,CAAC1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CAAZ,CALD,CAFJ,CAAR,CAUH,CAEM,QAASJ,cAAT,CAAuBE,MAAvB,CAAuC2C,KAAvC,CAAgG,CACnG,MAAQ,CACJxE,OAAO,CAAE,QADL,CAEJC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAACd,MAAD,CADN,CAEJxB,EAAE,CAAE,CAAE6B,SAAS,CAAE,KAAb,CAFA,CADJ,CAKJsB,GAAG,CAAE,CAAC1B,KAAK,CAAEC,+BAAI,CAAC,QAAD,CAAZ,CALD,CAOJ0C,IAAI,CAAE,CACF3C,KAAK,CAAEa,GAAG,CAAC,6BAAD,CADR,CAEFtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,CAACsC,KAAD,CAAO,iBAAP,CAAb,CAFF,CAPF,CAWJE,OAAO,CAAC,CACJ5C,KAAK,CAAEa,GAAG,CAAC,EAAD,CADN,CAEJtC,EAAE,CAAE,CAAE6B,SAAS,CAAE,CAACsC,KAAD,CAAO,oBAAP,CAAb,CAFA,CAXJ,CAFJ,CAAR,CAkBF,CAGK,QAASG,QAAT,CAAiBC,OAAjB,CAAkCC,MAAlC,CAA2F,CAC9F,MAAQ,CACJ7E,OAAO,CAAE,QADL,CAEJC,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEC,+BAAI,CAAE,CAACC,IAAI,CAAE,OAAP,CACTC,KAAK,CAAE2C,OADE,CAAF,CADP,CAGHvE,EAAE,CAAE,CAAE6B,SAAS,CAAE2C,MAAb,CAHD,CADJ,CAFJ,CAAR,CAUF,CAEK,QAASxD,QAAT,CAAiByD,MAAjB,CAAiCC,OAAjC,CAA2F,CAC9F,MAAQ,CACAC,MAAM,CAAE,CACJC,EAAE,CAAE,MADA,CAEJC,GAAG,CAAE,CAAC1E,OAAD,CAAU2E,KAAV,GAAoBC,UAAU,CAAC5E,OAAO,CAACW,MAAT,CAF/B,CAGJkE,MAAM,CAAE,CACJpE,OAAO,CAAE,CAACC,iCAAM,CAAC,CAACV,OAAD,CAAU2E,KAAV,GAAoB,CAAE,MAAQ,CAAChE,MAAM,CAAEgE,KAAK,CAACG,IAAN,CAAWC,MAAX,CAAkBC,IAA3B,CAAR,CAA0C,CAAjE,CAAP,CACT,CAAChF,OAAD,CAAsB2E,KAAtB,GAAqCM,OAAO,CAACC,GAAR,CAAYP,KAAK,CAACG,IAAlB,CAD5B,CADL,CAGJzE,MAAM,CAAEiE,MAHJ,CAHJ,CAQJa,OAAO,CAAE,CACL9E,MAAM,CAAEkE,OADH,CAEL9D,OAAO,CAAE,CAACT,OAAD,CAAU2E,KAAV,GAAoBM,OAAO,CAACC,GAAR,CAAYP,KAAK,CAACG,IAAlB,CAFxB,CARL,CADR,CAAR,CAcF,CAEK,QAAS/D,YAAT,CAAqBqE,KAArB,CAAoCC,OAApC,CAAqDC,KAArD,CAAoEC,OAApE,CAAqFC,KAArF,CAAoGC,KAApG,CAAmHrB,OAAnH,CAA+K,CAClL,MAAQ,CACJ5E,OAAO,CAAE,QADL,CAEIK,EAAE,CAAE,CACA6B,SAAS,CAAE,CACH,CAAC3B,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmByE,KAAvC,CAA8C/E,MAAM,CAAEgF,OAAtD,CADG,CAEH,CAACtF,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB2E,KAAvC,CAA8CjF,MAAM,CAAEkF,OAAtD,CAFG,CAGH,CAACxF,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,MAAvC,CAA+CN,MAAM,CAAE,CAACoF,KAAD,CAAO,iBAAP,CAAvD,CAHG,CAIH,CAAC1F,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,KAAvC,CAA8CN,MAAM,CAAE,CAACoF,KAAD,CAAO,oBAAP,CAAtD,CAJG,CAKH,CAAEpF,MAAM,CAAEmF,KAAV,CALG,CADX,CAFR,CAWI/F,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEC,+BAAI,CAAE,CAACC,IAAI,CAAE,OAAP,CAAgBC,KAAK,CAAE2C,OAAvB,CAAF,CADP,CADJ,CAXZ,CAAR,CAiBF,CAGF,KAAMsB,WAAwC,CAAGnE,+BAAI,CAAEvB,OAAD,GAA0B,CAC5EwB,IAAI,CAAE,OADsE,CAC7DC,KAAK,WAAKzB,OAAO,CAAC2F,OAAb,CADwD,CAA1B,CAAD,CAArD,CAKA,KAAMC,QAAO,CAAGC,kCAAO,CAA4B,CAC/CpB,EAAE,CAAE,MAD2C,CAE/CjD,IAAI,CAAE,UAFyC,CAG/C/B,MAAM,CAAE,CACJ;AACAqG,IAAI,CAAE,CACFtG,OAAO,CAAE,MADP,CAEFC,MAAM,CAAE,CACJ;AACAC,IAAI,CAAE,CAACG,EAAE,CAAE,CAACkG,KAAK,CAAE,SAAR,CAAL,CAFF,CAGJ;AACAC,OAAO,CAAC,0CACJnG,EAAE,CAAE,CACAC,UAAU,CAAE,CACRO,MAAM,CAAE,OADA,CAERI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEW,MAAM,CAAEX,OAAO,CAACE,SAAlB,CAAP,CAAsC,CAAtD,CAFP,CADZ,CADD,EAMAK,YAAY,CAAC,4BAAD,CANZ,CAJH,CAYJ0F,KAAK,CAAC,4CAAKpF,OAAO,CAAC,aAAD,CAAe,SAAf,CAAb,CAZD,CAaJ;AACAqF,WAAW,CAAE,CACT1G,OAAO,CAAE,QADA,CAETK,EAAE,CAAE,CACA6B,SAAS,CAAE,CACP,CAAC3B,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,UAAvC,CAAmDN,MAAM,CAAE,CAAC,oBAAD,CAAuB,MAAvB,CAA3D,CADO,CAEP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,UAAvC,CAAmDN,MAAM,CAAE,CAAC,oBAAD,CAAuB,MAAvB,CAA3D,CAFO,CAGP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,MAAvC,CAA+CN,MAAM,CAAE,CAAC,qBAAD,CAAwB,MAAxB,CAAvD,CAHO,CAIP;AACA,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,OAAvC,CAAgDN,MAAM,CAAE,CAAC,wBAAD,CAA2B,MAA3B,CAAxD,CALO,CAMP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,QAAvC,CAAiDN,MAAM,CAAE,KAAzD,CANO,CAOP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,KAAvC,CAA8CN,MAAM,CAAE,KAAtD,CAPO,CAQP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,SAAvC,CAAkDN,MAAM,CAAE,SAA1D,CARO,CASP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,OAAvC,CAAgDN,MAAM,CAAE,CAAC,iCAAD,CAAoC,MAApC,CAAxD,CATO,CAUP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,OAAvC,CAAgDN,MAAM,CAAE,CAAC,gCAAD,CAAmC,MAAnC,CAAxD,CAVO,CAWP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,WAAvC,CAAoDN,MAAM,CAAE,CAAC,uCAAD,CAA0C,MAA1C,CAA5D,CAXO,CAaP,CAACN,IAAI,CAAGC,OAAD,EAAaA,OAAO,CAACW,MAAR,GAAmB,MAAvC,CAA+CN,MAAM,CAAE,MAAvD,CAbO,CAeP,CAACA,MAAM,CAAE,SAAT,CAfO,CADX,CAFK,CAoBTZ,MAAM,CAAE,CACJ4B,MAAM,CAAE,CACJC,KAAK,CAAEa,GAAG,CAAC,KAAD,CADN,CADJ,CApBC,CAdT,CAwCJ;AACAgE,GAAG,CAAC,0CACJ;AACA;AACA;AACItG,EAAE,CAAE,CACAC,UAAU,CAAE,CACRO,MAAM,CAAE,OADA,CAERI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEW,MAAM,CAAEX,OAAO,CAACE,SAAlB,CAAP,CAAsC,CAAtD,CAFP,CADZ,CAJL,EASIK,YAAY,CAAC,mEAAD,CAThB,CAzCC,CAoDJ;AACA6F,OAAO,CAAC,0CACR;AACA;AACA;AACA;AACIvG,EAAE,CAAE,CACAC,UAAU,CAAE,CACRO,MAAM,CAAE,iCADA,CAERI,OAAO,CAAEC,iCAAM,CAAEV,OAAD,EAAa,CAAE,MAAO,CAAEW,MAAM,CAAEX,OAAO,CAACE,SAAlB,CAAP,CAAsC,CAAtD,CAFP,CADZ,CALD,EAUAK,YAAY,CAAC,oDAAD,CAVZ,CArDH,CAiEJ;AACA0D,IAAI,CAAC,0CACDpE,EAAE,CAAE,CACAC,UAAU,CAAE,CACR,CAACC,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,IAAxG,CACAC,MAAM,CAAE,KADR,CADQ,CAIR,CAACN,IAAI,CAAGC,OAAD,EAAaC,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,GAA+BC,SAA/B,EAA4CF,OAAO,CAACD,OAAO,CAACE,SAAT,CAAP,CAA2BE,QAA3B,GAAwC,KAAxG,CACAC,MAAM,CAAE,SADR,CAJQ,CAOR,CAACA,MAAM,CAAE,KAAT,CAPQ,CADZ,CADJ,EAWDE,YAAY,CAAC,4CAAD,CAXX,CAlEA,CA+ER;AACI2D,OAAO,CAAC,4CAAKC,OAAO,CAAC,mCAAD,CAAqC,YAArC,CAAb,CAhFH,CAFN,CAFF,CAuFJ;AACAkC,GAAG,CAAC,4CACD9G,UADA,CAxFC,CA2FJ;AACA+G,GAAG,CAAC,4CACDzD,UADA,CA5FC,CA+FJ;AACA0D,MAAM,CAAE,CACJ/G,OAAO,CAAE,MADL,CAEJC,MAAM,CAAE,CACJ;AACAC,IAAI,CAAE,CACFG,EAAE,CAAE,CACA2G,MAAM,CAAE,aADR,CAEAC,KAAK,CAAE,CACHpG,MAAM,CAAE,UADL,CAEHI,OAAO,CAAEC,iCAAM,CAAC,CAACoD,QAAD,CAAWa,KAAX,GAAqB,CAAE,MAAO,CAAE+B,SAAS,CAAE/B,KAAK,CAAClD,KAAnB,CAAP,CAAmC,CAA3D,CAFZ,CAFP,CADF,CAFF,CAWJ;AACAkF,WAAW,CAAE,CACfnH,OAAO,CAAE,UADM,CAET8B,KAAK,CAAE,UAFE,CAGTsF,IAAI,CAAE,SAHG,CAIT/G,EAAE,CAAE,CACAgH,SAAS,CAAE,CACPpG,OAAO,CAAE,CAAC,cAAD,CACLC,iCAAM,CAAC,CAACoD,QAAD,CAAWa,KAAX,GAAqB,CAAE,MAAO,CAAEzE,SAAS,CAAEyE,KAAK,CAAClD,KAAnB,CAAP,CAAmC,CAA3D,CADD,CADF,CAGPpB,MAAM,CAAE,QAHD,CADX,CAMAP,UAAU,CAAE,MANZ,CAJK,CAYTL,MAAM,CAAE,CACbqH,QAAQ,CAAE,EADG,CAGJC,KAAK,CAAE,CACHzF,KAAK,CAAEC,+BAAI,CAAC,YAAD,CADR,CAHH,CAZC,CAZT,CAgCJ;AACAyF,QAAQ,CAAE,CACN1F,KAAK,CAAE,UADD,CAENzB,EAAE,CAAE,CACA6B,SAAS,CAAE,MADX,CAFE,CAjCN,CAFJ,CAhGJ,CAHuC,CAA5B,CAgJnB,CACIjB,OAAO,CAAE,CACLwG,YAAY,CAAGjH,OAAD,EAAyB,CACnC,0CACAiF,OAAO,CAACC,GAAR,CAAY,WAAalF,OAAO,CAACE,SAAjC,EACH,CAJI,CAKLgH,IAAI,CAAE,IAAM,CACRjC,OAAO,CAACC,GAAR,CAAY,MAAZ,EACH,CAPI,CAQLiC,SAAS,CAAGnH,OAAD,EAAyB,CAChC,kCACAiF,OAAO,CAACC,GAAR,CAAY,kBAAoBlF,OAAO,CAACoH,OAAR,CAAgBrC,MAAhB,CAAuBC,IAAvD,EACH,CAXI,CADb,CAhJmB,CAAvB,CAsKA,KAAMqC,eAAc,CAAIC,KAAD,EAA+B,CAClD,OAAQ,IAAR,EACI,IAAKA,MAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoB,CAAEjB,MAAM,CAAE,aAAV,CAApB,CAAL,CACI,mBACI,uHAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,eAAhC,CACI,KAAK,CAAE,CAAEkB,SAAS,CAAE,oBAAb,CADX,EACoDH,KADpD,uBADJ,CAMJ,IAAKA,MAAK,CAACC,KAAN,CAAYC,OAAZ,CAAoB,CAAEjB,MAAM,CAAE,UAAV,CAApB,CAAL,CACI,mBACI,8EAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,eAAhC,CACI,KAAK,CAAE,CAAEkB,SAAS,CAAE,uBAAb,CADX,EACuDH,KADvD,EADJ,CAMJ,QACI,mBACI,uHAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,eAAhC,EAAoDA,KAApD,+BADJ,CAhBR,CAsBH,CAvBD,CAyBA,QAASI,IAAT,EAAe,2BACyBC,kCAAkB,CAAC,CACnDC,KAAK,CAAE,IAAM,CACTrG,IAAI,CAAC,WAAD,CAAJ,CACH,CAHkD,CAAD,CAD3C,CACHsG,KADG,qBACHA,KADG,CACIC,MADJ,qBACIA,MADJ,CACYd,QADZ,qBACYA,QADZ,6BAMyBe,oCAAoB,CAAC,CACrDC,QAAQ,CAAGC,MAAD,EAAiB,CACvB1G,IAAI,CAAC,CAAEC,IAAI,CAAE,WAAR,CAAqBC,KAAK,CAAEwG,MAA5B,CAAD,CAAJ,CACH,CAHoD,CAAD,CAN7C,CAMHlE,MANG,uBAMHA,MANG,CAMKmE,SANL,uBAMKA,SANL,CAMgBC,IANhB,uBAMgBA,IANhB,mBAWsBC,wCAAU,CAACxC,OAAD,CAAU,CACjDyC,QAAQ,CAAE,IADuC,CAEjD5H,OAAO,CAAE,CACL6H,QAAQ,CAAEC,sCAAQ,CAAC,IAAM,CACrBtD,OAAO,CAACC,GAAR,CAAY,6BAAZ,EACAnB,MAAM,CAAC,CACHyE,cAAc,CAAE,KADb,CAEHC,UAAU,CAAE,IAFT,CAAD,CAAN,CAIH,CANiB,CADb,CAQLC,OAAO,CAAEH,sCAAQ,CAAC,IAAM,CACpBtD,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACAiD,IAAI,GACP,CAHgB,CARZ,CAYLQ,YAAY,CAAEJ,sCAAQ,CAAEvI,OAAD,EAAa,CAChCiF,OAAO,CAACC,GAAR,CAAY,eAAZ,EACA0D,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,UAApB,CAAiC/I,OAAO,CAACE,SAAzC,CACH,CAHqB,CAZjB,CAgBL8I,QAAQ,CAAET,sCAAQ,CAAC,CAACvI,OAAD,CAAUiJ,MAAV,GAAqB,CACpChE,OAAO,CAACC,GAAR,CAAY,aAAZ,EACA2C,KAAK,CAAC,CAAEhE,IAAI,CAAE7D,OAAO,CAAC0G,SAAhB,CAAD,CAAL,CACH,CAHiB,CAhBb,CAoBLwC,SAAS,CAAEX,sCAAQ,CAAC,CAACvI,OAAD,CAAUiJ,MAAV,GAAqB,CACrChE,OAAO,CAACC,GAAR,CAAY,aAAZ,EACA4C,MAAM,GACT,CAHkB,CApBd,CAFwC,CAAV,CAXhC,sEAWJqB,OAXI,iBAWK5H,IAXL,iBAWW6H,OAXX,iBAyCX,mBACI,kCAAK,SAAS,CAAC,KAAf,uBACI,2BAAC,cAAD,EAAgB,KAAK,CAAED,OAAvB,CAAgC,OAAO,CAAE,IAAM5H,IAAI,CAAC,OAAD,CAAnD,EADJ,EADJ,CAKH,EAGD;AACA,MACA,KAAM8H,SAAQ,CAAG,sCAAjB,CACA,KAAMC,QAAO,CAAG,8CAAhB,CACO,KAAM1E,WAAU,CAAIf,IAAD,EACtB0F,KAAK,CAAC,GAAIC,QAAJ,CAAYH,QAAQ,CAAGC,OAAvB,CAAgC,CAClCG,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CAAE,SAAU,wBAAZ,CAFyB,CAGlCb,IAAI,wBAAehF,IAAf,OAH8B,CAAhC,CAAD,CAAL,CAKK8F,IALL,CAKU7E,IAAI,EAAIA,IAAI,CAAC8E,IAAL,EALlB,CADG,CAQP,KAAMC,YAAW,CAAGjB,QAAQ,CAACkB,cAAT,CAAwB,MAAxB,CAApB,CACAC,mBAAA,cACI,2BAAC,GAAD,IADJ,CAEIF,WAFJ,E","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import { MachineConfig, send, assign } from \"xstate\";\nimport { Queries, bye, Conditional, promptAndAsk, finished, promptHelpBye, say, grammar } from \"./index\";\n\n\n\n\n\n\n// export function promptHelpBye(prompt: string, idled: string): MachineConfig<SDSContext, any, SDSEvent> {\n//     return ({\n//         initial: 'prompt',\n//         states: {\n//             prompt: {\n//                 entry: say(prompt),\n//                 on: { ENDSPEECH: 'ask' }\n//             },\n//             ask: {entry: send('LISTEN')\n//             },\n//             help: {\n//                 entry: say(\"We may be miscommunicating.\"),\n//                 on: { ENDSPEECH: [idled,\"#root.init.help\"] }\n//             },\n//             goodbye:{\n//                 entry: say(\"\"),\n//                 on: { ENDSPEECH: [idled,\"#root.init.goodbye\" ] }\n//             }\n//     }}\n// )}\n\n\n\n\n\nlet num = 0\n\nexport const dmMachine1: MachineConfig<SDSContext, any, SDSEvent> = ({\n    // NOTE: regarding the queries:\n    // There are more efficient ways to implement them, however, \n    // Yet we decided to have a grammar as well as querying in order to see\n    // which implementation will yield better results\n    initial: 'idle',\n    states: {\n        // ...\n        idle: {},\n        // ...\n        positive: {\n            initial: \"quest1\",\n            states: {\n                // .... // ...\n                quest1: {\n                    on: {\n                        RECOGNISED: \n                            [\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            target: \"#root.dm1.create_do\"},\n\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            target: \"#root.dm1.if_ideas\"},\n\n                            {cond: (context) => bye[context.recResult] !== undefined && bye[context.recResult].bye === false,\n                            target: \"#root.dm1.if_ideas\"},\n\n                            // {cond: (context) => context.option === 'help', target: \".help\"},\n                            // {cond: (context) => context.option === 'bye', target: \".goodbye\"},\n                            {target:'#root.dm1.others'}\n                            ]\n                        },\n                    ...promptAndAsk(\"I suppose you could do something productive. Do you agree?\")\n                },\n                // .... // ...\n                quest2: {\n                    on: {\n                        RECOGNISED: {\n                            target: '#root.dm1.query3',\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                        ...promptAndAsk(\"So what would you like to do?\")\n                    }\n                }\n            },\n            // ....\n            query1: {...Queries('conditional1',\"#root.init.help\")},\n            // ....\n            conditional1: {...Conditional('agree', \"create_do\", 'disagree', \"#root.dm1.if_ideas\", \"#root.dm1.others\", '#root.dm1.idle', `Ok.`)},\n            // ....\n            query3: {...Queries(\"#root.init.distributor\", \"#root.init.help\")},\n            //...\n            create_do:{\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: \n                        {actions: assign((context) => { return { task: context.recResult } }),\n                        target: \"to_do\"}\n                    },\n                    ...promptHelpBye(\"Tell me the things you have to accomplish.\", '#root.dm1.idle')\n            },\n            // ...\n            to_do: {\n                initial: \"prompt\",\n                states: {\n                    prompt: {\n                        entry: send((context) => ({\n                            type: \"SPEAK\",\n                            value:`Now go and complete the following tasks: ${context.task}` })),\n                            on: { ENDSPEECH: '#root.dm1.wait'},  \n                        }\n                    }\n            },\n            // ...\n            if_ideas: {\n                // Note to self: help/bye implemented (uses conditional)\n                on: {\n                    RECOGNISED: [\n                        {target: '#root.dm1.query2',\n                        actions: assign((context) => { return { option: context.recResult } })},\n                        \n                        {target:'#root.dm1.others'}\n                    ]},\n                ...promptAndAsk(\"Then how about working on your ideas?\")\n            },\n            // ....\n            query2: {...Queries('conditional2',\"#root.init.help\")},\n            // ....\n            conditional2: {...Conditional('agree', \"create_ideas\", 'disagree', \"#root.dm1.positive.quest2\", \"#root.dm1.others\", '#root.dm2.idle', `Cool.`)},\n            // ...\n            create_ideas:{\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: {\n                        target: \"idea\",\n                        actions: assign((context) => { return { idea: context.recResult } }),\n                    }},\n                    ...promptAndAsk(\"Tell me your idea.\")\n                },\n            // ...\n            idea: {\n                initial: \"prompt\",\n                // on: {ENDSPEECH: ['#root.dm1.idle']},\n                    states: {\n                        prompt: {\n                            entry: send((context) => ({\n                                type: \"SPEAK\",\n                                value:`You should work on your idea of ${context.idea}.` })),\n                            on: { ENDSPEECH: '#root.dm1.wait'}\n                            }\n                }\n            },\n            // ...\n            wait: {\n                initial: \"prompt\",\n                on: {\n                    RECOGNISED: [\n                        {cond: (context) => finished[context.recResult] !== undefined && finished[context.recResult].finished === true,\n                        target: \"done\"},\n\n                        {cond: (context) => finished[context.recResult] !== undefined && finished[context.recResult].finished === false,\n                        target: \"wait\"},\n                        {target: 'wait'}]  \n                },\n            ...promptAndAsk(\"Say 'finished', when you're done\")\n            },\n            // ...\n            done: {\n                initial: \"prompt\",\n                    states: {\n                        prompt: {\n                            entry: say(\"Good job. Time to relax.\"),\n                            on: { ENDSPEECH: {target: '#root.dm1.positive.quest2'}},\n                        }\n                    }\n            },\n            // ...\n            others: {\n                initial: \"prompt\",\n                // on: {ENDSPEECH: '#root.goodbbye'},\n                    states: {\n                        prompt: {\n                            entry: say(\"Umm, you said something strange\"),\n                            on: { ENDSPEECH: '#root.dm1.positive.quest2'},\n                        }\n                    }\n            }\n    }}\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ONLY DRAFTS\n\n\n\n\n// done: {...Endings(\"Congratulations on your accomplishment!\",\"#root.init\")},\n\n          // annoy:{\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: [\n            //             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n            //             target: \"done\"},\n\n            //             {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n            //             target: \".wait\"}],\n                    \n            //         // WAIT: '.wait'\n\n            //         }\n            //     },\n\n             // ...\n            // annoy: {\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: [\n            //             {cond: (context) => context.option === 'agrreement', target: \"done\"},\n\n            //             {cond: (context) => context.option === 'disagreement', target: \".wait\"},\n                        \n            //             {target: \".wait\"}], \n\n            //         WAIT: '.prompt'\n            //     },\n            //     states: {\n            //         prompt: {\n            //             entry: say(\"Have you done your task yet?\"),\n            //             on: { ENDSPEECH: \"ask\" }\n            //         },\n            //         ask: {\n            //             entry: [ send('LISTEN'), send('WAIT', {delay: 5000})]\n            //         },\n            //         // wait2: {entry: [ send('WAIT', {delay: 3000})]},\n            //         wait: {\n            //             entry: [\n            //                 say('Hm.')\n            //             ],\n            //             on: {\n            //                 ENDSPEECH: [\n            //                     {cond: () => (num++) <= 2, target: 'prompt'},\n            //                     {target: '#root.dm1.done'}\n            //                 ]\n            //             }\n            //         }\n            //     }\n            // },\n\n\n            // ----\n\n            // quest1: {\n                //     on: {\n                //         RECOGNISED: [\n                //                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                //                 actions: assign((context) => { return { approval: true } }),\n                //                 target: \"#root.dm1.create_do\"},\n            \n                //                 {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                //                 actions: assign((context) => { return { approval: false} }),\n                //                 target: \"#root.dm1.if_ideas\"},\n\n                //                 {target: \"#root.dm1.done.others\"}\n\n                //                 // {cond: (context) => context.option === 'help', target: '.help'}\n                //                 ]\n                //         },\n                //         ...promptHelpBye(\"I suppose you could do something productive. Do you agree?\")\n                //         },\\\n\n\n\n                // ------\n\n                // done: {\n                //     initial: \"prompt\",\n                //     // on: {ENDSPEECH: ['#root.dm1.idle']},\n                //         states: {\n                //             prompt: {\n                //                 entry: say(\"Congratulations on your accomplishment! Here's a reward\"),\n                //                 on: { ENDSPEECH: ['#root.dm1.idle', '#root.init.help.goodbye']}\n                //         }, \n                //             others: {\n                //                 entry: say(\"Ummm, you said something strange\"),\n                //                 on: { ENDSPEECH: '#root.dm1.positive.quest2'}\n                //                 }\n                //         }\n                //     }   \n\n\n                // ------\n\n\n                // idea: {\n                //     initial: \"prompt\",\n                //     // on: {ENDSPEECH: ['#root.dm1.idle']},\n                //         states: {\n                //             prompt: {\n                //                 entry: send((context) => ({\n                //                     type: \"SPEAK\",\n                //                     value:`You should work on your idea of ${context.idea}. Say 'finished', when you're done` })),\n                //                 on: { ENDSPEECH: ['#root.dm1.idea_wait']}\n                //             // },\n                //     //         elevator: {\n                //     //             entry: send(openInNewTab('https://www.youtube.com/watch?v=VBlFHuCzPgY&t=3s&ab_channel=AntoineB')),\n                //     //             on: { ENDSPEECH: '#root.dm1.idea_wait'}\n                //                 }\n                //     }\n                // }\n\n                // ------\n\n            // annoy: {\n            //     initial: \"prompt\",\n            //     on: {\n            //         RECOGNISED: {\n            //             target: \"conditional3\",\n            //             actions: assign((context) => { return { option: context.recResult } }),\n            //         },\n            //         WAIT: 'wait'\n            //     },\n            //     states: {\n            //         prompt: {\n            //             entry: say(\"Let me know when you're done.\"),\n            //             on: { ENDSPEECH: \"ask\" }\n            //         },\n            //         ask: {\n            //             entry: [\n            //                 send('LISTEN'),\n            //                 send('WAIT', {delay: 10000})\n            //             ]\n            //         }\n            //     }\n            // },\n            // ...\n            // wait: {\n                \n            //     entry: [say('Have you done your task yet?')],\n            //     on: {\n            //         ENDSPEECH: [\n            //             {cond: () => (num++, 1) <= 5, target: 'conditional3'},\n            //             {target: '#root.dm1.idea_wait'}\n            //         ]\n            //     }\n            // },\n            // conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.annoy\", \"#root.dm1.annoy\", '#root.dm1.idle', `Mhm.`)},\n\n\n            // -----\n\n                // ...\n                // full_annoy:{\n                //     initial: 'annoy',\n                //     on: { \n                //         // RECOGNISED: {\n                //         //         cond: (context) => help_commands.includes(context.recResult),\n                //         //         target: '#root.init.help'\n                //         //             },\n    \n                //         MAXSPEECH: [\n                //             { \n                //                 cond: (context) => context.count < 5,\n                //                 target: '#root.dm1.idea_wait'},\n    \n                //                 {cond: (context) => context.count == null,\n                //                 actions: assign((context)=>{return {count: Number(0)}}),\n                //                 target: '#root.dm1.maxspeech'}],\n                //             },\n                //     states:{\n                //         hist:{type: 'history'},\n                //         // .... // ...\n                //         annoy: {\n                //             on: {\n                //                 RECOGNISED: [{\n                //                     cond: (context) => \"finished\" in (gram[context.recResult] || {}),\n                //                     actions: assign((context) => { return { finished: gram[context.recResult].finished } }),\n                //                     target: \"#root.dm1.done\"}]\n        \n                //                 // },\n                //                 // { cond: (context) => !(help_commands.includes(context.recResult)),\n                //                 //     target: \".nomatch\" }]\n                //             },\n                //             ...Prompt_Nomatch_Timeout('Have you done your task yet?', \"Sorry I don't understand\"),\n                //         }\n                // },\n                // // ....\n                // },\n                // // ... \n                // maxspeech:{\n                //     initial: 'prompt',\n                //     on: {\n                //         ENDSPEECH: {\n                //             actions: assign((context)=> {return {count: context.count+1 }}),\n                //             target: 'full_annoy.hist'\n                //                 }\n                //             },\n                //             // target: 'fill_appointment_info.hist'\n                //         states: {\n                //             prompt: {entry: say('I AM A STUPID BOT ')}\n                //     }\n                // },\n\n                // ...\n\n                            // ..\n        //     wait: {\n        //         initial: 'prompt',\n        //         on: { ENDSPEECH: '#root.dm1.annoy'},\n        //         states: {\n        //             prompt: {\n        //                 entry: say(\"M.\"),\n        //                 // on: { ENDSPEECH: \"#root.dm1.annoy\" }\n        //             },\n        //             // ask: {\n        //             //     entry: [\n        //             //         send('LISTEN'),\n        //             //         send('WAIT', {delay: 10000})\n        //             //     ]}\n        //             }\n        // },\n        //     // ...\n        //     annoy: {\n        //         initial: \"prompt\",\n        //         on: {\n        //             RECOGNISED: {\n        //                 target: \"conditional3\",\n        //                 actions: assign((context) => { return { option: context.recResult } }),\n        //             },\n        //             WAIT: 'wait'\n        //         },\n        //         states: {\n        //             prompt: {\n        //                 entry: say(\"Have you finished your task?\"),\n        //                 on: { ENDSPEECH: \"ask\" }\n        //             },\n        //             ask: {\n        //                 entry: [\n        //                     send('LISTEN'),\n        //                     send('WAIT', {delay: 10000})\n        //                 ]\n        //             }\n        //         }\n        //     },\n            // conditional3: {...Conditional('agreement', \"#root.dm1.done\", 'disagreement', \"#root.dm1.wait\", \"#root.dm1.annoy\", '#root.dm1.idle', `Oh`)},","import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk, grammar } from \"./index\";\n\n// import { nluRequest } from './index'\n// import { Endings } from './index'\n\nexport const url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n            \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n            \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n            \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n            \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n            \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n            \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n            \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' }\n            // ...\n            \n}\n\nconst game_grammar: { [index: string]: {game: string} } =\n\n{\n    \"shooting\": {game: \"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\n    \"arcade\": {game: \"https://www.miniclip.com/games/genre-517/arcade/en/\"},\n    \"racing\": {game: \"https://www.miniclip.com/games/genre-477/racing/en/\"},\n}\n\nexport function openInNewTab(user_input: string): any{ \n  return (window.open(user_input, '_blank'))\n}\n\nexport const dmMachine2: MachineConfig<SDSContext, any, SDSEvent> = ({\n    initial: 'idle',\n    states: {\n\n        idle: {},\n        negative: {\n            initial: \"music\",\n            states: {\n\n                music: {\n                    initial: \"prompt\",\n                    on: {\n                        RECOGNISED: [\n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                                actions: assign((context) => { return { approval: true } }),\n                                target: \"#root.dm2.negative.choose_music\"},\n            \n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                                actions: assign((context) => { return { approval: false} }),\n                                target: \"#root.dm2.negative.ask_game\"},\n                                {target: \"#root.dm2.negative.music.ask_again\"}\n\n                                // {target: \"#root.dm1.done.others\"}\n\n                                // {cond: (context) => context.option === 'help', target: '.help'}\n                                ]\n                        },\n                        states: {\n                            prompt: {\n                                entry: say(\"I am sorry to hear that. Would you like to listen to some music?\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                            }\n                        }\n                        },\n\n                choose_music: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { url: url_grammar[context.recResult].url } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_music\"},\n                            {target: \"#root.dm2.negative.choose_music.ask_again\"}\n                        ]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"Which genre would you like to listen to?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n                load_music: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Music is in the new tab. Dance, dance, dance!'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.url)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                ask_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.choose_game\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.entertainment\"},\n                            {target: \"#root.dm2.negative.ask_game.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Okay then. Let's play a game instead, what do you think?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n\n                choose_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => game_grammar[context.recResult] !== undefined && \"game\" in (game_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { game: game_grammar[context.recResult].game } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_game\"},\n                            {target: \"#root.dm2.negative.choose_game.ask_again\"}]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"You can choose to play an arcade, shooting or racing game!\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n\n                load_game: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('The game is in a new tab'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.game)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                entertainment: {\n                    initial: 'prompt',\n                    on: {\n                        ENDSPEECH: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.load_entertainment\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.final_state\"},\n                            {target: \"#root.dm2.negative.entertainment.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Ok, would you like some random entertainment?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n                load_entertainment: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('The entertainement is in a new tab'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab('https://theuselessweb.com')\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n                final_state: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Understood. Let me know if you need anything'),\n                            on: { ENDSPEECH: '#root.dm2.idle'}\n                        },\n                }\n            } \n        } \n    } }\n} )","import \"./styles.scss\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { MachineConfig, Machine, send, Action, assign, State } from \"xstate\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\nimport { inspect } from \"@xstate/inspect\";\n\n// auto-open this asshole: https://cors-anywhere.herokuapp.com/corsdemo\n\nimport { dmMachine1 } from \"./dmPositive\";\nimport { dmMachine2 } from \"./dmNegative\";\n\n\n\n\n// NOTE: We created separate grammars for the machines to \n// find answers in the most efficient way possible\nexport const grammar: { [index: string]: {approval?:  boolean } } = \n        {  \"of course\": { approval: true },\n        \"yes of course\": { approval: true },\n        \"yes\": { approval: true },\n        \"yeah\": { approval: true },\n        \"yup\": { approval: true },\n        \"sure\": { approval: true },\n        // --\n        \"no\": { approval: false },\n        \"nah\": { approval: false },\n        \"nope\": { approval: false },\n        \"no way\": { approval: false },\n        \"not sure\": { approval: false },\n        \"of course not\": { approval: false}\n\n        }\n\nexport const url_grammar: { [index: string]: {url:  string } } = \n        {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n        \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n        \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n        \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n        \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n        \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n        \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n        \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' }\n        // ...          \n}\n\n\nexport const finished: { [index: string]: {finished?:  boolean } } = \n        {  \"finished\": { finished: true },\n           \"done\": { finished: true },\n           \"I've done the task\": { finished: true },\n           \"I'm finished\": { finished: true }\n           // ...          \n}\n\nexport const bye: { [index: string]: {bye?:  boolean } } = \n        {  \"quit\": { bye: true },\n           \"turn off\": { bye: true },\n           \"bye\": { bye: true },\n           \"goodbye\": { bye: true }\n           // ...          \n}\n\n// window.open(\"https://cors-anywhere.herokuapp.com/corsdemo\")\n// window.open(\"https://statecharts.io/inspect\")\n\ninspect({\n    url: \"https://statecharts.io/inspect\",\n    iframe: false\n});\n\n\n// NOTE: created as much universal functions as possible\n\nexport function say(text: string): Action<SDSContext, SDSEvent> {\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\n}\n\nexport function listen(): Action<SDSContext, SDSEvent> {\n    return send('LISTEN')\n}\n\nexport function promptAndAsk(prompt: string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: 'prompt',\n        states: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: 'ask' }\n            },\n            ask: {entry: send('LISTEN')}\n        }\n    })\n}\n\nexport function promptHelpBye(prompt: string, idled: string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: 'prompt',\n        states: {\n            prompt: {\n                entry: say(prompt),\n                on: { ENDSPEECH: 'ask' }\n            },\n            ask: {entry: send('LISTEN')\n            },\n            help: {\n                entry: say(\"We may be miscommunicating.\"),\n                on: { ENDSPEECH: [idled,\"#root.init.help\"] }\n            },\n            goodbye:{\n                entry: say(\"\"),\n                on: { ENDSPEECH: [idled,\"#root.init.goodbye\" ] }\n            }\n    }}\n)}\n\n\nexport function Endings(saythis: string, on_end:string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({        \n        initial: \"prompt\",\n        states: {\n            prompt: {\n                entry: send(({type: \"SPEAK\",\n                    value: saythis})),\n                 on: { ENDSPEECH: on_end }\n            }\n        }    \n    }\n)}\n\nexport function Queries(ondone: string, onerror:string): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n            invoke: {\n                id: 'rasa',\n                src: (context, event) => nluRequest(context.option),\n                onDone: {\n                    actions: [assign((context, event) => { return  {option: event.data.intent.name} }), \n                    (context: SDSContext, event: any) => console.log(event.data)],\n                    target: ondone\n                },\n                onError: {\n                    target: onerror,\n                    actions: (context, event) => console.log(event.data)}\n                }\n            }\n)}\n\nexport function Conditional(cond1: string, target1: string, cond2: string, target2: string, elses: string, idles: string, saythis: string,): MachineConfig<SDSContext, any, SDSEvent> {\n    return ({\n        initial: \"prompt\",\n                on: {\n                    ENDSPEECH: [\n                            {cond: (context) => context.option === cond1, target: target1},\n                            {cond: (context) => context.option === cond2, target: target2},\n                            {cond: (context) => context.option === 'help', target: [idles,\"#root.init.help\"]},\n                            {cond: (context) => context.option === 'bye', target: [idles,\"#root.init.goodbye\"]},\n                            { target: elses }] \n                        \n                    },\n                states: {\n                    prompt: {\n                        entry: send(({type: \"SPEAK\", value: saythis})),\n                    }\n                }\n            }\n)}\n\n\nconst saySnippet: Action<SDSContext, SDSEvent> = send((context: SDSContext) => ({\n    type: \"SPEAK\", value: `${context.snippet}`\n}))\n\n\nconst machine = Machine<SDSContext, any, SDSEvent>({\n    id: 'root',\n    type: 'parallel',\n    states: {\n        // ____________\n        init: {\n            initial: 'idle',\n            states: {\n                // ...\n                idle: {on: {CLICK: 'welcome'}},\n                // ...\n                welcome: {\n                    on: {\n                        RECOGNISED: {\n                            target: \"query\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"Good morning. How are you?\")\n                },\n                query: {...Queries(\"distributor\",'welcome')},\n                // ...\n                distributor: {\n                    initial: \"prompt\",\n                    on: {\n                        ENDSPEECH: [\n                            {cond: (context) => context.option === 'positive', target: [\"#root.dm1.positive\", \"idle\"]},\n                            {cond: (context) => context.option === 'negative', target: [\"#root.dm2.negative\", \"idle\"]},\n                            {cond: (context) => context.option === 'todo', target: [\"#root.dm1.create_do\", \"idle\"]},\n                            // REMINDER: delete answer after retraining\n                            {cond: (context) => context.option === 'ideas', target: [\"#root.dm1.create_ideas\", \"idle\"]},\n                            {cond: (context) => context.option === 'answer', target: \"bob\"}, \n                            {cond: (context) => context.option === 'bob', target: \"bob\"},\n                            {cond: (context) => context.option === 'neutral', target: \"neutral\"},\n                            {cond: (context) => context.option === 'music', target: [\"#root.dm2.negative.choose_music\", \"idle\"]},\n                            {cond: (context) => context.option === 'games', target: [\"#root.dm2.negative.choose_game\", \"idle\"]},\n                            {cond: (context) => context.option === 'entertain', target: [\"#root.dm2.negative.load_entertainment\", \"idle\"]},\n\n                            {cond: (context) => context.option === 'help', target: \"help\"},\n\n                            {target: \"goodbye\"} ]\n                        },\n                    states: {\n                        prompt: {\n                            entry: say('Ok.')\n                        }\n                    }\n                },\n                // ...\n                bob: {\n                // NOTE:\n                // This part could be developed more, into a seperate machine\n                // where the user could try out the limits of adaptivity of this DS\n                    on: {\n                        RECOGNISED: {\n                            target: \"query\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"I am Bob the Helper. I am limited. Tell me what you'd like to do.\")\n                },\n                // ...\n                neutral: {\n                // NOTE: \n                // We are aware that this is not efficient.\n                // We tried this part to see how the machines interact between themselves. \n                // For educational purposes only.\n                    on: {\n                        RECOGNISED: {\n                            target: \"#root.dm2.negative.choose_music\",\n                            actions: assign((context) => { return { option: context.recResult } }),\n                        }},\n                    ...promptAndAsk(\"You seem lost. What about listening to some music?\")\n                },\n                // ...\n                help: {\n                    on: {\n                        RECOGNISED: [\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            target: \"bob\"},\n\n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            target: \"goodbye\"},\n\n                            {target: \"bob\"}]  \n                    },\n                ...promptAndAsk(\"I feel lost. Would you like to start over?\")\n                },\n            //     // ...\n                goodbye: {...Endings(\"Happy to help out. See you later.\",\"#root.init\")}\n            },\n        },            \n        // ____________\n        dm1: {\n        ...dmMachine1\n        },\n        // ____________\n        dm2: {\n        ...dmMachine2\n        },\n        // ____________\n        asrtts: {\n            initial: 'idle',\n            states: {\n                // ...\n                idle: {\n                    on: {\n                        LISTEN: 'recognising',\n                        SPEAK: {\n                            target: 'speaking',\n                            actions: assign((_context, event) => { return { ttsAgenda: event.value } })\n                        }\n                    }\n                },\n                // ...\n                recognising: {\n\t\t            initial: 'progress',\n                    entry: 'recStart',\n                    exit: 'recStop',\n                    on: {\n                        ASRRESULT: {\n                            actions: ['recLogResult',\n                                assign((_context, event) => { return { recResult: event.value } })],\n                            target: '.match'\n                        },\n                        RECOGNISED: 'idle'\n                    },\n                    states: {\n\t\t    \t        progress: {\n\t\t\t            },\t    \t\t\t\t\t\n                        match: {\n                            entry: send('RECOGNISED'),\n                        },\n                    }\n                },\n                // ...\n                speaking: {\n                    entry: 'ttsStart',\n                    on: {\n                        ENDSPEECH: 'idle',\n                    }\n                }\n            }    \n        }\n    }\n},\n    {\n        actions: {\n            recLogResult: (context: SDSContext) => {\n                /* context.recResult = event.recResult; */\n                console.log('<< ASR: ' + context.recResult);\n            },\n            test: () => {\n                console.log('test')\n            },\n            logIntent: (context: SDSContext) => {\n                /* context.nluData = event.data */\n                console.log('<< NLU intent: ' + context.nluData.intent.name)\n            }\n        }\n});\n\n\n\n\ninterface Props extends React.HTMLAttributes<HTMLElement> {\n    state: State<SDSContext, any, any, any>;\n}\nconst ReactiveButton = (props: Props): JSX.Element => {\n    switch (true) {\n        case props.state.matches({ asrtts: 'recognising' }):\n            return (\n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"glowing 20s linear\" }} {...props}>\n                    ...\n                </button>\n            );\n        case props.state.matches({ asrtts: 'speaking' }):\n            return (\n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"bordering 1s infinite\" }} {...props}>\n                    \n                </button>\n            );\n        default:\n            return (\n                <button type=\"button\" className=\"glow-on-hover\" {...props}>\n                    Click on me\n                </button >\n            );\n    }\n}\n\nfunction App() {\n    const { speak, cancel, speaking } = useSpeechSynthesis({\n        onEnd: () => {\n            send('ENDSPEECH');\n        },\n    });\n    const { listen, listening, stop } = useSpeechRecognition({\n        onResult: (result: any) => {\n            send({ type: \"ASRRESULT\", value: result });\n        },\n    });\n    const [current, send, service] = useMachine(machine, {\n        devTools: true,\n        actions: {\n            recStart: asEffect(() => {\n                console.log('Ready to receive a command.');\n                listen({\n                    interimResults: false,\n                    continuous: true\n                });\n            }),\n            recStop: asEffect(() => {\n                console.log('Recognition stopped.');\n                stop()\n            }),\n            changeColour: asEffect((context) => {\n                console.log('Repainting...');\n                document.body.style.background = context.recResult;\n            }),\n            ttsStart: asEffect((context, effect) => {\n                console.log('Speaking...');\n                speak({ text: context.ttsAgenda })\n            }),\n            ttsCancel: asEffect((context, effect) => {\n                console.log('TTS STOP...');\n                cancel()\n            }),\n        },\n    });\n\n\n    return (\n        <div className=\"App\">\n            <ReactiveButton state={current} onClick={() => send('CLICK')} />\n        </div>\n    )\n};\n\n\n/* RASA API\n *  */\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\nconst rasaurl = 'https://mood-admin.herokuapp.com/model/parse'\nexport const nluRequest = (text: string) =>\n    fetch(new Request(proxyurl + rasaurl, {\n        method: 'POST',\n        headers: { 'Origin': 'http://localhost:3000/' },\n        body: `{\"text\": \"${text}\"}`\n    }))\n        .then(data => data.json());\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n    <App />,\n    rootElement);\n\n\n"]}}