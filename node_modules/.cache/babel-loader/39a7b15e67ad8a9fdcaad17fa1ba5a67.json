{"ast":null,"code":"import _objectSpread from\"/Users/evelsve/repos/mood-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{send,assign}from\"xstate\";import{say,grammar}from\"./index\";// import { nluRequest } from './index'\n// import { Endings } from './index'\nexport const url_grammar={\"rock\":{url:'https://www.youtube.com/watch?v=A0QkGThnKNQ'},\"metal\":{url:'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'},\"punk\":{url:'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'},\"rap\":{url:'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'},\"lo-fi\":{url:'https://www.youtube.com/watch?v=5qap5aO4i9A'},\"house\":{url:'https://www.youtube.com/watch?v=cna6C24AJkU'},\"techno\":{url:'https://www.youtube.com/watch?v=bC9_OKu6nBQ'},\"country\":{url:'https://www.youtube.com/watch?v=kI24NNjz2j8'}// ...\n};const game_grammar={\"shooting\":{game:\"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\"arcade\":{game:\"https://www.miniclip.com/games/genre-517/arcade/en/\"},\"racing\":{game:\"https://www.miniclip.com/games/genre-477/racing/en/\"}};export function openInNewTab(user_input){return window.open(user_input,'_blank');}export const dmMachine2={initial:'idle',states:{idle:{},negative:{initial:\"music\",states:{music:{initial:\"prompt\",on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:assign(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_music\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:assign(context=>{return{approval:false};}),target:\"#root.dm2.negative.ask_game\"},{target:\"#root.dm2.negative.music.ask_again\"}// {target: \"#root.dm1.done.others\"}\n// {cond: (context) => context.option === 'help', target: '.help'}\n]},states:{prompt:{entry:say(\"I am sorry to hear that. Would you like to listen to some music?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:send('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_music:{initial:'prompt',on:{RECOGNISED:[{cond:context=>url_grammar[context.recResult]!==undefined&&\"url\"in(url_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:assign(context=>{return{url:url_grammar[context.recResult].url};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_music\"},{target:\"#root.dm2.negative.choose_music.ask_again\"}]},states:{prompt:{entry:say(\"Great, let's dance our troubles away! Which genre would you like to listen to?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:send('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_music:{initial:'prompt',states:{prompt:{entry:say('Loading music for you! Dance your troubles away. I hope you feel better homie.'),on:{ENDSPEECH:'play'}},play:{entry:send(context=>_objectSpread({},openInNewTab(context.url))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},ask_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:assign(context=>{return{approval:true};}),target:\"#root.dm2.negative.choose_game\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:assign(context=>{return{approval:false};}),target:\"#root.dm2.negative.entertainment\"},{target:\"#root.dm2.negative.ask_game.ask_again\"}]},states:{prompt:{entry:say(\"Okay then. Let's play a game instead, what do you think?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:send('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},choose_game:{initial:'prompt',on:{RECOGNISED:[{cond:context=>game_grammar[context.recResult]!==undefined&&\"game\"in(game_grammar[context.recResult]||{}),// It checks if url is in grammar\nactions:assign(context=>{return{game:game_grammar[context.recResult].game};}),// The computer keeps the information in the object context\ntarget:\"#root.dm2.negative.load_game\"},{target:\"#root.dm2.negative.choose_game.ask_again\"}]},states:{prompt:{entry:say(\"Nice! You choose to play an arcade, shooting or racing game!\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:send('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_game:{initial:'prompt',states:{prompt:{entry:say('Loading game for you! I hope you feel better my G.'),on:{ENDSPEECH:'play'}},play:{entry:send(context=>_objectSpread({},openInNewTab(context.game))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},entertainment:{initial:'prompt',on:{ENDSPEECH:[{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===true,actions:assign(context=>{return{approval:true};}),target:\"#root.dm2.negative.load_entertainment\"},{cond:context=>grammar[context.recResult]!==undefined&&grammar[context.recResult].approval===false,actions:assign(context=>{return{approval:false};}),target:\"#root.dm2.negative.final_state\"},{target:\"#root.dm2.negative.entertainment.ask_again\"}]},states:{prompt:{entry:say(\"Then would you like some random entertainment?\"),on:{ENDSPEECH:\"ask\"}},ask:{entry:send('LISTEN')},ask_again:{entry:say('I am sorry, I could not understand you. Please repeat.'),on:{ENDSPEECH:\"ask\"}}}},load_entertainment:{initial:'prompt',states:{prompt:{entry:say('Loading entertainment for you! I hope you feel better my G'),on:{ENDSPEECH:'play'}},play:{entry:send(context=>_objectSpread({},openInNewTab('https://theuselessweb.com'))),on:{ENDSPEECH:\"#root.dm2.idle\"}}}},final_state:{initial:'prompt',states:{prompt:{entry:say('Okay! I hope you find another way to feel better!'),on:{ENDSPEECH:'#root.dm2.idle'}}}}}}}};","map":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/src/dmNegative.ts"],"names":["send","assign","say","grammar","url_grammar","url","game_grammar","game","openInNewTab","user_input","window","open","dmMachine2","initial","states","idle","negative","music","on","RECOGNISED","cond","context","recResult","undefined","approval","actions","target","prompt","entry","ENDSPEECH","ask","ask_again","choose_music","load_music","play","ask_game","choose_game","load_game","entertainment","load_entertainment","final_state"],"mappings":"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","sourcesContent":["import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk, grammar } from \"./index\";\n\n// import { nluRequest } from './index'\n// import { Endings } from './index'\n\nexport const url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n            \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n            \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n            \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n            \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n            \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n            \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n            \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' }\n            // ...\n            \n}\n\nconst game_grammar: { [index: string]: {game: string} } =\n\n{\n    \"shooting\": {game: \"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\n    \"arcade\": {game: \"https://www.miniclip.com/games/genre-517/arcade/en/\"},\n    \"racing\": {game: \"https://www.miniclip.com/games/genre-477/racing/en/\"},\n}\n\nexport function openInNewTab(user_input: string): any{ \n  return (window.open(user_input, '_blank'))\n}\n\nexport const dmMachine2: MachineConfig<SDSContext, any, SDSEvent> = ({\n    initial: 'idle',\n    states: {\n\n        idle: {},\n        negative: {\n            initial: \"music\",\n            states: {\n\n                music: {\n                    initial: \"prompt\",\n                    on: {\n                        RECOGNISED: [\n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                                actions: assign((context) => { return { approval: true } }),\n                                target: \"#root.dm2.negative.choose_music\"},\n            \n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                                actions: assign((context) => { return { approval: false} }),\n                                target: \"#root.dm2.negative.ask_game\"},\n                                {target: \"#root.dm2.negative.music.ask_again\"}\n\n                                // {target: \"#root.dm1.done.others\"}\n\n                                // {cond: (context) => context.option === 'help', target: '.help'}\n                                ]\n                        },\n                        states: {\n                            prompt: {\n                                entry: say(\"I am sorry to hear that. Would you like to listen to some music?\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                            }\n                        }\n                        },\n\n                choose_music: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { url: url_grammar[context.recResult].url } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_music\"},\n                            {target: \"#root.dm2.negative.choose_music.ask_again\"}\n                        ]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"Great, let's dance our troubles away! Which genre would you like to listen to?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n                load_music: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading music for you! Dance your troubles away. I hope you feel better homie.'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.url)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                ask_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.choose_game\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.entertainment\"},\n                            {target: \"#root.dm2.negative.ask_game.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Okay then. Let's play a game instead, what do you think?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n\n                choose_game: {\n                    initial: 'prompt',\n                    on: {\n                        RECOGNISED: [{\n                            cond: (context) => game_grammar[context.recResult] !== undefined && \"game\" in (game_grammar[context.recResult] || {}), // It checks if url is in grammar\n                            actions: assign((context) => { return { game: game_grammar[context.recResult].game } }), // The computer keeps the information in the object context\n                            target: \"#root.dm2.negative.load_game\"},\n                            {target: \"#root.dm2.negative.choose_game.ask_again\"}]\n                    },\n                    states: {\n                        prompt: {\n                            entry: say(\"Nice! You choose to play an arcade, shooting or racing game!\"),\n                                on: {ENDSPEECH : \"ask\"}\n                            },\n                            ask: {\n                                entry: send('LISTEN')\n                            },\n                            ask_again: {\n                                entry: say('I am sorry, I could not understand you. Please repeat.'),\n                                on: { ENDSPEECH: \"ask\"}\n                        }\n                    }\n                },\n\n                load_game: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading game for you! I hope you feel better my G.'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab(context.game)\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n\n                entertainment: {\n                    initial: 'prompt',\n                    on: {\n                        ENDSPEECH: [{cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                            actions: assign((context) => { return { approval: true } }),\n                            target: \"#root.dm2.negative.load_entertainment\"},\n        \n                            {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                            actions: assign((context) => { return { approval: false} }),\n                            target: \"#root.dm2.negative.final_state\"},\n                            {target: \"#root.dm2.negative.entertainment.ask_again\"}]\n                    },\n                states: {\n                    prompt: {\n                        entry: say(\"Then would you like some random entertainment?\"),\n                            on: {ENDSPEECH : \"ask\"}\n                        },\n                        ask: {\n                            entry: send('LISTEN')\n                        },\n                        ask_again: {\n                            entry: say('I am sorry, I could not understand you. Please repeat.'),\n                            on: { ENDSPEECH: \"ask\"}\n                    }\n                }\n                },\n                load_entertainment: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Loading entertainment for you! I hope you feel better my G'),\n                            on: { ENDSPEECH: 'play'}\n                        },\n                        play: {\n                            entry: send((context) => ({\n                                ...openInNewTab('https://theuselessweb.com')\n                            })),\n                            on: { ENDSPEECH: \"#root.dm2.idle\"}\n                        }\n                    },   \n                },\n                final_state: {\n                    initial: 'prompt',\n                    states: {\n                        prompt: {\n                            entry: say('Okay! I hope you find another way to feel better!'),\n                            on: { ENDSPEECH: '#root.dm2.idle'}\n                        },\n                }\n            } \n        } \n    } }\n} )"]},"metadata":{},"sourceType":"module"}