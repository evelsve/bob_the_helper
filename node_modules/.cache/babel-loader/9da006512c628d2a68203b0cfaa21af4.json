{"ast":null,"code":"import _objectSpread from \"/Users/evelsve/repos/mood-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { send, assign } from \"xstate\";\nimport { say, grammar } from \"./index\"; // import { nluRequest } from './index'\n// import { Endings } from './index'\n\nconst url_grammar = {\n  \"rock\": {\n    url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ'\n  },\n  \"metal\": {\n    url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut'\n  },\n  \"punk\": {\n    url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9'\n  },\n  \"rap\": {\n    url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss'\n  },\n  \"lo-fi\": {\n    url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'\n  },\n  \"house\": {\n    url: 'https://www.youtube.com/watch?v=cna6C24AJkU'\n  },\n  \"techno\": {\n    url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ'\n  },\n  \"country\": {\n    url: 'https://www.youtube.com/watch?v=kI24NNjz2j8'\n  },\n  // ...\n  \"shooting\": {\n    url: \"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"\n  },\n  \"arcade\": {\n    url: \"www.miniclip.com/games/genre-517/arcade/en/\"\n  },\n  \"racing\": {\n    url: \"www.miniclip.com/games/genre-477/racing/en/\"\n  }\n}; // const openInNewTab: any(user_input: string) {\n//   window.open(url_grammar[user_input]),\n// }\n\nfunction openInNewTab(user_input) {\n  return window.open(user_input, '_blank');\n} // function openInNewTab(input_user: string) => void {\n//     // let context = url;\n//     // let newRelativeUrl = router.createUrlTree([namedRoute]);\n//     // let baseUrl = window.location.href.replace(router.url, '');\n//     window.open(baseUrl + newRelativeUrl, '_blank');\n// }\n\n\nexport const dmMachine2 = {\n  initial: 'idle',\n  states: {\n    // ...\n    idle: {},\n    // negative: {\n    //   initial: \"prompt\",\n    //   states: {\n    //       music: {\n    //       // ...\n    //           on: {\n    //               RECOGNISED: [\n    //                   {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === true,\n    //                   target: 'ask_genre'},\n    //                   {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === false,\n    //                   target: 'ask_game'},\n    //                   {target: '.ask_again'}\n    //               ]\n    //           },\n    //           states: {\n    //               prompt: {\n    //                   entry: say(\"I am sorry to hear that. Would you like to listen to some music?\"),\n    //                   on: {ENDSPEECH : \"ask\"}\n    //               },\n    //               ask: {\n    //                   entry: send('LISTEN')\n    //               },\n    //               ask_again: {\n    //                   entry: say('I am sorry, I could not understand you. Please repeat.'),\n    //                   on: { ENDSPEECH: \"ask\"}\n    //               }\n    //           },\n    //   },\n    ask_genre: {\n      initial: \"prompt\",\n      on: {\n        RECOGNISED: [{\n          cond: context => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}),\n          // It checks if url is in grammar\n          actions: assign(context => {\n            return {\n              url: url_grammar[context.recResult].url\n            };\n          }),\n          // The computer keeps the information in the object context\n          target: \"genre\"\n        }, {\n          target: \".nomatch\"\n        }]\n      },\n      states: {\n        prompt: {\n          entry: say('What genre would you like to listen to?'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: send('LISTEN')\n        },\n        nomatch: {\n          entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    genre: {\n      initial: 'prompt',\n      states: {\n        prompt: {\n          entry: say(\"Loading music for you! Dance your troubles away. I hope you feel better homie.\"),\n          on: {\n            ENDSPEECH: 'play'\n          }\n        },\n        play: {\n          entry: send(context => _objectSpread({}, openInNewTab(context.url)))\n        }\n      }\n    },\n    ask_game: {\n      on: {\n        RECOGNISED: [{\n          cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n          target: 'choose_game'\n        }, {\n          cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n          target: 'entertainment'\n        }, {\n          target: '.ask_again'\n        }]\n      },\n      states: {\n        prompt: {\n          entry: say(\"Okay then. Would you like to play a game instead?\"),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: send('LISTEN')\n        },\n        ask_again: {\n          entry: say('I am sorry, I could not understand you. Please repeat.'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    choose_game: {\n      initial: \"prompt\",\n      on: {\n        RECOGNISED: [{\n          cond: context => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}),\n          // It checks if url is in grammar\n          actions: assign(context => {\n            return {\n              url: url_grammar[context.recResult].url\n            };\n          }),\n          // The computer keeps the information in the object context\n          target: \"type_of_game\"\n        }, {\n          target: \".nomatch\"\n        }]\n      },\n      states: {\n        prompt: {\n          entry: say('Which game would you like to play? You can choose racing, shooting or arcade games.'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: send('LISTEN')\n        },\n        nomatch: {\n          entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    type_of_game: {\n      initial: 'prompt',\n      states: {\n        prompt: {\n          entry: send(context => ({\n            // We need to access the context that has the info. Similar to \"say\" function\n            type: \"SPEAK\",\n            value: \"OK. Loading \".concat(context.url, \" game for you. Enjoy it!\")\n          })),\n          on: {\n            ENDSPEECH: 'play'\n          }\n        },\n        play: {\n          entry: send(context => _objectSpread({}, openInNewTab(context.url)))\n        }\n      }\n    },\n    entertainment: {\n      on: {\n        RECOGNISED: [{\n          cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n          target: 'provide_entertainment'\n        }, {\n          cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n          target: 'no_more_options'\n        }, {\n          target: '.ask_again'\n        }]\n      },\n      states: {\n        prompt: {\n          entry: say(\"Okay then. I have one last option for you. Would you like to have some random entertainment instead?\"),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: send('LISTEN')\n        },\n        ask_again: {\n          entry: say('I am sorry, I could not understand you. Please repeat.'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    provide_entertainment: {\n      initial: 'prompt',\n      states: {\n        prompt: {\n          entry: say(\"Loading some entertainemnt for you! I hope you feel better homie.\"),\n          on: {\n            ENDSPEECH: 'load'\n          }\n        },\n        load: {\n          entry: send(context => _objectSpread({}, openInNewTab(\"https://theuselessweb.com\")))\n        }\n      }\n    },\n    no_more_options: {\n      initial: 'prompt',\n      states: {\n        prompt: {\n          entry: say(\"I do not have anymore options for you. I hope you find a way to feel better!\")\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/src/dmNegative.ts"],"names":["send","assign","say","grammar","url_grammar","url","openInNewTab","user_input","window","open","dmMachine2","initial","states","idle","ask_genre","on","RECOGNISED","cond","context","recResult","undefined","actions","target","prompt","entry","ENDSPEECH","ask","nomatch","genre","play","ask_game","approval","ask_again","choose_game","type_of_game","type","value","entertainment","provide_entertainment","load","no_more_options"],"mappings":"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","sourcesContent":["import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk, grammar } from \"./index\";\n\n// import { nluRequest } from './index'\n// import { Endings } from './index'\n\nconst url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'https://www.youtube.com/watch?v=A0QkGThnKNQ' },\n            \"metal\": { url: 'https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut' },\n            \"punk\": { url: 'https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9' },\n            \"rap\": { url: 'https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss' },\n            \"lo-fi\": { url: 'https://www.youtube.com/watch?v=5qap5aO4i9A'},\n            \"house\": { url: 'https://www.youtube.com/watch?v=cna6C24AJkU' },\n            \"techno\": { url: 'https://www.youtube.com/watch?v=bC9_OKu6nBQ' },\n            \"country\": { url: 'https://www.youtube.com/watch?v=kI24NNjz2j8' },\n            // ...\n            \"shooting\": {url: \"https://www.miniclip.com/games/genre-5/shoot-em-up/en/\"},\n            \"arcade\": {url: \"www.miniclip.com/games/genre-517/arcade/en/\"},\n            \"racing\": {url: \"www.miniclip.com/games/genre-477/racing/en/\"},\n}\n\n// const openInNewTab: any(user_input: string) {\n//   window.open(url_grammar[user_input]),\n// }\n\nfunction openInNewTab(user_input: string): any{ \n  return (window.open(user_input, '_blank'))\n}\n\n\n// function openInNewTab(input_user: string) => void {\n//     // let context = url;\n//     // let newRelativeUrl = router.createUrlTree([namedRoute]);\n//     // let baseUrl = window.location.href.replace(router.url, '');\n\n//     window.open(baseUrl + newRelativeUrl, '_blank');\n// }\n\n\nexport const dmMachine2: MachineConfig<SDSContext, any, SDSEvent> = ({\n  initial: 'idle',\n  states: {\n      // ...\n      idle: {},\n      // negative: {\n      //   initial: \"prompt\",\n      //   states: {\n      //       music: {\n      //       // ...\n      //           on: {\n      //               RECOGNISED: [\n      //                   {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === true,\n      //                   target: 'ask_genre'},\n      //                   {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === false,\n      //                   target: 'ask_game'},\n      //                   {target: '.ask_again'}\n      //               ]\n      //           },\n      //           states: {\n      //               prompt: {\n      //                   entry: say(\"I am sorry to hear that. Would you like to listen to some music?\"),\n      //                   on: {ENDSPEECH : \"ask\"}\n      //               },\n      //               ask: {\n      //                   entry: send('LISTEN')\n      //               },\n      //               ask_again: {\n      //                   entry: say('I am sorry, I could not understand you. Please repeat.'),\n      //                   on: { ENDSPEECH: \"ask\"}\n      //               }\n      //           },\n            \n      //   },\n        ask_genre:{\n            initial: \"prompt\",\n            on: {\n              RECOGNISED: [{\n                  cond: (context) => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n                  actions: assign((context) => { return { url: url_grammar[context.recResult].url } }), // The computer keeps the information in the object context\n                  target: \"genre\"\n              },\n              { target: \".nomatch\" }]\n          },\n          states: {\n            prompt: {\n                entry: say('What genre would you like to listen to?'),\n                on: { ENDSPEECH: \"ask\" }\n                },\n            ask: {\n                entry: send('LISTEN')\n              },\n            nomatch: {\n              entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n              on: { ENDSPEECH: \"ask\"}\n            }\n          }\n          },\n          genre: {\n            initial: 'prompt',\n            states: {\n              prompt: {\n                entry: say(\"Loading music for you! Dance your troubles away. I hope you feel better homie.\"),\n                on: { ENDSPEECH: 'play' } \n              },\n              play: {\n                entry: send((context) => ({ // We need to access the context that has the info. Similar to \"say\" function\n                ...openInNewTab(context.url)\n                  // type: \"SPEAK\",\n                  // value: `OK. Do you want to listen to $(context.genre)?`\n              })),\n              }\n            }\n        },\n        ask_game:{\n            on: {\n                RECOGNISED: [\n                    {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === true,\n                    target: 'choose_game'},\n                    {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === false,\n                    target: 'entertainment'},\n                    {target: '.ask_again'}\n                ]\n            },\n            states: {\n                prompt: {\n                    entry: say(\"Okay then. Would you like to play a game instead?\"),\n                    on: {ENDSPEECH : \"ask\"}\n                },\n                ask: {\n                    entry: send('LISTEN')\n                },\n                ask_again: {\n                    entry: say('I am sorry, I could not understand you. Please repeat.'),\n                    on: { ENDSPEECH: \"ask\"}\n                }\n        }\n    },\n        choose_game: {\n            initial: \"prompt\",\n            on: {\n              RECOGNISED: [{\n                  cond: (context) => url_grammar[context.recResult] !== undefined && \"url\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n                  actions: assign((context) => { return { url: url_grammar[context.recResult].url } }), // The computer keeps the information in the object context\n                  target: \"type_of_game\"\n              },\n              { target: \".nomatch\" }]\n          },\n          states: {\n            prompt: {\n                entry: say('Which game would you like to play? You can choose racing, shooting or arcade games.'),\n                on: { ENDSPEECH: \"ask\" }\n                },\n            ask: {\n                entry: send('LISTEN')\n              },\n            nomatch: {\n              entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n              on: { ENDSPEECH: \"ask\"}\n            }\n          }\n        },\n\n        type_of_game: {\n            initial: 'prompt',\n            states: {\n              prompt: {\n                entry: send((context) => ({ // We need to access the context that has the info. Similar to \"say\" function\n                type: \"SPEAK\",\n                value: `OK. Loading ${context.url} game for you. Enjoy it!`\n            })),\n                on: { ENDSPEECH: 'play' } \n              },\n              play: {\n                entry: send((context) => ({ // We need to access the context that has the info. Similar to \"say\" function\n                ...openInNewTab(context.url)\n                  // type: \"SPEAK\",\n                  // value: `OK. Do you want to listen to $(context.genre)?`\n              })),\n              }\n            }\n        },\n\n        entertainment: {\n            on: {\n                RECOGNISED: [\n                    {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === true,\n                    target: 'provide_entertainment'},\n                    {cond: (context) => grammar[context.recResult] !== undefined &&  grammar[context.recResult].approval === true,\n                    target: 'no_more_options'},\n                    {target: '.ask_again'}\n                ]\n            },\n            states: {\n                prompt: {\n                    entry: say(\"Okay then. I have one last option for you. Would you like to have some random entertainment instead?\"),\n                    on: {ENDSPEECH : \"ask\"}\n                },\n                ask: {\n                    entry: send('LISTEN')\n                },\n                ask_again: {\n                    entry: say('I am sorry, I could not understand you. Please repeat.'),\n                    on: { ENDSPEECH: \"ask\"}\n                }\n        }\n    },\n        provide_entertainment:{\n            initial: 'prompt',\n            states: {\n              prompt: {\n                entry: say(\"Loading some entertainemnt for you! I hope you feel better homie.\"),\n                on: { ENDSPEECH: 'load' } \n              },\n              load: {\n                entry: send((context) => ({ // We need to access the context that has the info. Similar to \"say\" function\n                ...openInNewTab(\"https://theuselessweb.com\")\n                  // type: \"SPEAK\",\n                  // value: `OK. Do you want to listen to $(context.genre)?`\n              })),\n              }\n            }\n        },\n        no_more_options: {\n            initial: 'prompt',\n            states: {\n                prompt: {\n                    entry: say(\"I do not have anymore options for you. I hope you find a way to feel better!\")\n                }\n            }\n        }\n      }\n})\n    "]},"metadata":{},"sourceType":"module"}