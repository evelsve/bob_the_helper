{"ast":null,"code":"import _objectSpread from \"/Users/evelsve/repos/mood-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { send, assign } from \"xstate\";\nimport { say, listen } from \"./index\";\nimport { grammar } from './index'; // import { Component, OnInit, AfterViewInit } from '@angular/core';\n// import { Video } from '../shared/model/video.model';\n// import { Subscription } from 'rxjs';\n// import { VideoPlayerService } from '../shared/services/video-player.service';\n// import Router from 'xstate'\n\nconst url_grammar = {\n  \"rock\": {\n    url: 'asd'\n  },\n  \"metal\": {\n    url: 'asd'\n  },\n  \"punk\": {\n    url: 'asd'\n  },\n  \"rap\": {\n    url: 'asd'\n  },\n  \"lo-fi\": {\n    url: 'asd'\n  },\n  \"house\": {\n    url: 'asd'\n  },\n  \"techno\": {\n    url: 'asd'\n  },\n  \"country\": {\n    url: 'asd'\n  }\n}; // const openInNewTab: any(user_input: string) {\n//   window.open(url_grammar[user_input]),\n// }\n\nfunction openInNewTab(user_input) {\n  return window.open(url_grammar[user_input].url, '_blank');\n} // function openInNewTab(input_user: string) => void {\n//     // let context = url;\n//     // let newRelativeUrl = router.createUrlTree([namedRoute]);\n//     // let baseUrl = window.location.href.replace(router.url, '');\n//     window.open(baseUrl + newRelativeUrl, '_blank');\n// }\n\n\nexport const dmMachine3 = {\n  initial: 'start_post',\n  states: {\n    // ...\n    start_pos: {\n      initial: \"first_prompt\",\n      // ...\n      on: {\n        ENDSPEECH: \"ask_genre\"\n      },\n      states: {\n        first_prompt: {\n          entry: say(\"Let's listen to some music!\")\n        }\n      }\n    },\n    ask_genre: {\n      initial: \"second_prompt\",\n      on: {\n        RECOGNISED: [{\n          // cond: (context) => grammar[context.recResult].person !== undefined,\n          cond: context => \"genre\" in (url_grammar[context.recResult] || {}),\n          // It checks if url is in grammar\n          actions: assign(context => {\n            return {\n              genre: grammar[context.recResult].genre\n            };\n          }),\n          // The computer keeps the information in the object context\n          target: \"genre\"\n        }, {\n          target: \".nomatch\"\n        }]\n      },\n      states: {\n        second_prompt: {\n          entry: say('What genre would you like to listen to?'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        },\n        ask: {\n          entry: listen()\n        },\n        nomatch: {\n          entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n          on: {\n            ENDSPEECH: \"ask\"\n          }\n        }\n      }\n    },\n    genre: {\n      initial: 'third_prompt',\n      states: {\n        third_prompt: {\n          entry: send(context => _objectSpread({}, openInNewTab(context.genre)))\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/src/dmNegative.ts"],"names":["send","assign","say","listen","grammar","url_grammar","url","openInNewTab","user_input","window","open","dmMachine3","initial","states","start_pos","on","ENDSPEECH","first_prompt","entry","ask_genre","RECOGNISED","cond","context","recResult","actions","genre","target","second_prompt","ask","nomatch","third_prompt"],"mappings":";AAAA,SAAwBA,IAAxB,EAA8BC,MAA9B,QAA4C,QAA5C;AACA,SAAQC,GAAR,EAAaC,MAAb,QAAyC,SAAzC;AAGA,SAASC,OAAT,QAAwB,SAAxB,C,CACA;AACA;AACA;AACA;AACA;;AAIA,MAAMC,WAAiD,GAC9C;AAAG,UAAQ;AAAEC,IAAAA,GAAG,EAAE;AAAP,GAAX;AACG,WAAS;AAAEA,IAAAA,GAAG,EAAE;AAAP,GADZ;AAEG,UAAQ;AAAEA,IAAAA,GAAG,EAAE;AAAP,GAFX;AAGG,SAAO;AAAEA,IAAAA,GAAG,EAAE;AAAP,GAHV;AAIG,WAAS;AAAEA,IAAAA,GAAG,EAAE;AAAP,GAJZ;AAKG,WAAS;AAAEA,IAAAA,GAAG,EAAE;AAAP,GALZ;AAMG,YAAU;AAAEA,IAAAA,GAAG,EAAE;AAAP,GANb;AAOG,aAAW;AAAEA,IAAAA,GAAG,EAAE;AAAP;AAPd,CADT,C,CAWA;AACA;AACA;;AAEA,SAASC,YAAT,CAAsBC,UAAtB,EAA8C;AAC5C,SAAQC,MAAM,CAACC,IAAP,CAAYL,WAAW,CAACG,UAAD,CAAX,CAAwBF,GAApC,EAAyC,QAAzC,CAAR;AACD,C,CAGD;AACA;AACA;AACA;AAEA;AACA;;;AAGA,OAAO,MAAMK,UAAoD,GAAI;AACnEC,EAAAA,OAAO,EAAE,YAD0D;AAEnEC,EAAAA,MAAM,EAAE;AACJ;AACAC,IAAAA,SAAS,EAAE;AACTF,MAAAA,OAAO,EAAE,cADA;AAET;AACAG,MAAAA,EAAE,EAAE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAHK;AAILH,MAAAA,MAAM,EAAE;AACJI,QAAAA,YAAY,EAAE;AAAEC,UAAAA,KAAK,EAAEhB,GAAG,CAAC,6BAAD;AAAZ;AADV;AAJH,KAFP;AAUJiB,IAAAA,SAAS,EAAE;AACTP,MAAAA,OAAO,EAAE,eADA;AAETG,MAAAA,EAAE,EAAE;AACFK,QAAAA,UAAU,EAAE,CAAC;AACT;AACAC,UAAAA,IAAI,EAAGC,OAAD,IAAa,YAAYjB,WAAW,CAACiB,OAAO,CAACC,SAAT,CAAX,IAAkC,EAA9C,CAFV;AAE6D;AACtEC,UAAAA,OAAO,EAAEvB,MAAM,CAAEqB,OAAD,IAAa;AAAE,mBAAO;AAAEG,cAAAA,KAAK,EAAErB,OAAO,CAACkB,OAAO,CAACC,SAAT,CAAP,CAA2BE;AAApC,aAAP;AAAoD,WAApE,CAHN;AAG6E;AACtFC,UAAAA,MAAM,EAAE;AAJC,SAAD,EAMZ;AAAEA,UAAAA,MAAM,EAAE;AAAV,SANY;AADV,OAFK;AAWXb,MAAAA,MAAM,EAAE;AACNc,QAAAA,aAAa,EAAE;AACbT,UAAAA,KAAK,EAAEhB,GAAG,CAAC,yCAAD,CADG;AAEba,UAAAA,EAAE,EAAE;AAAEC,YAAAA,SAAS,EAAE;AAAb;AAFS,SADT;AAKNY,QAAAA,GAAG,EAAE;AACDV,UAAAA,KAAK,EAAEf,MAAM;AADZ,SALC;AAQN0B,QAAAA,OAAO,EAAE;AACPX,UAAAA,KAAK,EAAEhB,GAAG,CAAC,2EAAD,CADH;AAEPa,UAAAA,EAAE,EAAE;AAAEC,YAAAA,SAAS,EAAE;AAAb;AAFG;AARH;AAXG,KAVP;AAmCJS,IAAAA,KAAK,EAAE;AACLb,MAAAA,OAAO,EAAE,cADJ;AAELC,MAAAA,MAAM,EAAE;AACNiB,QAAAA,YAAY,EAAE;AACZZ,UAAAA,KAAK,EAAElB,IAAI,CAAEsB,OAAD,sBACCf,YAAY,CAACe,OAAO,CAACG,KAAT,CADb,CAAD;AADC;AADR;AAFH;AAnCH;AAF2D,CAA9D","sourcesContent":["import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk } from \"./index\";\nimport { loadGrammar } from './runparser'\nimport { parse } from './chartparser'\nimport { grammar } from './index'\n// import { Component, OnInit, AfterViewInit } from '@angular/core';\n// import { Video } from '../shared/model/video.model';\n// import { Subscription } from 'rxjs';\n// import { VideoPlayerService } from '../shared/services/video-player.service';\n// import Router from 'xstate'\nimport { nluRequest } from './index'\nimport { Endings } from './index'\n\nconst url_grammar: { [index: string]: {url:  string } } = \n         {  \"rock\": { url: 'asd' },\n            \"metal\": { url: 'asd' },\n            \"punk\": { url: 'asd' },\n            \"rap\": { url: 'asd' },\n            \"lo-fi\": { url: 'asd' },\n            \"house\": { url: 'asd' },\n            \"techno\": { url: 'asd' },\n            \"country\": { url: 'asd' },\n}\n\n// const openInNewTab: any(user_input: string) {\n//   window.open(url_grammar[user_input]),\n// }\n\nfunction openInNewTab(user_input: string): any{ \n  return (window.open(url_grammar[user_input].url, '_blank'))\n}\n\n\n// function openInNewTab(input_user: string) => void {\n//     // let context = url;\n//     // let newRelativeUrl = router.createUrlTree([namedRoute]);\n//     // let baseUrl = window.location.href.replace(router.url, '');\n\n//     window.open(baseUrl + newRelativeUrl, '_blank');\n// }\n\n\nexport const dmMachine3: MachineConfig<SDSContext, any, SDSEvent> = ({\n  initial: 'start_post',\n  states: {\n      // ...\n      start_pos: {\n        initial: \"first_prompt\",\n        // ...\n        on: { ENDSPEECH: \"ask_genre\" },\n            states: { \n                first_prompt: { entry: say(\"Let's listen to some music!\") },\n              }\n            },\n      ask_genre: {\n        initial: \"second_prompt\",\n        on: {\n          RECOGNISED: [{\n              // cond: (context) => grammar[context.recResult].person !== undefined,\n              cond: (context) => \"genre\" in (url_grammar[context.recResult] || {}), // It checks if url is in grammar\n              actions: assign((context) => { return { genre: grammar[context.recResult].genre } }), // The computer keeps the information in the object context\n              target: \"genre\"\n          },\n          { target: \".nomatch\" }]\n      },\n      states: {\n        second_prompt: {\n          entry: say('What genre would you like to listen to?'),\n          on: { ENDSPEECH: \"ask\" }\n        },\n        ask: {\n            entry: listen()\n          },\n        nomatch: {\n          entry: say('I am sorry, I cannot play that genre for you. Please choose another genre'),\n          on: { ENDSPEECH: \"ask\"}\n        }\n      }\n      },\n      genre: {\n        initial: 'third_prompt',\n        states: {\n          third_prompt: {\n            entry: send((context) => ({ // We need to access the context that has the info. Similar to \"say\" function\n                      ...openInNewTab(context.genre)\n                        // type: \"SPEAK\",\n                        // value: `OK. Do you want to listen to $(context.genre)?`\n                    })),\n          }\n        }\n      }\n      }})\n    "]},"metadata":{},"sourceType":"module"}