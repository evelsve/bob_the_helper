{"ast":null,"code":"import _objectSpread from \"/Users/evelsve/repos/mood-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { assign } from \"xstate\";\nimport { nluRequest, misUnderstood } from \"./index\";\nconst grammar = {\n  \"of course\": {\n    approval: true\n  },\n  \"yes\": {\n    approval: true\n  },\n  \"yeah\": {\n    approval: true\n  },\n  \"yup\": {\n    approval: true\n  },\n  \"sure\": {\n    approval: true\n  },\n  \"no\": {\n    approval: false\n  },\n  \"nah\": {\n    approval: false\n  },\n  \"nope\": {\n    approval: false\n  }\n};\nexport const dmMachine1 = {\n  initial: 'idle',\n  states: {\n    // ...\n    idle: {},\n    // ...\n    start_pos: {\n      initial: \"chore_idea\",\n      states: {\n        chore_idea: _objectSpread({\n          on: {\n            RECOGNISED: [// {cond: (context) => \"task\" in (list[context.recResult] || {}),\n            // actions: assign((context) => { return { person: list[context.recResult].task } }),\n            // target: \"task\"},\n            // {cond: (context) => \"idea\" in (list[context.recResult] || {}),\n            // actions: assign((context) => { return { person: list[context.recResult].task } }),\n            // target: \"idea\"},\n            {\n              cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n              target: \"welcome\"\n            }, {\n              cond: context => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n              target: \"goodbye\"\n            }, {\n              cond: context => context.option === 'help',\n              target: \"help\"\n            }, {\n              cond: context => context.recResult === \"help\"\n            }, {\n              target: \".nomatch\"\n            }]\n          }\n        }, misUnderstood(\"Would you like to do a chore?\", [\"#root.dm1.idle\", \"#root.initial_welcome.help\"])),\n        query: {\n          invoke: {\n            id: 'rasa',\n            src: (context, event) => nluRequest(context.option),\n            onDone: {\n              actions: [assign((context, event) => {\n                return {\n                  option: event.data.intent.name\n                };\n              }), (context, event) => console.log(event.data)],\n              target: \"distributor\"\n            },\n            onError: {\n              target: 'welcome',\n              actions: (context, event) => console.log(event.data)\n            }\n          }\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/evelsve/repos/mood-admin/src/dmNegative.ts"],"names":["assign","nluRequest","misUnderstood","grammar","approval","dmMachine1","initial","states","idle","start_pos","chore_idea","on","RECOGNISED","cond","context","recResult","undefined","target","option","query","invoke","id","src","event","onDone","actions","data","intent","name","console","log","onError"],"mappings":"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","sourcesContent":["import { MachineConfig, send, assign } from \"xstate\";\nimport {say, listen, promptAndAsk, nluRequest, misUnderstood } from \"./index\";\nimport { list } from \"./todo_list\"\n\n\nconst grammar: { [index: string]: {\n    approval?:  boolean,\n}} = {\n\"of course\": { approval: true },\n\"yes\": { approval: true },\n\"yeah\": { approval: true },\n\"yup\": { approval: true },\n\"sure\": { approval: true },\n\"no\": { approval: false },\n\"nah\": { approval: false },\n\"nope\": { approval: false }}\n\n\n\n\nexport const dmMachine1: MachineConfig<SDSContext, any, SDSEvent> = ({\n    initial: 'idle',\n    states: {\n        // ...\n        idle: {},\n        // ...\n        start_pos: {\n            initial: \"chore_idea\",\n            states: {\n                chore_idea: {\n                         on: {\n                            RECOGNISED: [\n                                // {cond: (context) => \"task\" in (list[context.recResult] || {}),\n                                // actions: assign((context) => { return { person: list[context.recResult].task } }),\n                                // target: \"task\"},\n\n                                // {cond: (context) => \"idea\" in (list[context.recResult] || {}),\n                                // actions: assign((context) => { return { person: list[context.recResult].task } }),\n                                // target: \"idea\"},\n\n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === true,\n                                target: \"welcome\"},\n\n                                {cond: (context) => grammar[context.recResult] !== undefined && grammar[context.recResult].approval === false,\n                                target: \"goodbye\"},\n\n                                {cond: (context) => context.option === 'help', target: \"help\"},\n\n                                {cond: (context) => context.recResult === \"help\"},\n\n                                { target: \".nomatch\" }],},\n\n            ...misUnderstood(`Would you like to do a chore?`,  [\"#root.dm1.idle\", \"#root.initial_welcome.help\"])\n            },\n            query: {\n                invoke: {\n                    id: 'rasa',\n                    src: (context, event) => nluRequest(context.option),\n                    onDone: {\n                        actions: [assign((context, event) => { return  {option: event.data.intent.name} }), \n                        (context: SDSContext, event: any) => console.log(event.data)],\n                        target: \"distributor\"\n                    },\n                    onError: {\n                        target: 'welcome',\n                        actions: (context, event) => console.log(event.data)}\n                }\n            },\n }}}})"]},"metadata":{},"sourceType":"module"}