(this["webpackJsonpmood-admin"]=this["webpackJsonpmood-admin"]||[]).push([[0],{24:function(t,e,o){},35:function(t,e,o){"use strict";o.r(e),o.d(e,"grammar",(function(){return h})),o.d(e,"url_grammar",(function(){return E})),o.d(e,"finished",(function(){return w})),o.d(e,"bye",(function(){return v})),o.d(e,"say",(function(){return O})),o.d(e,"listen",(function(){return k})),o.d(e,"promptAndAsk",(function(){return S})),o.d(e,"promptHelpBye",(function(){return j})),o.d(e,"Endings",(function(){return R})),o.d(e,"Queries",(function(){return N})),o.d(e,"Conditional",(function(){return C})),o.d(e,"nluRequest",(function(){return D}));var a=o(23),n=o(5),r=(o(24),o(8),o(20)),i=o(4),s=o(41),c=o(40),l=o(18),u=o(39);const p={initial:"idle",states:{idle:{},positive:{initial:"quest1",states:{quest1:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:"#root.dm1.create_do"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:"#root.dm1.if_ideas"},{cond:t=>void 0!==v[t.recResult]&&!1===v[t.recResult].bye,target:"#root.dm1.if_ideas"},{target:"#root.dm1.others"}]}},S("I suppose you could do something productive. Do you agree?")),quest2:Object(n.a)({on:{RECOGNISED:{target:"#root.dm1.query3",actions:Object(i.b)((t=>({option:t.recResult})))}}},S("So what would you like to do?"))}},query1:Object(n.a)({},N("conditional1","#root.init.help")),conditional1:Object(n.a)({},C("agree","create_do","disagree","#root.dm1.if_ideas","#root.dm1.others","#root.dm1.idle","Ok.")),query3:Object(n.a)({},N("#root.init.distributor","#root.init.help")),create_do:Object(n.a)({initial:"prompt",on:{RECOGNISED:{actions:Object(i.b)((t=>({task:t.recResult}))),target:"to_do"}}},j("Tell me the things you have to accomplish.","#root.dm1.idle")),to_do:{initial:"prompt",states:{prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Now go and complete the following tasks: ".concat(t.task)}))),on:{ENDSPEECH:"#root.dm1.wait"}}}},if_ideas:Object(n.a)({on:{RECOGNISED:[{target:"#root.dm1.query2",actions:Object(i.b)((t=>({option:t.recResult})))},{target:"#root.dm1.others"}]}},S("Then how about working on your ideas?")),query2:Object(n.a)({},N("conditional2","#root.init.help")),conditional2:Object(n.a)({},C("agree","create_ideas","disagree","#root.dm1.positive.quest2","#root.dm1.others","#root.dm2.idle","Cool.")),create_ideas:Object(n.a)({initial:"prompt",on:{RECOGNISED:{target:"idea",actions:Object(i.b)((t=>({idea:t.recResult})))}}},S("Tell me your idea.")),idea:{initial:"prompt",states:{prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"You should work on your idea of ".concat(t.idea,".")}))),on:{ENDSPEECH:"#root.dm1.wait"}}}},wait:Object(n.a)({initial:"prompt",on:{RECOGNISED:[{cond:t=>void 0!==w[t.recResult]&&!0===w[t.recResult].finished,target:"done"},{cond:t=>void 0!==w[t.recResult]&&!1===w[t.recResult].finished,target:"wait"},{target:"wait"}]}},S("Say 'finished', when you're done")),done:{initial:"prompt",states:{prompt:{entry:O("Good job. Time to relax."),on:{ENDSPEECH:{target:"#root.dm1.positive.quest2"}}}}},others:{initial:"prompt",states:{prompt:{entry:O("Umm, you said something strange"),on:{ENDSPEECH:"#root.dm1.positive.quest2"}}}}}},d={rock:{url:"https://www.youtube.com/watch?v=A0QkGThnKNQ"},metal:{url:"https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut"},punk:{url:"https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9"},rap:{url:"https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss"},"lo-fi":{url:"https://www.youtube.com/watch?v=5qap5aO4i9A"},house:{url:"https://www.youtube.com/watch?v=cna6C24AJkU"},techno:{url:"https://www.youtube.com/watch?v=bC9_OKu6nBQ"},country:{url:"https://www.youtube.com/watch?v=kI24NNjz2j8"}},m={shooting:{game:"https://www.miniclip.com/games/genre-5/shoot-em-up/en/"},arcade:{game:"https://www.miniclip.com/games/genre-517/arcade/en/"},racing:{game:"https://www.miniclip.com/games/genre-477/racing/en/"}};function g(t){return window.open(t,"_blank")}const b={initial:"idle",states:{idle:{},negative:{initial:"music",states:{music:{initial:"prompt",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:"#root.dm2.negative.choose_music"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:"#root.dm2.negative.ask_game"},{target:"#root.dm2.negative.music.ask_again"}]},states:{prompt:{entry:O("I am sorry to hear that. Would you like to listen to some music?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},ask_again:{entry:O("I am sorry, I could not understand you. Please repeat."),on:{ENDSPEECH:"ask"}}}},choose_music:{initial:"prompt",on:{RECOGNISED:[{cond:t=>void 0!==d[t.recResult]&&"url"in(d[t.recResult]||{}),actions:Object(i.b)((t=>({url:d[t.recResult].url}))),target:"#root.dm2.negative.load_music"},{target:"#root.dm2.negative.choose_music.ask_again"}]},states:{prompt:{entry:O("Which genre would you like to listen to?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},ask_again:{entry:O("I am sorry, I could not understand you. Please repeat."),on:{ENDSPEECH:"ask"}}}},load_music:{initial:"prompt",states:{prompt:{entry:O("Music is in the new tab. Dance, dance, dance!"),on:{ENDSPEECH:"play"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g(t.url)))),on:{ENDSPEECH:"#root.dm2.idle"}}}},ask_game:{initial:"prompt",on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:"#root.dm2.negative.choose_game"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:"#root.dm2.negative.entertainment"},{target:"#root.dm2.negative.ask_game.ask_again"}]},states:{prompt:{entry:O("Okay then. Let's play a game instead, what do you think?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},ask_again:{entry:O("I am sorry, I could not understand you. Please repeat."),on:{ENDSPEECH:"ask"}}}},choose_game:{initial:"prompt",on:{RECOGNISED:[{cond:t=>void 0!==m[t.recResult]&&"game"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({game:m[t.recResult].game}))),target:"#root.dm2.negative.load_game"},{target:"#root.dm2.negative.choose_game.ask_again"}]},states:{prompt:{entry:O("You can choose to play an arcade, shooting or racing game!"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},ask_again:{entry:O("I am sorry, I could not understand you. Please repeat."),on:{ENDSPEECH:"ask"}}}},load_game:{initial:"prompt",states:{prompt:{entry:O("The game is in a new tab"),on:{ENDSPEECH:"play"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g(t.game)))),on:{ENDSPEECH:"#root.dm2.idle"}}}},entertainment:{initial:"prompt",on:{ENDSPEECH:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!0}))),target:"#root.dm2.negative.load_entertainment"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,actions:Object(i.b)((t=>({approval:!1}))),target:"#root.dm2.negative.final_state"},{target:"#root.dm2.negative.entertainment.ask_again"}]},states:{prompt:{entry:O("Ok, would you like some random entertainment?"),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},ask_again:{entry:O("I am sorry, I could not understand you. Please repeat."),on:{ENDSPEECH:"ask"}}}},load_entertainment:{initial:"prompt",states:{prompt:{entry:O("The entertainement is in a new tab"),on:{ENDSPEECH:"play"}},play:{entry:Object(i.k)((t=>Object(n.a)({},g("https://theuselessweb.com")))),on:{ENDSPEECH:"#root.dm2.idle"}}}},final_state:{initial:"prompt",states:{prompt:{entry:O("Understood. Let me know if you need anything"),on:{ENDSPEECH:"#root.dm2.idle"}}}}}}}};var y=o(12);const h={"of course":{approval:!0},"yes of course":{approval:!0},yes:{approval:!0},yeah:{approval:!0},yup:{approval:!0},sure:{approval:!0},no:{approval:!1},nah:{approval:!1},nope:{approval:!1},"no way":{approval:!1},"not sure":{approval:!1},"of course not":{approval:!1}},E={rock:{url:"https://www.youtube.com/watch?v=A0QkGThnKNQ"},metal:{url:"https://www.youtube.com/watch?v=xnKhsTXoKCI&list=PLhQCJTkrHOwSX8LUnIMgaTq3chP1tiTut"},punk:{url:"https://www.youtube.com/watch?v=xPxsS_-LTe0&list=PLvP_6uwiamDS23WxoCfqY4LBOXF_yF1l9"},rap:{url:"https://www.youtube.com/watch?v=5qm8PH4xAss&list=PLvuMfxvpAQrkzez9insKS8cGPU74sK1Ss"},"lo-fi":{url:"https://www.youtube.com/watch?v=5qap5aO4i9A"},house:{url:"https://www.youtube.com/watch?v=cna6C24AJkU"},techno:{url:"https://www.youtube.com/watch?v=bC9_OKu6nBQ"},country:{url:"https://www.youtube.com/watch?v=kI24NNjz2j8"}},w={finished:{finished:!0},done:{finished:!0},"I've done the task":{finished:!0},"I'm finished":{finished:!0}},v={quit:{bye:!0},"turn off":{bye:!0},bye:{bye:!0},goodbye:{bye:!0}};function O(t){return Object(i.k)((e=>({type:"SPEAK",value:t})))}function k(){return Object(i.k)("LISTEN")}function S(t){return{initial:"prompt",states:{prompt:{entry:O(t),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")}}}}function j(t,e){return{initial:"prompt",states:{prompt:{entry:O(t),on:{ENDSPEECH:"ask"}},ask:{entry:Object(i.k)("LISTEN")},help:{entry:O("We may be miscommunicating."),on:{ENDSPEECH:[e,"#root.init.help"]}},goodbye:{entry:O(""),on:{ENDSPEECH:[e,"#root.init.goodbye"]}}}}}function R(t,e){return{initial:"prompt",states:{prompt:{entry:Object(i.k)({type:"SPEAK",value:t}),on:{ENDSPEECH:e}}}}}function N(t,e){return{invoke:{id:"rasa",src:(t,e)=>D(t.option),onDone:{actions:[Object(i.b)(((t,e)=>({option:e.data.intent.name}))),(t,e)=>console.log(e.data)],target:t},onError:{target:e,actions:(t,e)=>console.log(e.data)}}}}function C(t,e,o,a,n,r,s){return{initial:"prompt",on:{ENDSPEECH:[{cond:e=>e.option===t,target:e},{cond:t=>t.option===o,target:a},{cond:t=>"help"===t.option,target:[r,"#root.init.help"]},{cond:t=>"bye"===t.option,target:[r,"#root.init.goodbye"]},{target:n}]},states:{prompt:{entry:Object(i.k)({type:"SPEAK",value:s})}}}}Object(u.a)({url:"https://statecharts.io/inspect",iframe:!1});Object(i.k)((t=>({type:"SPEAK",value:"".concat(t.snippet)})));const P=Object(s.a)({id:"root",type:"parallel",states:{init:{initial:"idle",states:{idle:{on:{CLICK:"welcome"}},welcome:Object(n.a)({on:{RECOGNISED:{target:"query",actions:Object(i.b)((t=>({option:t.recResult})))}}},S("Good morning. How are you?")),query:Object(n.a)({},N("distributor","welcome")),distributor:{initial:"prompt",on:{ENDSPEECH:[{cond:t=>"positive"===t.option,target:["#root.dm1.positive","idle"]},{cond:t=>"negative"===t.option,target:["#root.dm2.negative","idle"]},{cond:t=>"todo"===t.option,target:["#root.dm1.create_do","idle"]},{cond:t=>"ideas"===t.option,target:["#root.dm1.create_ideas","idle"]},{cond:t=>"answer"===t.option,target:"bob"},{cond:t=>"bob"===t.option,target:"bob"},{cond:t=>"neutral"===t.option,target:"neutral"},{cond:t=>"music"===t.option,target:["#root.dm2.negative.choose_music","idle"]},{cond:t=>"games"===t.option,target:["#root.dm2.negative.choose_game","idle"]},{cond:t=>"entertain"===t.option,target:["#root.dm2.negative.load_entertainment","idle"]},{cond:t=>"help"===t.option,target:"help"},{target:"goodbye"}]},states:{prompt:{entry:O("Ok.")}}},bob:Object(n.a)({on:{RECOGNISED:{target:"query",actions:Object(i.b)((t=>({option:t.recResult})))}}},S("I am Bob the Helper. I am limited. Tell me what you'd like to do.")),neutral:Object(n.a)({on:{RECOGNISED:{target:"#root.dm2.negative.choose_music",actions:Object(i.b)((t=>({option:t.recResult})))}}},S("You seem lost. What about listening to some music?")),help:Object(n.a)({on:{RECOGNISED:[{cond:t=>void 0!==h[t.recResult]&&!0===h[t.recResult].approval,target:"bob"},{cond:t=>void 0!==h[t.recResult]&&!1===h[t.recResult].approval,target:"goodbye"},{target:"bob"}]}},S("I feel lost. Would you like to start over?")),goodbye:Object(n.a)({},R("Happy to help out. See you later.","#root.init"))}},dm1:Object(n.a)({},p),dm2:Object(n.a)({},b),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(i.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:"idle"},states:{progress:{},match:{entry:Object(i.k)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),f=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(y.jsx)("button",Object(n.a)(Object(n.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"..."}));case t.state.matches({asrtts:"speaking"}):return Object(y.jsx)("button",Object(n.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t));default:return Object(y.jsx)("button",Object(n.a)(Object(n.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click on me"}))}};function _(){const t=Object(l.useSpeechSynthesis)({onEnd:()=>{d("ENDSPEECH")}}),e=t.speak,o=t.cancel,n=(t.speaking,Object(l.useSpeechRecognition)({onResult:t=>{d({type:"ASRRESULT",value:t})}})),r=n.listen,i=(n.listening,n.stop),s=Object(c.b)(P,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log("Ready to receive a command."),r({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log("Recognition stopped."),i()})),changeColour:Object(c.a)((t=>{console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(c.a)(((t,o)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(c.a)(((t,e)=>{console.log("TTS STOP..."),o()}))}}),u=Object(a.a)(s,3),p=u[0],d=u[1];u[2];return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(f,{state:p,onClick:()=>d("CLICK")})})}const D=t=>fetch(new Request("https://cors-anywhere.herokuapp.com/https://mood-admin.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/"},body:'{"text": "'.concat(t,'"}')})).then((t=>t.json())),I=document.getElementById("root");r.render(Object(y.jsx)(_,{}),I)}},[[35,1,2]]]);
//# sourceMappingURL=main.39ac922a.chunk.js.map